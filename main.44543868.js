/*! For license information please see main.44543868.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+N(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+N(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},R={transition:null},D={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(E);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,_=null,C=-1,T=5,N=-1;function I(){return!(t.unstable_now()-N<T)}function A(){if(null!==_){var e=t.unstable_now();N=e;var n=!0;try{n=_(!0,e)}finally{n?S():(k=!1,_=null)}}else k=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=A,S=function(){j.postMessage(null)}}else S=function(){y(A,0)};function R(e){_=e,k||(k=!0,S())}function D(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,D(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,F=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(fa){var r=fa}Reflect.construct(e,[],t)}else{try{t.call()}catch(fa){r=fa}e.call(t.prototype)}else{try{throw Error()}catch(fa){r=fa}e()}}catch(fa){if(fa&&r&&"string"===typeof fa.stack){for(var i=fa.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case _:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Pd){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,ke=null;function _e(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function Ce(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Te(){if(Se){var e=Se,t=ke;if(ke=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ne(e,t){return e(t)}function Ie(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==Se||null!==ke)&&(Ie(),Te())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Me=!1,Ue=null,Ve={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,St,kt,_t,Ct=!1,Tt=[],Nt=null,It=null,At=null,Pt=new Map,jt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Nt&&Mt(Nt)&&(Nt=null),null!==It&&Mt(It)&&(It=null),null!==At&&Mt(At)&&(At=null),Pt.forEach(Ut),jt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==It&&Bt(It,e),null!==At&&Bt(At,e),Pt.forEach(t),jt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Lt(Nt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},dn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return kn}var Cn=F({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),Nn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Fn=u&&(!Dn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Mr(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},kr={};function _r(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=_r("animationend"),Tr=_r("animationiteration"),Nr=_r("animationstart"),Ir=_r("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];jr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}jr(Cr,"onAnimationEnd"),jr(Tr,"onAnimationIteration"),jr(Nr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Me||(Me=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=s,i=xe(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Tr:case Nr:l=yn;break;case Ir:l=An;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Wn(a))if($n)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Mr(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=je(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=je(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=je(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=je(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Ei=[],Si=-1;function ki(e){return{current:e}}function _i(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ci(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ni=ki(Ti),Ii=ki(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){_i(Ii),_i(Ni)}function Di(e,t,n){if(Ni.current!==Ti)throw Error(s(168));Ci(Ni,t),Ci(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ni.current,Ci(Ni,e),Ci(Ii,Ii.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,_i(Ii),_i(Ni),Ci(Ni,e)):_i(Ii),Ci(Ii,n)}var Mi=null,Ui=!1,Vi=!1;function Bi(e){null===Mi?Mi=[e]:Mi.push(e)}function zi(){if(!Vi&&null!==Mi){Vi=!0;var e=0,t=wt;try{var n=Mi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Ui=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ge(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Xi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===j&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Uc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Uc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=qc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Vc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case j:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Ji(i,m),c}function g(i,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return is&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Vc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Uc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qc(o,r.mode,l)).return=r,r=s}return a(r);case j:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(O(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=zc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),xs=ws(!1),Es=ki(null),Ss=null,ks=null,_s=null;function Cs(){_s=ks=Ss=null}function Ts(e){var t=Es.current;_i(Es),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ss=e,_s=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ss)throw Error(s(308));ks=e,Ss.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ps=null;function js(e){null===Ps?Ps=[e]:Ps.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,js(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,js(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Vl|=o,e.lanes=o,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Hs=ki(Ws),Ks=ki(Ws),Gs=ki(Ws);function Qs(e){if(e===Ws)throw Error(s(174));return e}function Ys(e,t){switch(Ci(Gs,t),Ci(Ks,e),Ci(Hs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Hs),Ci(Hs,t)}function Xs(){_i(Hs),_i(Ks),_i(Gs)}function $s(e){Qs(Gs.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(Ci(Ks,e),Ci(Hs,n))}function Js(e){Ks.current===e&&(_i(Hs),_i(Ks))}var Zs=ki(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Vl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Vl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(xa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function ko(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,xa=!0),r=r.queue,Lo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,Co.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&so)||_o(n,t,i)}return i}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Io(e)}function To(e,t,n){return n(function(){No(t)&&Io(e)})}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Io(e){var t=Ds(e,1);null!==t&&ac(t,e,1,-1)}function Ao(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return wo().memoizedState}function Ro(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Oo(e,t){return Ro(8390656,8,e,t)}function Lo(e,t){return Do(2048,8,e,t)}function Fo(e,t){return Do(4,2,e,t)}function Mo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Vl|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=oc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Rs(e,t,n,r))){ac(n,e,r,sc()),$o(n,t,r)}}function Qo(e,t,n){var r=oc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,js(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(fa){}null!==(n=Rs(e,t,i,r))&&(ac(n,e,r,i=sc()),$o(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Jo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ao,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&so)||_o(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(To.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Rl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:zo,useContext:As,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Mo,useMemo:qo,useReducer:xo,useRef:jo,useState:function(){return xo(bo)},useDebugValue:Bo,useDeferredValue:function(e){return Wo(wo(),ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:zo,useContext:As,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Mo,useMemo:qo,useReducer:Eo,useRef:jo,useState:function(){return Eo(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[Eo(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sc(),i=oc(e),s=Ms(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(ac(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sc(),i=oc(e),s=Ms(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(ac(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),r=oc(e),i=Ms(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(ac(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=ji(t)?Ai:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=ji(t)?Ai:Ni.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Xl=r),ha(0,t)},n}function ga(e,t,n){(n=Ms(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ms(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=b.ReactCurrentOwner,xa=!1;function Sa(e,t,n,r){t.child=null===e?xs(t,null,n,r):bs(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||xa?(is&&n&&es(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function _a(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Uc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=Mc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Aa(e,t,n,r,i)}function Na(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Fl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Fl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Fl,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Fl,Ll),Ll|=r;return Sa(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var s=ji(n)?Ai:Ni.current;return s=Pi(t,s),Is(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||xa?(is&&r&&es(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Pa(e,t,n,r,i){if(ji(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ga(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pi(t,c=ji(n)?Ai:Ni.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Os=!1;var h=t.memoizedState;o.state=h,zs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ii.current||Os?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Os||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=ji(n)?Ai:Ni.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Os=!1,h=t.memoizedState,o.state=h,zs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ii.current||Os?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Os||sa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ja(e,t,n,r,s,i)}function ja(e,t,n,r,i,s){Ia(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Qa(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):Sa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,Sa(e,t,n,r),t.child}var Oa,La,Fa,Ma,Ua={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),e=Vc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=Ua,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(o=Vc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=Ua,o);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),ac(r,e,i,-1))}return bc(),qa(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Mc(r,a):(a=Vc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ua,i}return e=(a=e.child).sibling,i=Mc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function Ha(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $a(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return ji(t.type)&&Ri(),Xa(t),null;case 3:return r=t.stateNode,Xs(),_i(Ii),_i(Ni),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(dc(ss),ss=null))),La(e,t),Xa(t),null;case 5:Js(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=Qs(Hs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Xa(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==ss&&(dc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ml&&(Ml=3):bc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Xs(),La(e,t),null===e&&zr(t.stateNode.containerInfo),Xa(t),null;case 10:return Ts(t.type._context),Xa(t),null;case 19:if(_i(Zs),null===(o=t.memoizedState))return Xa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ya(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ya(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Kl&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Xa(t),null}else 2*$e()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return gc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ja(e,t){switch(ts(t),t.tag){case 1:return ji(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),_i(Ii),_i(Ni),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Xs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return gc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Fa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var sl=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&il(t,n,s)}i=i.next}while(i!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function cl(e){var t=e.alternate;null!==t&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ul(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ul(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}var pl=null,ml=!1;function gl(e,t,n){for(n=n.child;null!==n;)yl(e,t,n),n=n.sibling}function yl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:el||rl(n,t);case 6:var r=pl,i=ml;pl=null,gl(e,t,n),ml=i,null!==(pl=r)&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(pl,n.stateNode));break;case 4:r=pl,i=ml,pl=n.stateNode.containerInfo,ml=!0,gl(e,t,n),pl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!el&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&il(n,t,o),i=i.next}while(i!==r)}gl(e,t,n);break;case 1:if(!el&&(rl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}gl(e,t,n);break;case 21:gl(e,t,n);break;case 22:1&n.mode?(el=(r=el)||null!==n.memoizedState,gl(e,t,n),el=r):gl(e,t,n);break;default:gl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tl),t.forEach(function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,ml=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===pl)throw Error(s(160));yl(o,a,i),pl=null,ml=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(fa){Ic(i,t,fa)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),xl(e),4&r){try{ol(3,e,e.return),al(3,e)}catch(g){Ic(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:wl(t,e),xl(e),512&r&&null!==n&&rl(n,n.return);break;case 5:if(wl(t,e),xl(e),512&r&&null!==n&&rl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ic(e,e.return,g)}}break;case 6:if(wl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ic(e,e.return,g)}}break;case 3:if(wl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:wl(t,e),xl(e);break;case 13:wl(t,e),xl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=$e())),4&r&&vl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(el=(u=el)||d,wl(t,e),el=u):wl(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(nl=e,d=e.child;null!==d;){for(h=nl=d;null!==nl;){switch(p=(f=nl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,nl=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),xl(e),4&r&&vl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ul(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),fl(e,dl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;hl(e,dl(e),o);break;default:throw Error(s(161))}}catch(ca){Ic(e,e.return,ca)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,n){nl=e,Sl(e,t,n)}function Sl(e,t,n){for(var r=0!==(1&e.mode);null!==nl;){var i=nl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Za;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||el;a=Za;var c=el;if(Za=o,(el=l)&&!c)for(nl=i;null!==nl;)l=(o=nl).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,nl=l):Cl(i);for(;null!==s;)nl=s,Sl(s,t,n),s=s.sibling;nl=i,Za=a,el=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,nl=s):kl(e)}}function kl(e){for(;null!==nl;){var t=nl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:el||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!el)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}el||512&t.flags&&ll(t)}catch(Ea){Ic(t,t.return,Ea)}}if(t===e){nl=null;break}if(null!==(n=t.sibling)){n.return=t.return,nl=n;break}nl=t.return}}function _l(e){for(;null!==nl;){var t=nl;if(t===e){nl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nl=n;break}nl=t.return}}function Cl(e){for(;null!==nl;){var t=nl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(ca){Ic(t,n,ca)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ca){Ic(t,i,ca)}}var s=t.return;try{ll(t)}catch(ca){Ic(t,s,ca)}break;case 5:var o=t.return;try{ll(t)}catch(ca){Ic(t,o,ca)}}}catch(ca){Ic(t,t.return,ca)}if(t===e){nl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,nl=a;break}nl=t.return}}var Tl,Nl=Math.ceil,Il=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Pl=b.ReactCurrentBatchConfig,jl=0,Rl=null,Dl=null,Ol=0,Ll=0,Fl=ki(0),Ml=0,Ul=null,Vl=0,Bl=0,zl=0,ql=null,Wl=null,Hl=0,Kl=1/0,Gl=null,Ql=!1,Xl=null,$l=null,Jl=!1,Zl=null,ec=0,tc=0,nc=null,rc=-1,ic=0;function sc(){return 0!==(6&jl)?$e():-1!==rc?rc:rc=$e()}function oc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===ic&&(ic=mt()),ic):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ac(e,t,n,r){if(50<tc)throw tc=0,nc=null,Error(s(185));yt(e,n,r),0!==(2&jl)&&e===Rl||(e===Rl&&(0===(2&jl)&&(Bl|=n),4===Ml&&hc(e,Ol)),lc(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Kl=$e()+500,Ui&&zi()))}function lc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Rl?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(fc.bind(null,e)):Bi(fc.bind(null,e)),oi(function(){0===(6&jl)&&zi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(rc=-1,ic=0,0!==(6&jl))throw Error(s(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var i=jl;jl|=2;var o=wc();for(Rl===e&&Ol===t||(Gl=null,Kl=$e()+500,yc(e,t));;)try{Sc();break}catch(l){vc(e,l)}Cs(),Il.current=o,jl=i,null!==Dl?t=0:(Rl=null,Ol=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=uc(e,i))),1===t)throw n=Ul,yc(e,0),hc(e,r),lc(e,$e()),n;if(6===t)hc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=xc(e,r))&&(0!==(o=pt(e))&&(r=o,t=uc(e,o))),1===t))throw n=Ul,yc(e,0),hc(e,r),lc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Cc(e,Wl,Gl);break;case 3:if(hc(e,r),(130023424&r)===r&&10<(t=Hl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){sc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Cc.bind(null,e,Wl,Gl),t);break}Cc(e,Wl,Gl);break;case 4:if(hc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ri(Cc.bind(null,e,Wl,Gl),r);break}Cc(e,Wl,Gl);break;default:throw Error(s(329))}}}return lc(e,$e()),e.callbackNode===n?cc.bind(null,e):null}function uc(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(yc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Wl,Wl=n,null!==t&&dc(t)),e}function dc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function hc(e,t){for(t&=~zl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function fc(e){if(0!==(6&jl))throw Error(s(327));Tc();var t=ht(e,0);if(0===(1&t))return lc(e,$e()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=uc(e,r))}if(1===n)throw n=Ul,yc(e,0),hc(e,t),lc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Wl,Gl),lc(e,$e()),null}function pc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Kl=$e()+500,Ui&&zi())}}function mc(e){null!==Zl&&0===Zl.tag&&0===(6&jl)&&Tc();var t=jl;jl|=1;var n=Pl.transition,r=wt;try{if(Pl.transition=null,wt=1,e)return e()}finally{wt=r,Pl.transition=n,0===(6&(jl=t))&&zi()}}function gc(){Ll=Fl.current,_i(Fl)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Xs(),_i(Ii),_i(Ni),no();break;case 5:Js(r);break;case 4:Xs();break;case 13:case 19:_i(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:gc()}n=n.return}if(Rl=e,Dl=e=Mc(e.current,null),Ol=Ll=t,Ml=0,Ul=null,zl=Bl=Vl=0,Wl=ql=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function vc(e,t){for(;;){var n=Dl;try{if(Cs(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Al.current=null,null===n||null===n.return){Ml=1,Ul=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,wa(p,a,l,0,t),1&p.mode&&ya(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ya(o,u,t),bc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=va(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),wa(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ml&&(Ml=2),null===ql?ql=[o]:ql.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,ma(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===$l||!$l.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(Ca){t=Ca,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function wc(){var e=Il.current;return Il.current=Jo,null===e?Jo:e}function bc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Rl||0===(268435455&Vl)&&0===(268435455&Bl)||hc(Rl,Ol)}function xc(e,t){var n=jl;jl|=2;var r=wc();for(Rl===e&&Ol===t||(Gl=null,yc(e,t));;)try{Ec();break}catch(i){vc(e,i)}if(Cs(),jl=n,Il.current=r,null!==Dl)throw Error(s(261));return Rl=null,Ol=0,Ml}function Ec(){for(;null!==Dl;)kc(Dl)}function Sc(){for(;null!==Dl&&!Ye();)kc(Dl)}function kc(e){var t=Tl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?_c(e):Dl=t,Al.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$a(n,t,Ll)))return void(Dl=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Cc(e,t,n){var r=wt,i=Pl.transition;try{Pl.transition=null,wt=1,function(e,t,n,r){do{Tc()}while(null!==Zl);if(0!==(6&jl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Rl&&(Dl=Rl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Dc(tt,function(){return Tc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var a=wt;wt=1;var l=jl;jl|=4,Al.current=null,function(e,t){if(ei=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Yl){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){t=nl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(Yl){Ic(t,t.return,Yl)}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=sl,sl=!1}(e,n),bl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,El(n,e,i),Xe(),jl=l,wt=a,Pl.transition=o}else e.current=n;if(Jl&&(Jl=!1,Zl=e,ec=i),o=e.pendingLanes,0===o&&($l=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ql)throw Ql=!1,e=Xl,Xl=null,e;0!==(1&ec)&&0!==e.tag&&Tc(),o=e.pendingLanes,0!==(1&o)?e===nc?tc++:(tc=0,nc=e):tc=0,zi()}(e,t,n,r)}finally{Pl.transition=i,wt=r}return null}function Tc(){if(null!==Zl){var e=bt(ec),t=Pl.transition,n=wt;try{if(Pl.transition=null,wt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,ec=0,0!==(6&jl))throw Error(s(331));var i=jl;for(jl|=4,nl=e.current;null!==nl;){var o=nl,a=o.child;if(0!==(16&nl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(nl=u;null!==nl;){var d=nl;switch(d.tag){case 0:case 11:case 15:ol(8,d,o)}var h=d.child;if(null!==h)h.return=d,nl=h;else for(;null!==nl;){var f=(d=nl).sibling,p=d.return;if(cl(d),d===u){nl=null;break}if(null!==f){f.return=p,nl=f;break}nl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}nl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,nl=a;else e:for(;null!==nl;){if(0!==(2048&(o=nl).flags))switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,nl=v;break e}nl=o.return}}var w=e.current;for(nl=w;null!==nl;){var b=(a=nl).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,nl=b;else e:for(a=w;null!==nl;){if(0!==(2048&(l=nl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(Ca){Ic(l,l.return,Ca)}if(l===a){nl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,nl=x;break e}nl=l.return}}if(jl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(Ca){}r=!0}return r}finally{wt=n,Pl.transition=t}}return!1}function Nc(e,t,n){e=Us(e,t=ma(0,t=ua(n,t),1),1),t=sc(),null!==e&&(yt(e,1,t),lc(e,t))}function Ic(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Us(t,e=ga(t,e=ua(n,e),1),1),e=sc(),null!==t&&(yt(t,1,e),lc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ol&n)===n&&(4===Ml||3===Ml&&(130023424&Ol)===Ol&&500>$e()-Hl?yc(e,0):zl|=n),lc(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Ds(e,t))&&(yt(e,t,n),lc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Pc(e,n)}function Dc(e,t){return Ge(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Oc(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Fc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Vc(n.children,i,o,t);case k:a=8,i|=8;break;case _:return(e=Lc(12,n,t,2|i)).elementType=_,e.lanes=o,e;case I:return(e=Lc(13,n,t,i)).elementType=I,e.lanes=o,e;case A:return(e=Lc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Bc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case N:a=11;break e;case P:a=14;break e;case j:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,i,s,o,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Kc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ji(n))return Oi(e,n,t)}return t}function Gc(e,t,n,r,i,s,o,a,l){return(e=Hc(n,r,!0,e,0,s,0,a,l)).context=Kc(null),n=e.current,(s=Ms(r=sc(),i=oc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),lc(e,r),e}function Qc(e,t,n,r){var i=t.current,s=sc(),o=oc(i);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ms(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(ac(e,i,o,s),Vs(e,i,o)),o}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fs();break;case 5:$s(t);break;case 1:ji(t.type)&&Li(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=Qa(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n)}return Qa(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Pi(t,Ni.current);Is(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=ja(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Pa(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=_a(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Qa(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ia(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ba(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ii.current){t=Qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ms(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ns(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ns(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=As(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),_a(e,t,r,i=na(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ga(e,t),t.tag=1,ji(r)?(e=!0,Li(t)):e=!1,Is(t,n),oa(t,r,i),la(t,r,i,n),ja(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 22:return Na(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function eu(e){this._internalRoot=e}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(){}function iu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Yc(o);a.call(e)}}Qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Yc(o);s.call(e)}}var o=Gc(t,r,e,0,null,!1,0,"",ru);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),mc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",ru);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),mc(function(){Qc(t,l,n,r)}),l}(n,t,e,i,r);return Yc(o)}eu.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qc(e,t,null,null)},eu.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mc(function(){Qc(null,e,null,null)}),t[pi]=null}},eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),lc(t,$e()),0===(6&jl)&&(Kl=$e()+500,zi()))}break;case 13:mc(function(){var t=Ds(e,1);if(null!==t){var n=sc();ac(t,e,1,n)}}),$c(e,1)}},Et=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ac(t,e,134217728,sc());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=oc(e),n=Ds(e,t);if(null!==n)ac(n,e,t,sc());$c(e,t)}},kt=function(){return wt},_t=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=pc,Ie=mc;var su={usingClientEntryPoint:!1,Events:[wi,bi,xi,Ce,Te,pc]},ou={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{it=lu.inject(au),st=lu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!tu(e))throw Error(s(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return mc(e)},t.hydrate=function(e,t,n){if(!nu(t))throw Error(s(200));return iu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new eu(t)},t.render=function(e,t,n){if(!nu(t))throw Error(s(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(s(40));return!!e._reactRootContainer&&(mc(function(){iu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=pc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return iu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],h=["page"],f=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function v(){return _(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return E("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function w(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function k(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function _(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return C(e)}null==c&&(c=0,o.replaceState(u(u({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(y,h),l=e,()=>{i.removeEventListener(y,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=E(p.location,e,t);n&&n(r,e),c=d()+1;let u=x(r,c),h=p.createHref(r);try{o.pushState(u,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let r=E(p.location,e,t);n&&n(r,e),c=d();let i=x(r,c),u=p.createHref(r);o.replaceState(i,"",u),s&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),w(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function T(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let i=q(("string"===typeof t?k(t):t).pathname||"/",n);if(null==i)return null;let s=I(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=z(i);o=U(s[a],e,r)}return o}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;w(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Q([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(w(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),I(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:M(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of A(e.path))s(e,t,!0,r);else s(e,t)}),t}function A(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=A(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,j=3,R=2,D=1,O=10,L=-2,F=e=>"*"===e;function M(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=L),t&&(r+=R),n.filter(e=>!F(e)).reduce((e,t)=>e+(P.test(t)?j:""===t?D:O),r)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Q([s,u.pathname]),pathnameBase:Y(Q([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Q([s,u.pathnameBase]))}return o}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=k(e):(r=u({},e),w(!r.pathname||!r.pathname.includes("?"),W("?","pathname","search",r)),w(!r.pathname||!r.pathname.includes("#"),W("#","pathname","hash",r)),w(!r.search||!r.search.includes("#"),W("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?k(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:X(r),hash:$(i)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var ie=r.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var oe=r.createContext(null);oe.displayName="Await";var ae=r.createContext(null);ae.displayName="Navigation";var le=r.createContext(null);le.displayName="Location";var ce=r.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=r.createContext(null);ue.displayName="RouteError";function de(){return null!=r.useContext(le)}function he(){return w(de(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(le).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){r.useContext(ae).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(ce);return e?function(){let{router:e}=Ce("useNavigate"),t=Ne("useNavigate"),n=r.useRef(!1);pe(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,u({fromRouteId:t},i)))},[e,t]);return i}():function(){w(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(ae),{matches:i}=r.useContext(ce),{pathname:s}=he(),o=JSON.stringify(K(i)),a=r.useRef(!1);pe(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(a.current,fe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=G(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,o,s,e]);return l}()}var ge=r.createContext(null);function ye(){let{matches:e}=r.useContext(ce),t=e[e.length-1];return t?t.params:{}}function ve(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ce),{pathname:i}=he(),s=JSON.stringify(K(n));return r.useMemo(()=>G(e,JSON.parse(s),i,"path"===t),[e,s,i,t])}function we(e,t,n,i,s){w(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(ae),{matches:a}=r.useContext(ce),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Pe(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=he();if(t){var g;let e="string"===typeof t?k(t):t;w("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=T(e,{pathname:v});b(f||null!=x,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=ke(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Q([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,i,s);return t&&E?r.createElement(le.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},E):E}function be(){let e=Ie(),t=J(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,a)}var xe=r.createElement(be,null),Ee=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ce.Provider,{value:this.props.routeContext},r.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Se(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(te);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ce.Provider,{value:t},i)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));w(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,u)=>{let d,h=!1,f=null,p=null;n&&(d=o&&c.route.id?o[c.route.id]:void 0,f=c.route.errorElement||xe,a&&(l<0&&0===u?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=c.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=d?f:h?p:c.route.Component?r.createElement(c.route.Component,null):c.route.element?c.route.element:e,r.createElement(Se,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?r.createElement(Ee,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function _e(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=r.useContext(te);return w(t,_e(e)),t}function Te(e){let t=r.useContext(ne);return w(t,_e(e)),t}function Ne(e){let t=function(e){let t=r.useContext(ce);return w(t,_e(e)),t}(e),n=t.matches[t.matches.length-1];return w(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ie(){var e;let t=r.useContext(ue),n=Te("useRouteError"),i=Ne("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ae={};function Pe(e,t,n){t||Ae[e]||(Ae[e]=!0,b(!1,n))}var je={};function Re(e,t){e||je[t]||(je[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return we(t,void 0,r,i,n)});function De(e){return function(e){let t=r.useContext(ce).outlet;return t?r.createElement(ge.Provider,{value:e},t):t}(e.context)}function Oe(e){w(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:a=!1}=e;w(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:o,static:a,future:{}}),[l,o,a]);"string"===typeof i&&(i=k(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=r.useMemo(()=>{let e=q(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:s}},[l,u,d,h,f,p,s]);return b(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:r.createElement(ae.Provider,{value:c},r.createElement(le.Provider,{children:n,value:m}))}function Fe(e){let{children:t,location:n}=e;return we(Me(t),n)}r.Component;function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Me(e.props.children,s));w(e.type===Oe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),w(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Me(e.props.children,s)),n.push(o)}),n}var Ue="get",Ve="application/x-www-form-urlencoded";function Be(e){return null!=e&&"string"===typeof e.tagName}var ze=null;var qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||qe.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ve,'"')),null)}function He(e,t){let n,r,i,s,o;if(Be(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?q(o,t):null,n=e.getAttribute("method")||Ue,i=We(e.getAttribute("enctype"))||Ve,s=new FormData(e)}else if(function(e){return Be(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Be(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?q(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||Ue,i=We(e.getAttribute("formenctype"))||We(o.getAttribute("enctype"))||Ve,s=new FormData(o,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Be(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ue,r=null,i=Ve,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===q(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ye(e){return null!=e&&"string"===typeof e.page}function Xe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Je(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ze(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ye(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let e=r.useContext(te);return Ke(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=r.useContext(ne);return Ke(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rt=r.createContext(void 0);function it(){let e=r.useContext(rt);return Ke(e,"You must render this element inside a <HydratedRouter> element"),e}function st(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ot(e,t,n){if(n&&!ut)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}rt.displayName="FrameworkContext";function at(e){let{page:t}=e,n=s(e,h),{router:i}=tt(),o=r.useMemo(()=>T(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?r.createElement(ct,u({page:t,matches:o},n)):null}function lt(e){let{manifest:t,routeModules:n}=it(),[i,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Ze((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Xe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),i}function ct(e){let{page:t,matches:n}=e,i=s(e,f),o=he(),{manifest:a,routeModules:l}=it(),{basename:c}=tt(),{loaderData:d,matches:h}=nt(),p=r.useMemo(()=>$e(t,n,h,a,o,"data"),[t,n,h,a,o]),m=r.useMemo(()=>$e(t,n,h,a,o,"assets"),[t,n,h,a,o]),g=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ge(t,c,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[c,d,o,a,p,n,t,l]),y=r.useMemo(()=>Je(m,a),[m,a]),v=lt(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",u({key:t,nonce:i.nonce},n))}))}var ut=!1;function dt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:o,routeDiscovery:a,ssr:l}=it(),{router:c,static:h,staticContext:f}=tt(),{matches:p}=nt(),m=r.useContext(re),g=et(a,l);o&&(o.didRenderScripts=!0);let y=ot(p,null,i);r.useEffect(()=>{ut=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let o=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Ke(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=s(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(o.pop();o.length>0;)a.push("/".concat(o.join("/"))),o.pop();a.forEach(e=>{let n=T(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return u(u({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),w=ut||m?[]:(b=t.entry.imports.concat(Je(y,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let x="object"===typeof t.sri?t.sri:{};return Re(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ut||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),w.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0})),v)}function ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ft(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(J(t))return r.createElement(pt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(pt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function pt(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:s,children:o}=e,{routeModules:a}=it();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!s?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,i?r.createElement(dt,null):null)))}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.9.1")}catch(UI){}function gt(e){let{basename:t,children:n,window:i}=e,s=r.useRef();null==s.current&&(s.current=v({window:i,v5Compat:!0}));let o=s.current,[a,l]=r.useState({action:o.action,location:o.location}),c=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>o.listen(c),[o,c]),r.createElement(Le,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=r.forwardRef(function(e,t){let n,{onClick:i,discover:o="render",prefetch:a="none",relative:l,reloadDocument:c,replace:d,state:h,target:f,to:m,preventScrollReset:g,viewTransition:y}=e,v=s(e,p),{basename:x}=r.useContext(ae),E="string"===typeof m&&yt.test(m),k=!1;if("string"===typeof m&&E&&(n=m,mt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=q(t.pathname,x);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:k=!0}catch(UI){b(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let _=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(ae),{hash:s,pathname:o,search:a}=ve(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:Q([n,o])),i.createHref({pathname:l,search:a,hash:s})}(m,{relative:l}),[C,T,N]=function(e,t){let n=r.useContext(rt),[i,s]=r.useState(!1),[o,a]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:st(l,p),onBlur:st(c,m),onMouseEnter:st(u,p),onMouseLeave:st(d,m),onTouchStart:st(h,p)}]:[!1,f,{}]}(a,v),I=function(e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),c=he(),u=ve(e,{relative:o});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:S(c)===S(u);l(e,{replace:t,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,n,i,t,e,s,o,a])}(m,{replace:d,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:y});let A=r.createElement("a",u(u(u({},v),N),{},{href:n||_,onClick:k||c?i:function(e){i&&i(e),e.defaultPrevented||I(e)},ref:ht(t,T),target:f,"data-discover":E||"render"!==o?void 0:"true"}));return C&&!E?r.createElement(r.Fragment,null,A,r.createElement(at,{page:_})):A});vt.displayName="Link";var wt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:a=!1,style:l,to:c,viewTransition:d,children:h}=e,f=s(e,m),p=ve(c,{relative:f.relative}),g=he(),y=r.useContext(ne),{navigator:v,basename:b}=r.useContext(ae),x=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ie);w(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Et("useViewTransitionState"),s=ve(e,{relative:t});if(!n.isTransitioning)return!1;let o=q(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=q(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=V(s.pathname,a)||null!=V(s.pathname,o)}(p)&&!0===d,E=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,S=g.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(S=S.toLowerCase(),k=k?k.toLowerCase():null,E=E.toLowerCase()),k&&b&&(k=q(k,b)||k);const _="/"!==E&&E.endsWith("/")?E.length-1:E.length;let C,T=S===E||!a&&S.startsWith(E)&&"/"===S.charAt(_),N=null!=k&&(k===E||!a&&k.startsWith(E)&&"/"===k.charAt(E.length)),I={isActive:T,isPending:N,isTransitioning:x},A=T?n:void 0;C="function"===typeof o?o(I):[o,T?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(I):l;return r.createElement(vt,u(u({},f),{},{"aria-current":A,className:C,ref:t,style:P,to:c,viewTransition:d}),"function"===typeof h?h(I):h)});wt.displayName="NavLink";var bt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:o,reloadDocument:a,replace:l,state:c,method:d=Ue,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:y}=e,v=s(e,g),b=_t(),x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ae),i=r.useContext(ce);w(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o=u({},ve(e||".",{relative:t})),a=he();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:Q([n,o.pathname]));return S(o)}(h,{relative:p}),E="get"===d.toLowerCase()?"get":"post",k="string"===typeof h&&yt.test(h);return r.createElement("form",u(u({ref:t,method:E,action:x,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:o,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:y})}},v),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function xt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Et(e){let t=r.useContext(te);return w(t,xt(e)),t}bt.displayName="Form";var St=0,kt=()=>"__".concat(String(++St),"__");function _t(){let{router:e}=Et("useSubmit"),{basename:t}=r.useContext(ae),n=Ne("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=He(r,t);if(!1===i.navigate){let t=i.fetcherKey||kt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}var Ct=n(579);const Tt=(0,r.createContext)({});function Nt(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const It="undefined"!==typeof window,At=It?r.useLayoutEffect:r.useEffect,Pt=(0,r.createContext)(null);function jt(e){return"object"===typeof e&&null!==e}function Rt(e){return jt(e)&&"offsetHeight"in e}const Dt=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Ot extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Rt(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Lt(e){let{children:t,isPresent:n,anchorX:i,root:s}=e;const o=(0,r.useId)(),a=(0,r.useRef)(null),l=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,r.useContext)(Dt);return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:u,right:d}=l.current;if(n||!a.current||!e||!t)return;const h="left"===i?"left: ".concat(u):"right: ".concat(d);a.current.dataset.motionPopId=o;const f=document.createElement("style");c&&(f.nonce=c);const p=null!==s&&void 0!==s?s:document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{p.contains(f)&&p.removeChild(f)}},[n]),(0,Ct.jsx)(Ot,{isPresent:n,childRef:a,sizeRef:l,children:r.cloneElement(t,{ref:a})})}const Ft=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:s,custom:o,presenceAffectsLayout:a,mode:l,anchorX:c,root:d}=e;const h=Nt(Mt),f=(0,r.useId)();let p=!0,m=(0,r.useMemo)(()=>(p=!1,{id:f,initial:n,isPresent:i,custom:o,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;s&&s()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[i,h,s]);return a&&p&&(m=u({},m)),(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),r.useEffect(()=>{!i&&!h.size&&s&&s()},[i]),"popLayout"===l&&(t=(0,Ct.jsx)(Lt,{isPresent:i,anchorX:c,root:d,children:t})),(0,Ct.jsx)(Pt.Provider,{value:m,children:t})};function Mt(){return new Map}function Ut(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(Pt);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,o=(0,r.useId)();(0,r.useEffect)(()=>{if(e)return s(o)},[e]);const a=(0,r.useCallback)(()=>e&&i&&i(o),[o,i,e]);return!n&&i?[!1,a]:[!0]}const Vt=e=>e.key||"";function Bt(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}const zt=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:u}=e;const[d,h]=Ut(l),f=(0,r.useMemo)(()=>Bt(t),[t]),p=l&&!d?[]:f.map(Vt),m=(0,r.useRef)(!0),g=(0,r.useRef)(f),y=Nt(()=>new Map),[v,w]=(0,r.useState)(f),[b,x]=(0,r.useState)(f);At(()=>{m.current=!1,g.current=f;for(let e=0;e<b.length;e++){const t=Vt(b[e]);p.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}},[b,p.length,p.join("-")]);const E=[];if(f!==v){let e=[...f];for(let t=0;t<b.length;t++){const n=b[t],r=Vt(n);p.includes(r)||(e.splice(t,0,n),E.push(n))}return"wait"===a&&E.length&&(e=E),x(Bt(e)),w(f),null}const{forceRender:S}=(0,r.useContext)(Tt);return(0,Ct.jsx)(Ct.Fragment,{children:b.map(e=>{const t=Vt(e),r=!(l&&!d)&&(f===b||p.includes(t));return(0,Ct.jsx)(Ft,{isPresent:r,initial:!(m.current&&!i)&&void 0,custom:n,presenceAffectsLayout:o,mode:a,root:u,onExitComplete:r?void 0:()=>{if(!y.has(t))return;y.set(t,!0);let e=!0;y.forEach(t=>{t||(e=!1)}),e&&(null===S||void 0===S||S(),x(g.current),l&&(null===h||void 0===h||h()),s&&s())},anchorX:c,children:e},t)})})},qt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ht;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ht extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kt=function(e){return function(e){const t=qt(e);return Wt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Gt=function(e){try{return Wt.decodeString(e,!0)}catch(UI){console.error("base64Decode failed: ",UI)}return null};const Qt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Yt=()=>{try{return Qt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDzwOFPA8JEq_m7mojA0CjsKXfCXyHWPV0",REACT_APP_FIREBASE_APP_ID:"1:778407123724:web:5b8f0988cb19d27d750729",REACT_APP_FIREBASE_AUTH_DOMAIN:"ukiyo-store.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"778407123724",REACT_APP_FIREBASE_PROJECT_ID:"ukiyo-store",REACT_APP_FIREBASE_STORAGE_BUCKET:"ukiyo-store.appspot.com",REACT_APP_GEMINI_API_KEY:"AIzaSyAIEQc_mFJmLcHYCxKJVGOrU_vx7VLdD2E"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(UI){return}const t=e&&Gt(e[1]);return t&&JSON.parse(t)})()}catch(UI){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(UI))}},Xt=e=>{var t,n;return null===(n=null===(t=Yt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$t=e=>{const t=Xt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jt=()=>{var e;return null===(e=Yt())||void 0===e?void 0:e.config},Zt=e=>{var t;return null===(t=Yt())||void 0===t?void 0:t["_".concat(e)]};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function tn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Kt(JSON.stringify({alg:"none",type:"JWT"})),Kt(JSON.stringify(s)),""].join(".")}function nn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function rn(){return!function(){var e;const t=null===(e=Yt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(UI){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sn(){try{return"object"===typeof indexedDB}catch(UI){return!1}}class on extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ln,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new on(n,s,t)}}const ln=/\{\$([^}]+)}/g;function cn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(un(n)&&un(s)){if(!cn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function un(e){return null!==e&&"object"===typeof e}function dn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function hn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function fn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class pn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=mn),void 0===r.error&&(r.error=mn),void 0===r.complete&&(r.complete=mn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(UI){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(UI){"undefined"!==typeof console&&console.error&&console.error(UI)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}function gn(e){return e&&e._delegate?e._delegate:e}class yn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vn="[DEFAULT]";class wn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new en;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(UI){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(UI){if(r)return null;throw UI}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch(UI){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(UI){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===vn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const xn=[];var En;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(En||(En={}));const Sn={debug:En.DEBUG,verbose:En.VERBOSE,info:En.INFO,warn:En.WARN,error:En.ERROR,silent:En.SILENT},kn=En.INFO,_n={[En.DEBUG]:"log",[En.VERBOSE]:"log",[En.INFO]:"info",[En.WARN]:"warn",[En.ERROR]:"error"},Cn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_n[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Tn{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=Cn,this._userLogHandler=null,xn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in En))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Sn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,En.DEBUG,...t),this._logHandler(this,En.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,En.VERBOSE,...t),this._logHandler(this,En.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,En.INFO,...t),this._logHandler(this,En.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,En.WARN,...t),this._logHandler(this,En.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,En.ERROR,...t),this._logHandler(this,En.ERROR,...t)}}let Nn,In;const An=new WeakMap,Pn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,Dn=new WeakMap;let On={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||jn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ln(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(In||(In=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Un(this),n),Mn(An.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mn(e.apply(Un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Un(this),t,...r);return jn.set(s,t.sort?t.sort():[t]),Mn(s)}}function Fn(e){return"function"===typeof e?Ln(e):(e instanceof IDBTransaction&&function(e){if(Pn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Pn.set(e,t)}(e),t=e,(Nn||(Nn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,On):e);var t}function Mn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Mn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&An.set(t,e)}).catch(()=>{}),Dn.set(t,e),t}(e);if(Rn.has(e))return Rn.get(e);const t=Fn(e);return t!==e&&(Rn.set(e,t),Dn.set(t,e)),t}const Un=e=>Dn.get(e);const Vn=["get","getKey","getAll","getAllKeys","count"],Bn=["put","add","delete","clear"],zn=new Map;function qn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(zn.get(t))return zn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Bn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return zn.set(t,s),s}On=(e=>u(u({},e),{},{get:(t,n,r)=>qn(t,n)||e.get(t,n,r),has:(t,n)=>!!qn(t,n)||e.has(t,n)}))(On);class Wn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Hn="@firebase/app",Kn="0.10.2",Gn=new Tn("@firebase/app"),Qn="@firebase/app-compat",Yn="@firebase/analytics-compat",Xn="@firebase/analytics",$n="@firebase/app-check-compat",Jn="@firebase/app-check",Zn="@firebase/auth",er="@firebase/auth-compat",tr="@firebase/database",nr="@firebase/database-compat",rr="@firebase/functions",ir="@firebase/functions-compat",sr="@firebase/installations",or="@firebase/installations-compat",ar="@firebase/messaging",lr="@firebase/messaging-compat",cr="@firebase/performance",ur="@firebase/performance-compat",dr="@firebase/remote-config",hr="@firebase/remote-config-compat",fr="@firebase/storage",pr="@firebase/storage-compat",mr="@firebase/firestore",gr="@firebase/firestore-compat",yr="firebase",vr="[DEFAULT]",wr={[Hn]:"fire-core",[Qn]:"fire-core-compat",[Xn]:"fire-analytics",[Yn]:"fire-analytics-compat",[Jn]:"fire-app-check",[$n]:"fire-app-check-compat",[Zn]:"fire-auth",[er]:"fire-auth-compat",[tr]:"fire-rtdb",[nr]:"fire-rtdb-compat",[rr]:"fire-fn",[ir]:"fire-fn-compat",[sr]:"fire-iid",[or]:"fire-iid-compat",[ar]:"fire-fcm",[lr]:"fire-fcm-compat",[cr]:"fire-perf",[ur]:"fire-perf-compat",[dr]:"fire-rc",[hr]:"fire-rc-compat",[fr]:"fire-gcs",[pr]:"fire-gcs-compat",[mr]:"fire-fst",[gr]:"fire-fst-compat","fire-js":"fire-js",[yr]:"fire-js-all"},br=new Map,xr=new Map,Er=new Map;function Sr(e,t){try{e.container.addComponent(t)}catch(UI){Gn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),UI)}}function kr(e){const t=e.name;if(Er.has(t))return Gn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Er.set(t,e);for(const n of br.values())Sr(n,e);for(const n of xr.values())Sr(n,e);return!0}function _r(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cr(e){return void 0!==e.settings}const Tr=new an("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Nr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Ir="10.11.1";function Ar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:vr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Tr.create("bad-app-name",{appName:String(i)});if(n||(n=Jt()),!n)throw Tr.create("no-options");const s=br.get(i);if(s){if(cn(n,s.options)&&cn(r,s.config))return s;throw Tr.create("duplicate-app",{appName:i})}const o=new bn(i);for(const l of Er.values())o.addComponent(l);const a=new Nr(n,r,o);return br.set(i,a),a}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr;const t=br.get(e);if(!t&&e===vr&&Jt())return Ar();if(!t)throw Tr.create("no-app",{appName:e});return t}function jr(e,t,n){var r;let i=null!==(r=wr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Gn.warn(e.join(" "))}kr(new yn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Rr="firebase-heartbeat-store";let Dr=null;function Or(){return Dr||(Dr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Mn(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Mn(o.result),e.oldVersion,e.newVersion,Mn(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Rr)}catch(UI){console.warn(UI)}}}).catch(e=>{throw Tr.create("idb-open",{originalErrorMessage:e.message})})),Dr}async function Lr(e,t){try{const n=(await Or()).transaction(Rr,"readwrite"),r=n.objectStore(Rr);await r.put(t,Fr(e)),await n.done}catch(UI){if(UI instanceof on)Gn.warn(UI.message);else{const t=Tr.create("idb-set",{originalErrorMessage:null===UI||void 0===UI?void 0:UI.message});Gn.warn(t.message)}}}function Fr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Mr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ur();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(e=>e.date===r))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ur(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Br(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Br(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Kt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ur(){return(new Date).toISOString().substring(0,10)}class Vr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!sn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Or()).transaction(Rr),n=await t.objectStore(Rr).get(Fr(e));return await t.done,n}catch(UI){if(UI instanceof on)Gn.warn(UI.message);else{const t=Tr.create("idb-get",{originalErrorMessage:null===UI||void 0===UI?void 0:UI.message});Gn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Lr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Br(e){return Kt(JSON.stringify({version:2,heartbeats:e})).length}var zr;zr="",kr(new yn("platform-logger",e=>new Wn(e),"PRIVATE")),kr(new yn("heartbeat",e=>new Mr(e),"PRIVATE")),jr(Hn,Kn,zr),jr(Hn,Kn,"esm2017"),jr("fire-js","");jr("firebase","10.11.1","app");function qr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Wr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hr=Wr,Kr=new an("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gr=new Tn("@firebase/auth");function Qr(e){if(Gr.logLevel<=En.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gr.error("Auth (".concat(Ir,"): ").concat(e),...n)}}function Yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ei(e,...n)}function Xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ei(e,...n)}function $r(e,t,n){const r=Object.assign(Object.assign({},Hr()),{[t]:n});return new an("auth","Firebase",r).create(t,{appName:e.name})}function Jr(e){return $r(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Yr(e,"argument-error"),$r(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Kr.create(e,...n)}function ti(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ei(t,...r)}}function ni(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qr(t),new Error(t)}function ri(e,t){e||ni(t)}function ii(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function si(){return"http:"===oi()||"https:"===oi()}function oi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ai(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(si()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class li{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ai()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ci(e,t){ri(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ui{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const di={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hi=new li(3e4,6e4);function fi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pi(e,t,n,r){return mi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=dn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ui.fetch()(yi(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function mi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},di),t);try{const t=new wi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw bi(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw bi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw bi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw bi(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw $r(e,a,o);Yr(e,a)}}catch(UI){if(UI instanceof on)throw UI;Yr(e,"network-request-failed",{message:String(UI)})}}async function gi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await pi(e,t,n,r,i);return"mfaPendingCredential"in s&&Yr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function yi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ci(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function vi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wi{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Xr(this.auth,"network-request-failed")),hi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xr(e,t,r);return i.customData._tokenResponse=n,i}function xi(e){return void 0!==e&&void 0!==e.enterprise}class Ei{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Si(e,t){return pi(e,"GET","/v2/recaptchaConfig",fi(e,t))}async function ki(e,t){return pi(e,"POST","/v1/accounts:lookup",t)}function _i(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(UI){}}function Ci(e){return 1e3*Number(e)}function Ti(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Gt(n);return e?JSON.parse(e):(Qr("Failed to decode base64 JWT payload"),null)}catch(UI){return Qr("Caught error parsing JWT payload as JSON",null===UI||void 0===UI?void 0:UI.toString()),null}}function Ni(e){const t=Ti(e);return ti(t,"internal-error"),ti("undefined"!==typeof t.exp,"internal-error"),ti("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ii(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(UI){throw UI instanceof on&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(UI)&&e.auth.currentUser===e&&await e.auth.signOut(),UI}}class Ai{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(UI){return void((null===UI||void 0===UI?void 0:UI.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Pi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ji(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ii(e,ki(n,{idToken:r}));ti(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Ri(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pi(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Ri(e){return e.map(e=>{var{providerId:t}=e,n=qr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ti(e.idToken,"internal-error"),ti("undefined"!==typeof e.idToken,"internal-error"),ti("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ni(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ti(0!==e.length,"internal-error");const t=Ni(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ti(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await mi(e,{},async()=>{const n=dn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=yi(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ui.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Di;return n&&(ti("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ti("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ti("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Di,this.toJSON())}_performRefresh(){return ni("not implemented")}}function Oi(e,t){ti("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Li{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=qr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ii(this,this.stsTokenManager.getToken(this.auth,e));return ti(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=gn(e),r=await n.getIdToken(t),i=Ti(r);ti(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_i(Ci(i.auth_time)),issuedAtTime:_i(Ci(i.iat)),expirationTime:_i(Ci(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=gn(e);await ji(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ti(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ti(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ji(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await Ii(this,async function(e,t){return pi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:E}=t;ti(v&&E,e,"internal-error");const S=Di.fromJSON(this.name,E);ti("string"===typeof v,e,"internal-error"),Oi(u,e.name),Oi(d,e.name),ti("boolean"===typeof w,e,"internal-error"),ti("boolean"===typeof b,e,"internal-error"),Oi(h,e.name),Oi(f,e.name),Oi(p,e.name),Oi(m,e.name),Oi(g,e.name),Oi(y,e.name);const k=new Li({uid:v,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(k.providerData=x.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Di;r.updateFromServerResponse(t);const i=new Li({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ji(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ti(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ri(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Di;o.updateFromIdToken(n);const a=new Li({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Pi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Fi=new Map;function Mi(e){ri(e instanceof Function,"Expected a class definition");let t=Fi.get(e);return t?(ri(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fi.set(e,t),t)}class Ui{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ui.type="NONE";const Vi=Ui;function Bi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Bi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Bi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zi(Mi(Vi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Mi(Vi);const s=Bi(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Li._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new zi(i,e,n)):new zi(i,e,n)}}function qi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yi(t))return"Blackberry";if(Xi(t))return"Webos";if(Hi(t))return"Safari";if((t.includes("chrome/")||Ki(t))&&!t.includes("edge/"))return"Chrome";if(Qi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/firefox\//i.test(e)}function Hi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/crios\//i.test(e)}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/iemobile/i.test(e)}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/android/i.test(e)}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/blackberry/i.test(e)}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/webos/i.test(e)}function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ji(){return function(){const e=nn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn();return $i(e)||Qi(e)||Xi(e)||Yi(e)||/windows phone/i.test(e)||Gi(e)}function es(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qi(nn());break;case"Worker":t="".concat(qi(nn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ir,"/").concat(r)}class ts{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(UI){r(UI)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(UI){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===UI||void 0===UI?void 0:UI.message})}}}class ns{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class rs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.beforeStateQueue=new ts(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mi(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(UI){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ki(this,{idToken:e}),n=await Li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(UI){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(UI))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ti(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(UI){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ji(e)}catch(UI){if((null===UI||void 0===UI?void 0:UI.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Jr(this));const t=e?gn(e):null;return t&&ti(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ti(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return pi(e,"GET","/v2/passwordPolicy",fi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ns(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new an("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return pi(e,"POST","/v2/accounts:revokeToken",fi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mi(e)||this._popupRedirectResolver;ti(t,this,"argument-error"),this.redirectPersistenceManager=await zi.create(this,[Mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ti(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ti(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Gr.logLevel<=En.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gr.warn("Auth (".concat(Ir,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function is(e){return gn(e)}class ss{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new pn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ti(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let os={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function as(e){return os.loadJS(e)}function ls(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class cs{constructor(e){this.type="recaptcha-enterprise",this.auth=is(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;xi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Si(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ei(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&xi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=os.recaptchaEnterpriseScript;0!==t.length&&(t+=i),as(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function us(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new cs(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ds(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await us(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await us(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function hs(e,t,n){const r=is(e);ti(r._canInitEmulator,r,"emulator-config-failed"),ti(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=fs(t),{host:o,port:a}=function(e){const t=fs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ps(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ps(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ps(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ms{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}async function gs(e,t){return pi(e,"POST","/v1/accounts:signUp",t)}async function ys(e,t){return gi(e,"POST","/v1/accounts:signInWithPassword",fi(e,t))}async function vs(e,t){return pi(e,"POST","/v1/accounts:sendOobCode",fi(e,t))}async function ws(e,t){return vs(e,t)}async function bs(e,t){return vs(e,t)}class xs extends ms{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new xs(e,t,"password")}static _fromEmailAndCode(e,t){return new xs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ds(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ys);case"emailLink":return async function(e,t){return gi(e,"POST","/v1/accounts:signInWithEmailLink",fi(e,t))}(e,{email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ds(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gs);case"emailLink":return async function(e,t){return gi(e,"POST","/v1/accounts:signInWithEmailLink",fi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Es(e,t){return gi(e,"POST","/v1/accounts:signInWithIdp",fi(e,t))}class Ss extends ms{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=qr(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ss(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Es(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Es(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Es(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dn(t)}return e}}const ks={USER_NOT_FOUND:"user-not-found"};class _s extends ms{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new _s({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new _s({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gi(e,"POST","/v1/accounts:signInWithPhoneNumber",fi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gi(e,"POST","/v1/accounts:signInWithPhoneNumber",fi(e,t));if(n.temporaryProof)throw bi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gi(e,"POST","/v1/accounts:signInWithPhoneNumber",fi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ks)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new _s({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Cs{constructor(e){var t,n,r,i,s,o;const a=hn(fn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ti(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=hn(fn(e)).link,n=t?hn(fn(t)).deep_link_id:null,r=hn(fn(e)).deep_link_id;return(r?hn(fn(r)).link:null)||r||n||t||e}(e);try{return new Cs(t)}catch(n){return null}}}class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,t){return xs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cs.parseLink(t);return ti(n,"argument-error"),xs._fromEmailAndCode(e,n.code,n.tenantId)}}Ts.PROVIDER_ID="password",Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ns{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Is extends Ns{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class As extends Is{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return As.credential(t.oauthAccessToken)}catch(n){return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com",As.PROVIDER_ID="facebook.com";class Ps extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ss._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ps.credential(n,r)}catch(i){return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com",Ps.PROVIDER_ID="google.com";class js extends Is{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return js.credential(t.oauthAccessToken)}catch(n){return null}}}js.GITHUB_SIGN_IN_METHOD="github.com",js.PROVIDER_ID="github.com";class Rs extends Is{constructor(){super("twitter.com")}static credential(e,t){return Ss._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Rs.credential(n,r)}catch(i){return null}}}async function Ds(e,t){return gi(e,"POST","/v1/accounts:signUp",fi(e,t))}Rs.TWITTER_SIGN_IN_METHOD="twitter.com",Rs.PROVIDER_ID="twitter.com";class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Li._fromIdTokenResponse(e,n,r),s=Ls(n);return new Os({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ls(n);return new Os({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ls(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Fs extends on{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Fs.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Fs(e,t,n,r)}}function Ms(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Fs._fromErrorAndOperation(e,n,t,r);throw n})}async function Us(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ii(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Os._forOperation(e,"link",r)}async function Vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Cr(r.app))return Promise.reject(Jr(r));const i="reauthenticate";try{const s=await Ii(e,Ms(r,i,t,e),n);ti(s.idToken,r,"internal-error");const o=Ti(s.idToken);ti(o,r,"internal-error");const{sub:a}=o;return ti(e.uid===a,r,"user-mismatch"),Os._forOperation(e,i,s)}catch(UI){throw(null===UI||void 0===UI?void 0:UI.code)==="auth/".concat("user-not-found")&&Yr(r,"user-mismatch"),UI}}async function Bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Cr(e.app))return Promise.reject(Jr(e));const r="signIn",i=await Ms(e,r,t),s=await Os._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function zs(e,t){return Bs(is(e),t)}async function qs(e,t){return Vs(gn(e),t)}function Ws(e,t,n){var r;ti((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ti("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ti(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ti(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Hs(e){const t=is(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ks(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Ii(e,async function(e,t){return pi(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}new WeakMap;const Gs="__sak";class Qs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gs,"1"),this.storage.removeItem(Gs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ys extends Qs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=nn();return Hi(e)||$i(e)}()&&function(){try{return!(!window||window===window.top)}catch(UI){return!1}}(),this.fallbackToPolling=Zi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ji()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ys.type="LOCAL";const Xs=Ys;class $s extends Qs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$s.type="SESSION";const Js=$s;class Zs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Zs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zs.receivers=[];class to{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=eo("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function no(){return window}function ro(){return"undefined"!==typeof no().WorkerGlobalScope&&"function"===typeof no().importScripts}const io="firebaseLocalStorageDb",so="firebaseLocalStorage",oo="fbase_key";class ao{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lo(e,t){return e.transaction([so],t?"readwrite":"readonly").objectStore(so)}function co(){const e=indexedDB.open(io,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(so,{keyPath:oo})}catch(UI){n(UI)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(so)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(io);return new ao(e).toPromise()}(),t(await co()))})})}async function uo(e,t,n){const r=lo(e,!0).put({[oo]:t,value:n});return new ao(r).toPromise()}function ho(e,t){const n=lo(e,!0).delete(t);return new ao(n).toPromise()}class fo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await co()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(UI){if(t++>3)throw UI;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ro()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zs._getInstance(ro()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new to(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await co();return await uo(e,Gs,"1"),await ho(e,Gs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>uo(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=lo(e,!1).get(t),r=await new ao(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ho(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=lo(e,!1).getAll();return new ao(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}fo.type="LOCAL";const po=fo;ls("rcb"),new li(3e4,6e4);const mo="recaptcha";async function go(e,t,n){var r;const i=await n.verify();try{let s;if(ti("string"===typeof i,e,"argument-error"),ti(n.type===mo,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ti("enroll"===t.type,e,"internal-error");const n=await function(e,t){return pi(e,"POST","/v2/accounts/mfaEnrollment:start",fi(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ti("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ti(n,e,"missing-multi-factor-info");const o=await function(e,t){return pi(e,"POST","/v2/accounts/mfaSignIn:start",fi(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return pi(e,"POST","/v1/accounts:sendVerificationCode",fi(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class yo{constructor(e){this.providerId=yo.PROVIDER_ID,this.auth=is(e)}verifyPhoneNumber(e,t){return go(this.auth,e,gn(t))}static credential(e,t){return _s._fromVerification(e,t)}static credentialFromResult(e){const t=e;return yo.credentialFromTaggedObject(t)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?_s._fromTokenResponse(n,r):null}}function vo(e,t){return t?Mi(t):(ti(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}yo.PROVIDER_ID="phone",yo.PHONE_SIGN_IN_METHOD="phone";class wo extends ms{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Es(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Es(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Es(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bo(e){return Bs(e.auth,new wo(e),e.bypassAuthState)}function xo(e){const{auth:t,user:n}=e;return ti(n,t,"internal-error"),Vs(n,new wo(e),e.bypassAuthState)}async function Eo(e){const{auth:t,user:n}=e;return ti(n,t,"internal-error"),Us(n,new wo(e),e.bypassAuthState)}class So{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(UI){this.reject(UI)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(UI){this.reject(UI)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bo;case"linkViaPopup":case"linkViaRedirect":return Eo;case"reauthViaPopup":case"reauthViaRedirect":return xo;default:Yr(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ko=new li(2e3,1e4);class _o extends So{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ti(e,this.auth,"internal-error"),e}async onExecution(){ri(1===this.filter.length,"Popup operations only handle one event");const e=eo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ko.get())};e()}}_o.currentPopupAction=null;const Co=new Map;class To extends So{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Co.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ao(t),r=Io(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(UI){e=()=>Promise.reject(UI)}Co.set(this.auth._key(),e)}return this.bypassAuthState||Co.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function No(e,t){Co.set(e._key(),t)}function Io(e){return Mi(e._redirectPersistence)}function Ao(e){return Bi("pendingRedirect",e.config.apiKey,e.name)}async function Po(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Cr(e.app))return Promise.reject(Jr(e));const r=is(e),i=vo(r,t),s=new To(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class jo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Do(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Do(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ro(e))}saveEventToCache(e){this.cachedEventUids.add(Ro(e)),this.lastProcessedEventTime=Date.now()}}function Ro(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Do(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Oo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lo=/^https?/;async function Fo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return pi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Mo(r))return}catch(n){}Yr(e,"unauthorized-domain")}function Mo(e){const t=ii(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Lo.test(n))return!1;if(Oo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Uo=new li(3e4,6e4);function Vo(){const e=no().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Bo(e){return new Promise((t,n)=>{var r,i,s;function o(){Vo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vo(),n(Xr(e,"network-request-failed"))},timeout:Uo.get()})}if(null===(i=null===(r=no().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=no().gapi)||void 0===s?void 0:s.load)){const t=ls("iframefcb");return no()[t]=()=>{gapi.load?o():n(Xr(e,"network-request-failed"))},as("".concat(os.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw zo=null,e})}let zo=null;const qo=new li(5e3,15e3),Wo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ho=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ko(e){const t=e.config;ti(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ci(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ir},i=Ho.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(dn(r).slice(1))}async function Go(e){const t=await function(e){return zo=zo||Bo(e),zo}(e),n=no().gapi;return ti(n,e,"internal-error"),t.open({where:document.body,url:Ko(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Xr(e,"network-request-failed"),s=no().setTimeout(()=>{r(i)},qo.get());function o(){no().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Qo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(UI){}}}function Xo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Qo),{width:r.toString(),height:i.toString(),top:s,left:o}),c=nn().toLowerCase();n&&(a=Ki(c)?"_blank":n),Wi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return $i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Yo(null);const d=window.open(t||"",a,u);ti(d,e,"popup-blocked");try{d.focus()}catch(UI){}return new Yo(d)}const $o="__/auth/handler",Jo="emulator/auth/handler",Zo=encodeURIComponent("fac");async function ea(e,t,n,r,i,s){ti(e.config.authDomain,e,"auth-domain-config-required"),ti(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ir,eventId:i};if(t instanceof Ns){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Is){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Zo,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat($o);return ci(t,Jo)}(e),"?").concat(dn(a).slice(1)).concat(c)}const ta="webStorageSupport";const na=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=Po,this._overrideRedirectResult=No}async _openPopup(e,t,n,r){var i;ri(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Xo(e,await ea(e,t,n,ii(),r),eo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){no().location.href=e}(await ea(e,t,n,ii(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ri(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Go(e),n=new jo(e);return t.register("authEvent",t=>{ti(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ta,{type:ta},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ta];void 0!==i&&t(!!i),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zi()||Hi()||$i()}};var ra="@firebase/auth",ia="1.7.2";class sa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ti(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oa=Zt("authIdTokenMaxAge")||300;let aa=null;var la;!function(e){os=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Xr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),la="Browser",kr(new yn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ti(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:la,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:es(la)},c=new rs(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),kr(new yn("auth-internal",e=>(e=>new sa(e))(is(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),jr(ra,ia,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(la)),jr(ra,ia,"esm2017");var ca,ua="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},da={},ha=ha||{},fa=ua||self;function pa(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ma(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ga="closure_uid_"+(1e9*Math.random()>>>0),ya=0;function va(e,t,n){return e.call.apply(e.bind,arguments)}function wa(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ba(e,t,n){return(ba=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa).apply(null,arguments)}function xa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ea(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Sa(){this.s=this.s,this.o=this.o}Sa.prototype.s=!1,Sa.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ga)&&e[ga]||(e[ga]=++ya))},Sa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _a(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ca(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(pa(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ta(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ta.prototype.h=function(){this.defaultPrevented=!0};var Na=function(){if(!fa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};fa.addEventListener("test",e,t),fa.removeEventListener("test",e,t)}catch(n){}return e}();function Ia(e){return/^[\s\xa0]*$/.test(e)}function Aa(){var e=fa.navigator;return e&&(e=e.userAgent)?e:""}function Pa(e){return-1!=Aa().indexOf(e)}function ja(e){return ja[" "](e),e}ja[" "]=function(){};var Ra,Da,Oa=Pa("Opera"),La=Pa("Trident")||Pa("MSIE"),Fa=Pa("Edge"),Ma=Fa||La,Ua=Pa("Gecko")&&!(-1!=Aa().toLowerCase().indexOf("webkit")&&!Pa("Edge"))&&!(Pa("Trident")||Pa("MSIE"))&&!Pa("Edge"),Va=-1!=Aa().toLowerCase().indexOf("webkit")&&!Pa("Edge");function Ba(){var e=fa.document;return e?e.documentMode:void 0}e:{var za="",qa=function(){var e=Aa();return Ua?/rv:([^\);]+)(\)|;)/.exec(e):Fa?/Edge\/([\d\.]+)/.exec(e):La?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Va?/WebKit\/(\S+)/.exec(e):Oa?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qa&&(za=qa?qa[1]:""),La){var Wa=Ba();if(null!=Wa&&Wa>parseFloat(za)){Ra=String(Wa);break e}}Ra=za}if(fa.document&&La){var Ha=Ba();Da=Ha||(parseInt(Ra,10)||void 0)}else Da=void 0;var Ka=Da;function Ga(e,t){if(Ta.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ua){e:{try{ja(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ga.$.h.call(this)}}Ea(Ga,Ta);var Qa={2:"touch",3:"pen",4:"mouse"};Ga.prototype.h=function(){Ga.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),Xa=0;function $a(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xa,this.fa=this.ia=!1}function Ja(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Za(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function el(e){const t={};for(const n in e)t[n]=e[n];return t}const tl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nl(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<tl.length;t++)n=tl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function rl(e){this.src=e,this.g={},this.h=0}function il(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ka(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ja(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sl(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}rl.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=sl(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new $a(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ol="closure_lm_"+(1e6*Math.random()|0),al={};function ll(e,t,n,r,i){if(r&&r.once)return ul(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ll(e,t[s],n,r,i);return null}return n=yl(n),e&&e[Ya]?e.O(t,n,ma(r)?!!r.capture:!!r,i):cl(e,t,n,!1,r,i)}function cl(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ma(i)?!!i.capture:!!i,a=ml(e);if(a||(e[ol]=a=new rl(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=pl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Na||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ul(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ul(e,t[s],n,r,i);return null}return n=yl(n),e&&e[Ya]?e.P(t,n,ma(r)?!!r.capture:!!r,i):cl(e,t,n,!0,r,i)}function dl(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)dl(e,t[s],n,r,i);else r=ma(r)?!!r.capture:!!r,n=yl(n),e&&e[Ya]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sl(s=e.g[t],n,r,i))&&(Ja(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ml(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sl(t,n,r,i)),(n=-1<e?t[e]:null)&&hl(n))}function hl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ya])il(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ml(t))?(il(n,e),0==n.h&&(n.src=null,t[ol]=null)):Ja(e)}}}function fl(e){return e in al?al[e]:al[e]="on"+e}function pl(e,t){if(e.fa)e=!0;else{t=new Ga(t,this);var n=e.listener,r=e.la||e.src;e.ia&&hl(e),e=n.call(r,t)}return e}function ml(e){return(e=e[ol])instanceof rl?e:null}var gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(e){return"function"===typeof e?e:(e[gl]||(e[gl]=function(t){return e.handleEvent(t)}),e[gl])}function vl(){Sa.call(this),this.i=new rl(this),this.S=this,this.J=null}function wl(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ta(t,e);else if(t instanceof Ta)t.target=t.target||e;else{var i=t;nl(t=new Ta(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=bl(o,r,!0,t)&&i}if(i=bl(o=t.g=e,r,!0,t)&&i,i=bl(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=bl(o=t.g=n[s],r,!1,t)&&i}function bl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&il(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ea(vl,Sa),vl.prototype[Ya]=!0,vl.prototype.removeEventListener=function(e,t,n,r){dl(this,e,t,n,r)},vl.prototype.N=function(){if(vl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ja(n[r]);delete t.g[e],t.h--}}this.J=null},vl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xl=fa.JSON.stringify;function El(){var e=Il;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Sl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new kl,e=>e.reset());class kl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _l(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Cl(e){fa.setTimeout(()=>{throw e},0)}let Tl,Nl=!1,Il=new class{constructor(){this.h=this.g=null}add(e,t){const n=Sl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Al=()=>{const e=fa.Promise.resolve(void 0);Tl=()=>{e.then(Pl)}};var Pl=()=>{for(var e;e=El();){try{e.h.call(e.g)}catch(n){Cl(n)}var t=Sl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Nl=!1};function jl(e,t){vl.call(this),this.h=e||1,this.g=t||fa,this.j=ba(this.qb,this),this.l=Date.now()}function Rl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Dl(e,t,n){if("function"===typeof e)n&&(e=ba(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ba(e.handleEvent,e)}return 2147483647<Number(t)?-1:fa.setTimeout(e,t||0)}function Ol(e){e.g=Dl(()=>{e.g=null,e.i&&(e.i=!1,Ol(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ea(jl,vl),(ca=jl.prototype).ga=!1,ca.T=null,ca.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wl(this,"tick"),this.ga&&(Rl(this),this.start()))}},ca.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ca.N=function(){jl.$.N.call(this),Rl(this),delete this.g};class Ll extends Sa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ol(this)}N(){super.N(),this.g&&(fa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fl(e){Sa.call(this),this.h=e,this.g={}}Ea(Fl,Sa);var Ml=[];function Ul(e,t,n,r){Array.isArray(n)||(n&&(Ml[0]=n.toString()),n=Ml);for(var i=0;i<n.length;i++){var s=ll(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Vl(e){Za(e.g,function(e,t){this.g.hasOwnProperty(t)&&hl(e)},e),e.g={}}function Bl(){this.g=!0}function zl(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return xl(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Fl.prototype.N=function(){Fl.$.N.call(this),Vl(this)},Fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bl.prototype.Ea=function(){this.g=!1},Bl.prototype.info=function(){};var ql={},Wl=null;function Hl(){return Wl=Wl||new vl}function Kl(e){Ta.call(this,ql.Ta,e)}function Gl(e){const t=Hl();wl(t,new Kl(t))}function Ql(e,t){Ta.call(this,ql.STAT_EVENT,e),this.stat=t}function Yl(e){const t=Hl();wl(t,new Ql(t,e))}function Xl(e,t){Ta.call(this,ql.Ua,e),this.size=t}function $l(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return fa.setTimeout(function(){e()},t)}ql.Ta="serverreachability",Ea(Kl,Ta),ql.STAT_EVENT="statevent",Ea(Ql,Ta),ql.Ua="timingevent",Ea(Xl,Ta);var Jl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ec(){}function tc(e){return e.h||(e.h=e.i())}function nc(){}ec.prototype.h=null;var rc,ic={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sc(){Ta.call(this,"d")}function oc(){Ta.call(this,"c")}function ac(){}function lc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fl(this),this.P=uc,e=Ma?125:void 0,this.V=new jl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cc}function cc(){this.i=null,this.g="",this.h=!1}Ea(sc,Ta),Ea(oc,Ta),Ea(ac,ec),ac.prototype.g=function(){return new XMLHttpRequest},ac.prototype.i=function(){return{}},rc=new ac;var uc=45e3,dc={},hc={};function fc(e,t,n){e.L=1,e.A=jc(Tc(t)),e.u=n,e.S=!0,pc(e,null)}function pc(e,t){e.G=Date.now(),vc(e),e.B=Tc(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Hc(n.i,"t",r),e.o=0,n=e.l.J,e.h=new cc,e.g=Ku(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ll(ba(e.Pa,e,e.g),e.O)),Ul(e.U,e.g,"readystatechange",e.nb),t=e.I?el(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Gl(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.v,e.B,e.m,e.W,e.u)}function mc(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function gc(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=yc(e,n),r==hc){4==t&&(e.s=4,Yl(14),i=!1),zl(e.j,e.m,null,"[Incomplete Response]");break}if(r==dc){e.s=4,Yl(15),zl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zl(e.j,e.m,r,null),Sc(e,r)}mc(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Yl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mu(t),t.M=!0,Yl(11))):(zl(e.j,e.m,n,"[Invalid Chunked Response]"),Ec(e),xc(e))}function yc(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?hc:(n=Number(t.substring(n,r)),isNaN(n)?dc:(r+=1)+n>t.length?hc:(t=t.slice(r,r+n),e.o=r+n,t))}function vc(e){e.Y=Date.now()+e.P,wc(e,e.P)}function wc(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=$l(ba(e.lb,e),t)}function bc(e){e.C&&(fa.clearTimeout(e.C),e.C=null)}function xc(e){0==e.l.H||e.J||Bu(e.l,e)}function Ec(e){bc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Rl(e.V),Vl(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Sc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Jc(n.i,e)))if(!e.K&&Jc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vu(n),Au(n)}Fu(n),Yl(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=$l(ba(n.ib,n),6e3));if(1>=$c(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else qu(n,11)}else if((e.K||n.g==e)&&Vu(n),!Ia(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Zc(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Pc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Hu(r,r.J?r.pa:null,r.Y),o.K){eu(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(bc(a),vc(a)),r.g=o}else Lu(r);0<n.j.length&&ju(n)}else"stop"!=c[0]&&"close"!=c[0]||qu(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?qu(n,7):Iu(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Gl()}catch(c){}}function kc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(pa(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(pa(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(pa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ca=lc.prototype).setTimeout=function(e){this.P=e},ca.nb=function(e){e=e.target;const t=this.M;t&&3==Su(e)?t.l():this.Pa(e)},ca.Pa=function(e){try{if(e==this.g)e:{const u=Su(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ma||this.g&&(this.h.h||this.g.ja()||ku(this.g)))){this.J||4!=u||7==t||Gl(),bc(this);var n=this.g.da();this.ca=n;t:if(mc(this)){var r=ku(this.g);e="";var i=r.length,s=4==Su(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ec(this),xc(this);var o="";break t}this.h.i=new fa.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ia(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Yl(12),Ec(this),xc(this);break e}zl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sc(this,n)}this.S?(gc(this,u,o),Ma&&this.i&&3==u&&(Ul(this.U,this.V,"tick",this.mb),this.V.start())):(zl(this.j,this.m,o,null),Sc(this,o)),4==u&&Ec(this),this.i&&!this.J&&(4==u?Bu(this.l,this):(this.i=!1,vc(this)))}else(function(e){const t={};e=(e.g&&2<=Su(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ia(e[r]))continue;var n=_l(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Yl(12)):(this.s=0,Yl(13)),Ec(this),xc(this)}}}catch(u){}},ca.mb=function(){if(this.g){var e=Su(this.g),t=this.g.ja();this.o<t.length&&(bc(this),gc(this,e,t),this.i&&4!=e&&vc(this))}},ca.cancel=function(){this.J=!0,Ec(this)},ca.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.B),2!=this.L&&(Gl(),Yl(17)),Ec(this),this.s=2,xc(this)):wc(this,this.Y-e)};var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Cc){this.h=e.h,Nc(this,e.j),this.s=e.s,this.g=e.g,Ic(this,e.m),this.l=e.l;var t=e.i,n=new Bc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ac(this,n),this.o=e.o}else e&&(t=String(e).match(_c))?(this.h=!1,Nc(this,t[1]||"",!0),this.s=Rc(t[2]||""),this.g=Rc(t[3]||"",!0),Ic(this,t[4]),this.l=Rc(t[5]||"",!0),Ac(this,t[6]||"",!0),this.o=Rc(t[7]||"")):(this.h=!1,this.i=new Bc(null,this.h))}function Tc(e){return new Cc(e)}function Nc(e,t,n){e.j=n?Rc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ic(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ac(e,t,n){t instanceof Bc?(e.i=t,function(e,t){t&&!e.j&&(zc(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(qc(this,t),Hc(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Dc(t,Uc)),e.i=new Bc(t,e.h))}function Pc(e,t,n){e.i.set(t,n)}function jc(e){return Pc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Dc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Cc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Dc(t,Lc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Dc(t,Lc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Dc(n,"/"==n.charAt(0)?Mc:Fc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Dc(n,Vc)),e.join("")};var Lc=/[#\/\?@]/g,Fc=/[#\?:]/g,Mc=/[#\?]/g,Uc=/[#\?@]/g,Vc=/#/g;function Bc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function qc(e,t){zc(e),t=Kc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wc(e,t){return zc(e),t=Kc(e,t),e.g.has(t)}function Hc(e,t,n){qc(e,t),0<n.length&&(e.i=null,e.g.set(Kc(e,t),_a(n)),e.h+=n.length)}function Kc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ca=Bc.prototype).add=function(e,t){zc(this),this.i=null,e=Kc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ca.forEach=function(e,t){zc(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},ca.ta=function(){zc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ca.Z=function(e){zc(this);let t=[];if("string"===typeof e)Wc(this,e)&&(t=t.concat(this.g.get(Kc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ca.set=function(e,t){return zc(this),this.i=null,Wc(this,e=Kc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ca.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ca.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Gc=class{constructor(e,t){this.g=e,this.map=t}};function Qc(e){this.l=e||Yc,fa.PerformanceNavigationTiming?e=0<(e=fa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(fa.g&&fa.g.Ka&&fa.g.Ka()&&fa.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yc=10;function Xc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $c(e){return e.h?1:e.g?e.g.size:0}function Jc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zc(e,t){e.g?e.g.add(t):e.h=t}function eu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return _a(e.i)}Qc.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nu,ru=class{stringify(e){return fa.JSON.stringify(e,void 0)}parse(e){return fa.JSON.parse(e,void 0)}};function iu(){this.g=new ru}function su(e,t,n){const r=n||"";try{kc(e,function(e,n){let i=e;ma(e)&&(i=xl(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(UI){throw t.push(r+"type="+encodeURIComponent("_badmap")),UI}}function ou(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function au(e){this.l=e.ec||null,this.j=e.ob||!1}function lu(e,t){vl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=cu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ea(au,ec),au.prototype.g=function(){return new lu(this.l,this.j)},au.prototype.i=(nu={},function(){return nu}),Ea(lu,vl);var cu=0;function uu(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function du(e){e.readyState=4,e.l=null,e.j=null,e.A=null,hu(e)}function hu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ca=lu.prototype).open=function(e,t){if(this.readyState!=cu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,hu(this)},ca.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||fa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ca.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,du(this)),this.readyState=cu},ca.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof fa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uu(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ca.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?du(this):hu(this),3==this.readyState&&uu(this)}},ca.Za=function(e){this.g&&(this.response=this.responseText=e,du(this))},ca.Ya=function(e){this.g&&(this.response=e,du(this))},ca.ka=function(){this.g&&du(this)},ca.setRequestHeader=function(e,t){this.v.append(e,t)},ca.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ca.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fu=fa.JSON.parse;function pu(e){vl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mu,this.L=this.M=!1}Ea(pu,vl);var mu="",gu=/^https?$/i,yu=["POST","PUT"];function vu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wu(e),xu(e)}function wu(e){e.F||(e.F=!0,wl(e,"complete"),wl(e,"error"))}function bu(e){if(e.h&&"undefined"!=typeof ha&&(!e.C[1]||4!=Su(e)||2!=e.da()))if(e.v&&4==Su(e))Dl(e.La,0,e);else if(wl(e,"readystatechange"),4==Su(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(_c)[1]||null;!i&&fa.self&&fa.self.location&&(i=fa.self.location.protocol.slice(0,-1)),r=!gu.test(i?i.toLowerCase():"")}n=r}if(n)wl(e,"complete"),wl(e,"success");else{e.m=6;try{var s=2<Su(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",wu(e)}}finally{xu(e)}}}function xu(e,t){if(e.g){Eu(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||wl(e,"ready");try{n.onreadystatechange=r}catch(UI){}}}function Eu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(fa.clearTimeout(e.A),e.A=null)}function Su(e){return e.g?e.g.readyState:0}function ku(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Pd){return null}}function _u(e){let t="";return Za(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Cu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_u(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pc(e,t,n))}function Tu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nu(e){this.Ga=0,this.j=[],this.l=new Bl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tu("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tu("baseRetryDelayMs",5e3,e),this.hb=Tu("retryDelaySeedMs",1e4,e),this.eb=Tu("forwardChannelMaxRetries",2,e),this.xa=Tu("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qc(e&&e.concurrentRequestLimit),this.Ja=new iu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Iu(e){if(Pu(e),3==e.H){var t=e.W++,n=Tc(e.I);if(Pc(n,"SID",e.K),Pc(n,"RID",t),Pc(n,"TYPE","terminate"),Du(e,n),(t=new lc(e,e.l,t)).L=2,t.A=jc(Tc(n)),n=!1,fa.navigator&&fa.navigator.sendBeacon)try{n=fa.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&fa.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ku(t.l,null),t.g.ha(t.A)),t.G=Date.now(),vc(t)}Wu(e)}function Au(e){e.g&&(Mu(e),e.g.cancel(),e.g=null)}function Pu(e){Au(e),e.u&&(fa.clearTimeout(e.u),e.u=null),Vu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&fa.clearTimeout(e.m),e.m=null)}function ju(e){if(!Xc(e.i)&&!e.m){e.m=!0;var t=e.Na;Tl||Al(),Nl||(Tl(),Nl=!0),Il.add(t,e),e.C=0}}function Ru(e,t){var n;n=t?t.m:e.W++;const r=Tc(e.I);Pc(r,"SID",e.K),Pc(r,"RID",n),Pc(r,"AID",e.V),Du(e,r),e.o&&e.s&&Cu(r,e.o,e.s),n=new lc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ou(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Zc(e.i,n),fc(n,r,t)}function Du(e,t){e.na&&Za(e.na,function(e,n){Pc(t,n,e)}),e.h&&kc({},function(e,n){Pc(t,n,e)})}function Ou(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ba(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{su(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Lu(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Tl||Al(),Nl||(Tl(),Nl=!0),Il.add(t,e),e.A=0}}function Fu(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=$l(ba(e.Ma,e),zu(e,e.A)),e.A++,!0)}function Mu(e){null!=e.B&&(fa.clearTimeout(e.B),e.B=null)}function Uu(e){e.g=new lc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Tc(e.wa);Pc(t,"RID","rpc"),Pc(t,"SID",e.K),Pc(t,"AID",e.V),Pc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Pc(t,"TO",e.qa),Pc(t,"TYPE","xmlhttp"),Du(e,t),e.o&&e.s&&Cu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=jc(Tc(t)),n.u=null,n.S=!0,pc(n,e)}function Vu(e){null!=e.v&&(fa.clearTimeout(e.v),e.v=null)}function Bu(e,t){var n=null;if(e.g==t){Vu(e),Mu(e),e.g=null;var r=2}else{if(!Jc(e.i,t))return;n=t.F,eu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;wl(r=Hl(),new Xl(r,n)),ju(e)}else Lu(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!($c(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=$l(ba(e.Na,e,t),zu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qu(e,5);break;case 4:qu(e,10);break;case 3:qu(e,6);break;default:qu(e,2)}}function zu(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ba(e.pb,e);n||(n=new Cc("//www.google.com/images/cleardot.gif"),fa.location&&"http"==fa.location.protocol||Nc(n,"https"),jc(n)),function(e,t){const n=new Bl;if(fa.Image){const r=new Image;r.onload=xa(ou,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xa(ou,n,r,"TestLoadImage: error",!1,t),r.onabort=xa(ou,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xa(ou,n,r,"TestLoadImage: timeout",!1,t),fa.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Yl(2);e.H=0,e.h&&e.h.za(t),Wu(e),Pu(e)}function Wu(e){if(e.H=0,e.ma=[],e.h){const t=tu(e.i);0==t.length&&0==e.j.length||(Ca(e.ma,t),Ca(e.ma,e.j),e.i.i.length=0,_a(e.j),e.j.length=0),e.h.ya()}}function Hu(e,t,n){var r=n instanceof Cc?Tc(n):new Cc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ic(r,r.m);else{var i=fa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Cc(null);r&&Nc(s,r),t&&(s.g=t),i&&Ic(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Pc(r,n,t),Pc(r,"VER",e.ra),Du(e,r),r}function Ku(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pu(new au({ob:n})):new pu(e.va)).Oa(e.J),t}function Gu(){}function Qu(){if(La&&!(10<=Number(Ka)))throw Error("Environmental error: no available transport.")}function Yu(e,t){vl.call(this),this.g=new Nu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ia(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ia(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ju(this)}function Xu(e){sc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $u(){oc.call(this),this.status=1}function Ju(e){this.g=e}function Zu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ed(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function td(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ca=pu.prototype).Oa=function(e){this.M=e},ca.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rc.g(),this.C=this.u?tc(this.u):tc(rc),this.g.onreadystatechange=ba(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void vu(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=fa.FormData&&e instanceof fa.FormData,!(0<=ka(yu,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Eu(this),0<this.B&&((this.L=function(e){return La&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ba(this.ua,this)):this.A=Dl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){vu(this,s)}},ca.ua=function(){"undefined"!=typeof ha&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wl(this,"timeout"),this.abort(8))},ca.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wl(this,"complete"),wl(this,"abort"),xu(this))},ca.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xu(this,!0)),pu.$.N.call(this)},ca.La=function(){this.s||(this.G||this.v||this.l?bu(this):this.kb())},ca.kb=function(){bu(this)},ca.isActive=function(){return!!this.g},ca.da=function(){try{return 2<Su(this)?this.g.status:-1}catch(nu){return-1}},ca.ja=function(){try{return this.g?this.g.responseText:""}catch(nu){return""}},ca.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fu(t)}},ca.Ia=function(){return this.m},ca.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ca=Nu.prototype).ra=8,ca.H=1,ca.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new lc(this,this.l,e);let s=this.s;if(this.U&&(s?(s=el(s),nl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ou(this,i,t),Pc(n=Tc(this.I),"RID",e),Pc(n,"CVER",22),this.F&&Pc(n,"X-HTTP-Session-Id",this.F),Du(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(_u(s)))+"&"+t:this.o&&Cu(n,this.o,s)),Zc(this.i,i),this.bb&&Pc(n,"TYPE","init"),this.P?(Pc(n,"$req",t),Pc(n,"SID","null"),i.aa=!0,fc(i,n,null)):fc(i,n,t),this.H=2}}else 3==this.H&&(e?Ru(this,e):0==this.j.length||Xc(this.i)||Ru(this))},ca.Ma=function(){if(this.u=null,Uu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$l(ba(this.jb,this),e)}},ca.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yl(10),Au(this),Uu(this))},ca.ib=function(){null!=this.v&&(this.v=null,Au(this),Fu(this),Yl(19))},ca.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Yl(2)):(this.l.info("Failed to ping google.com"),Yl(1))},ca.isActive=function(){return!!this.h&&this.h.isActive(this)},(ca=Gu.prototype).Ba=function(){},ca.Aa=function(){},ca.za=function(){},ca.ya=function(){},ca.isActive=function(){return!0},ca.Va=function(){},Qu.prototype.g=function(e,t){return new Yu(e,t)},Ea(Yu,vl),Yu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Yl(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hu(e,null,e.Y),ju(e)},Yu.prototype.close=function(){Iu(this.g)},Yu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=xl(e),e=n);t.j.push(new Gc(t.fb++,e)),3==t.H&&ju(t)},Yu.prototype.N=function(){this.g.h=null,delete this.j,Iu(this.g),delete this.g,Yu.$.N.call(this)},Ea(Xu,sc),Ea($u,oc),Ea(Ju,Gu),Ju.prototype.Ba=function(){wl(this.g,"a")},Ju.prototype.Aa=function(e){wl(this.g,new Xu(e))},Ju.prototype.za=function(e){wl(this.g,new $u)},Ju.prototype.ya=function(){wl(this.g,"b")},Ea(Zu,function(){this.blockSize=-1}),Zu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)ed(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){ed(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){ed(this,r),i=0;break}}this.h=i,this.i+=t},Zu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var nd={};function rd(e){return-128<=e&&128>e?function(e,t){var n=nd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new td([0|e],0>e?-1:0)}):new td([0|e],0>e?-1:0)}function id(e){if(isNaN(e)||!isFinite(e))return od;if(0>e)return dd(id(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sd;return new td(t,0)}var sd=4294967296,od=rd(0),ad=rd(1),ld=rd(16777216);function cd(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ud(e){return-1==e.h}function dd(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new td(n,~e.h).add(ad)}function hd(e,t){return e.add(dd(t))}function fd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pd(e,t){this.g=e,this.h=t}function md(e,t){if(cd(t))throw Error("division by zero");if(cd(e))return new pd(od,od);if(ud(e))return t=md(dd(e),t),new pd(dd(t.g),dd(t.h));if(ud(t))return t=md(e,dd(t)),new pd(dd(t.g),t.h);if(30<e.g.length){if(ud(e)||ud(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ad,r=t;0>=r.X(e);)n=gd(n),r=gd(r);var i=yd(n,1),s=yd(r,1);for(r=yd(r,2),n=yd(n,2);!cd(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=yd(r,1),n=yd(n,1)}return t=hd(e,i.R(t)),new pd(i,t)}for(i=od;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=id(n)).R(t);ud(o)||0<o.X(e);)o=(s=id(n-=r)).R(t);cd(s)&&(s=ad),i=i.add(s),e=hd(e,o)}return new pd(i,e)}function gd(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new td(n,e.h)}function yd(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new td(i,e.h)}(ca=td.prototype).ea=function(){if(ud(this))return-dd(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sd+r)*t,t*=sd}return e},ca.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(cd(this))return"0";if(ud(this))return"-"+dd(this).toString(e);for(var t=id(Math.pow(e,6)),n=this,r="";;){var i=md(n,t).g,s=((0<(n=hd(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(cd(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ca.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ca.X=function(e){return ud(e=hd(this,e))?-1:cd(e)?0:1},ca.abs=function(){return ud(this)?dd(this):this},ca.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new td(n,-2147483648&n[n.length-1]?-1:0)},ca.R=function(e){if(cd(this)||cd(e))return od;if(ud(this))return ud(e)?dd(this).R(dd(e)):dd(dd(this).R(e));if(ud(e))return dd(this.R(dd(e)));if(0>this.X(ld)&&0>e.X(ld))return id(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,fd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,fd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,fd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,fd(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new td(n,0)},ca.gb=function(e){return md(this,e).h},ca.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new td(n,this.h&e.h)},ca.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new td(n,this.h|e.h)},ca.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new td(n,this.h^e.h)},Qu.prototype.createWebChannel=Qu.prototype.g,Yu.prototype.send=Yu.prototype.u,Yu.prototype.open=Yu.prototype.m,Yu.prototype.close=Yu.prototype.close,Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,Zl.COMPLETE="complete",nc.EventType=ic,ic.OPEN="a",ic.CLOSE="b",ic.ERROR="c",ic.MESSAGE="d",vl.prototype.listen=vl.prototype.O,pu.prototype.listenOnce=pu.prototype.P,pu.prototype.getLastError=pu.prototype.Sa,pu.prototype.getLastErrorCode=pu.prototype.Ia,pu.prototype.getStatus=pu.prototype.da,pu.prototype.getResponseJson=pu.prototype.Wa,pu.prototype.getResponseText=pu.prototype.ja,pu.prototype.send=pu.prototype.ha,pu.prototype.setWithCredentials=pu.prototype.Oa,Zu.prototype.digest=Zu.prototype.l,Zu.prototype.reset=Zu.prototype.reset,Zu.prototype.update=Zu.prototype.j,td.prototype.add=td.prototype.add,td.prototype.multiply=td.prototype.R,td.prototype.modulo=td.prototype.gb,td.prototype.compare=td.prototype.X,td.prototype.toNumber=td.prototype.ea,td.prototype.toString=td.prototype.toString,td.prototype.getBits=td.prototype.D,td.fromNumber=id,td.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return dd(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=id(Math.pow(n,8)),i=od,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=id(Math.pow(n,o)),i=i.R(o).add(id(a))):i=(i=i.R(r)).add(id(a))}return i};var vd=da.createWebChannelTransport=function(){return new Qu},wd=da.getStatEventTarget=function(){return Hl()},bd=da.ErrorCode=Jl,xd=da.EventType=Zl,Ed=da.Event=ql,Sd=da.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kd=da.FetchXmlHttpFactory=au,_d=da.WebChannel=nc,Cd=da.XhrIo=pu,Td=da.Md5=Zu,Nd=da.Integer=td;const Id="@firebase/firestore";class Ad{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ad.UNAUTHENTICATED=new Ad(null),Ad.GOOGLE_CREDENTIALS=new Ad("google-credentials-uid"),Ad.FIRST_PARTY=new Ad("first-party-uid"),Ad.MOCK_USER=new Ad("mock-user");let Pd="10.11.1";const jd=new Tn("@firebase/firestore");function Rd(){return jd.logLevel}function Dd(e){if(jd.logLevel<=En.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fd);jd.debug("Firestore (".concat(Pd,"): ").concat(e),...i)}}function Od(e){if(jd.logLevel<=En.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fd);jd.error("Firestore (".concat(Pd,"): ").concat(e),...i)}}function Ld(e){if(jd.logLevel<=En.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fd);jd.warn("Firestore (".concat(Pd,"): ").concat(e),...i)}}function Fd(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Pd,") INTERNAL ASSERTION FAILED: ")+e;throw Od(t),new Error(t)}function Ud(e,t){e||Md()}function Vd(e,t){return e}const Bd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zd extends on{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class qd{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Hd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ad.UNAUTHENTICATED))}shutdown(){}}class Kd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Gd{constructor(e){this.t=e,this.currentUser=Ad.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new qd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qd,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Dd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Dd("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qd)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Dd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ud("string"==typeof t.accessToken),new Wd(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ud(null===e||"string"==typeof e),new Ad(e)}}class Qd{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ad.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yd{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Qd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ad.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $d{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Dd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Dd("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Dd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Dd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ud("string"==typeof e.token),this.R=e.token,new Xd(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Zd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function eh(e,t){return e<t?-1:e>t?1:0}function th(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class nh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zd(Bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zd(Bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zd(Bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zd(Bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nh.fromMillis(Date.now())}static fromDate(e){return nh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?eh(this.nanoseconds,e.nanoseconds):eh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rh(e)}static min(){return new rh(new nh(0,0))}static max(){return new rh(new nh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ih{constructor(e,t,n){void 0===t?t=0:t>e.length&&Md(),void 0===n?n=e.length-t:n>e.length-t&&Md(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ih?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sh extends ih{construct(e,t,n){return new sh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new zd(Bd.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new sh(e)}static emptyPath(){return new sh([])}}const oh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ah extends ih{construct(e,t,n){return new ah(e,t,n)}static isValidIdentifier(e){return oh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ah.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ah(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new zd(Bd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zd(Bd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zd(Bd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new zd(Bd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ah(t)}static emptyPath(){return new ah([])}}class lh{constructor(e){this.path=e}static fromPath(e){return new lh(sh.fromString(e))}static fromName(e){return new lh(sh.fromString(e).popFirst(5))}static empty(){return new lh(sh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lh(new sh(e.slice()))}}class ch{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ch.UNKNOWN_ID=-1;function uh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rh.fromTimestamp(1e9===r?new nh(n+1,0):new nh(n,r));return new hh(i,lh.empty(),t)}function dh(e){return new hh(e.readTime,e.key,-1)}class hh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new hh(rh.min(),lh.empty(),-1)}static max(){return new hh(rh.max(),lh.empty(),-1)}}function fh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=lh.comparator(e.documentKey,t.documentKey),0!==n?n:eh(e.largestBatchId,t.largestBatchId))}const ph="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function gh(e){if(e.code!==Bd.FAILED_PRECONDITION||e.message!==ph)throw e;Dd("LocalStore","Unexpectedly lost primary lease")}class yh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Md(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new yh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof yh?t:yh.resolve(t)}catch(e){return yh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):yh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):yh.reject(t)}static resolve(e){return new yh((t,n)=>{t(e)})}static reject(e){return new yh((t,n)=>{n(e)})}static waitFor(e){return new yh((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=yh.resolve(!1);for(const n of e)t=t.next(e=>e?yh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new yh((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new yh((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function vh(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wh(e){return"IndexedDbTransactionError"===e.name}class bh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function xh(e){return null==e}function Eh(e){return 0===e&&1/e==-1/0}function Sh(e){return"number"==typeof e&&Number.isInteger(e)&&!Eh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}bh.oe=-1;const kh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_h=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ch=_h;function Th(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ih(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ah{constructor(e,t){this.comparator=e,this.root=t||jh.EMPTY}insert(e,t){return new Ah(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jh.BLACK,null,null))}remove(e){return new Ah(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jh.RED,this.left=null!=r?r:jh.EMPTY,this.right=null!=i?i:jh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new jh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Md();if(this.right.isRed())throw Md();const e=this.left.check();if(e!==this.right.check())throw Md();return e+(this.isRed()?0:1)}}jh.EMPTY=null,jh.RED=!0,jh.BLACK=!1,jh.EMPTY=new class{constructor(){this.size=0}get key(){throw Md()}get value(){throw Md()}get color(){throw Md()}get left(){throw Md()}get right(){throw Md()}copy(e,t,n,r,i){return this}insert(e,t,n){return new jh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rh{constructor(e){this.comparator=e,this.data=new Ah(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dh(this.data.getIterator())}getIteratorFrom(e){return new Dh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Rh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rh(this.comparator);return t.data=e,t}}class Dh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oh{constructor(e){this.fields=e,e.sort(ah.comparator)}static empty(){return new Oh([])}unionWith(e){let t=new Rh(ah.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Oh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return th(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Lh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Lh("Invalid base64 string: "+e):e}}(e);return new Fh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Fh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return eh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fh.EMPTY_BYTE_STRING=new Fh("");const Mh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uh(e){if(Ud(!!e),"string"==typeof e){let t=0;const n=Mh.exec(e);if(Ud(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vh(e.seconds),nanos:Vh(e.nanos)}}function Vh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bh(e){return"string"==typeof e?Fh.fromBase64String(e):Fh.fromUint8Array(e)}function zh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qh(e){const t=e.mapValue.fields.__previous_value__;return zh(t)?qh(t):t}function Wh(e){const t=Uh(e.mapValue.fields.__local_write_time__.timestampValue);return new nh(t.seconds,t.nanos)}class Hh{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Kh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kh&&e.projectId===this.projectId&&e.database===this.database}}const Gh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zh(e)?4:cf(e)?9007199254740991:10:Md()}function Yh(e,t){if(e===t)return!0;const n=Qh(e);if(n!==Qh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wh(e).isEqual(Wh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Uh(e.timestampValue),r=Uh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bh(e.bytesValue).isEqual(Bh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vh(e.geoPointValue.latitude)===Vh(t.geoPointValue.latitude)&&Vh(e.geoPointValue.longitude)===Vh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vh(e.integerValue)===Vh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Vh(e.doubleValue),r=Vh(t.doubleValue);return n===r?Eh(n)===Eh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return th(e.arrayValue.values||[],t.arrayValue.values||[],Yh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Th(n)!==Th(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yh(n[i],r[i])))return!1;return!0}(e,t);default:return Md()}}function Xh(e,t){return void 0!==(e.values||[]).find(e=>Yh(e,t))}function $h(e,t){if(e===t)return 0;const n=Qh(e),r=Qh(t);if(n!==r)return eh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return eh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Vh(e.integerValue||e.doubleValue),r=Vh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jh(e.timestampValue,t.timestampValue);case 4:return Jh(Wh(e),Wh(t));case 5:return eh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bh(e),r=Bh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=eh(n[i],r[i]);if(0!==e)return e}return eh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=eh(Vh(e.latitude),Vh(t.latitude));return 0!==n?n:eh(Vh(e.longitude),Vh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$h(n[i],r[i]);if(e)return e}return eh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gh.mapValue&&t===Gh.mapValue)return 0;if(e===Gh.mapValue)return 1;if(t===Gh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=eh(r[o],s[o]);if(0!==e)return e;const t=$h(n[r[o]],i[s[o]]);if(0!==t)return t}return eh(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Md()}}function Jh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return eh(e,t);const n=Uh(e),r=Uh(t),i=eh(n.seconds,r.seconds);return 0!==i?i:eh(n.nanos,r.nanos)}function Zh(e){return ef(e)}function ef(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Uh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Bh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return lh.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ef(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ef(e.fields[i]));return n+"}"}(e.mapValue):Md()}function tf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nf(e){return!!e&&"integerValue"in e}function rf(e){return!!e&&"arrayValue"in e}function sf(e){return!!e&&"nullValue"in e}function of(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function af(e){return!!e&&"mapValue"in e}function lf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nh(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=lf(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lf(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class uf{constructor(e){this.value=e}static empty(){return new uf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lf(t)}setAll(e){let t=ah.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=lf(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];af(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Nh(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new uf(lf(this.value))}}function df(e){const t=[];return Nh(e.fields,(e,n)=>{const r=new ah([e]);if(af(n)){const e=df(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Oh(t)}class hf{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new hf(e,0,rh.min(),rh.min(),rh.min(),uf.empty(),0)}static newFoundDocument(e,t,n,r){return new hf(e,1,t,rh.min(),n,r,0)}static newNoDocument(e,t){return new hf(e,2,t,rh.min(),rh.min(),uf.empty(),0)}static newUnknownDocument(e,t){return new hf(e,3,t,rh.min(),rh.min(),uf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=uf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=uf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ff{constructor(e,t){this.position=e,this.inclusive=t}}function pf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?lh.comparator(lh.fromName(o.referenceValue),n.key):$h(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function mf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yh(e.position[n],t.position[n]))return!1;return!0}class gf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function yf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class vf{}class wf extends vf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Tf(e,t,n):"array-contains"===t?new Pf(e,n):"in"===t?new jf(e,n):"not-in"===t?new Rf(e,n):"array-contains-any"===t?new Df(e,n):new wf(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nf(e,n):new If(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($h(t,this.value)):null!==t&&Qh(this.value)===Qh(t)&&this.matchesComparison($h(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Md()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bf extends vf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new bf(e,t)}matches(e){return xf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xf(e){return"and"===e.op}function Ef(e){return Sf(e)&&xf(e)}function Sf(e){for(const t of e.filters)if(t instanceof bf)return!1;return!0}function kf(e){if(e instanceof wf)return e.field.canonicalString()+e.op.toString()+Zh(e.value);if(Ef(e))return e.filters.map(e=>kf(e)).join(",");{const t=e.filters.map(e=>kf(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function _f(e,t){return e instanceof wf?function(e,t){return t instanceof wf&&e.op===t.op&&e.field.isEqual(t.field)&&Yh(e.value,t.value)}(e,t):e instanceof bf?function(e,t){return t instanceof bf&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&_f(n,t.filters[r]),!0)}(e,t):void Md()}function Cf(e){return e instanceof wf?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zh(e.value))}(e):e instanceof bf?function(e){return e.op.toString()+" {"+e.getFilters().map(Cf).join(" ,")+"}"}(e):"Filter"}class Tf extends wf{constructor(e,t,n){super(e,t,n),this.key=lh.fromName(n.referenceValue)}matches(e){const t=lh.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nf extends wf{constructor(e,t){super(e,"in",t),this.keys=Af("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class If extends wf{constructor(e,t){super(e,"not-in",t),this.keys=Af("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Af(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>lh.fromName(e.referenceValue))}class Pf extends wf{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rf(t)&&Xh(t.arrayValue,this.value)}}class jf extends wf{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xh(this.value.arrayValue,t)}}class Rf extends wf{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xh(this.value.arrayValue,t)}}class Df extends wf{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xh(this.value.arrayValue,e))}}class Of{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Lf(e){return new Of(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ff(e){const t=Vd(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>kf(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),xh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Zh(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Zh(e)).join(",")),t.ue=e}return t.ue}function Mf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_f(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mf(e.startAt,t.startAt)&&mf(e.endAt,t.endAt)}function Uf(e){return lh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Vf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Bf(e,t,n,r,i,s,o,a){return new Vf(e,t,n,r,i,s,o,a)}function zf(e){return new Vf(e)}function qf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wf(e){return null!==e.collectionGroup}function Hf(e){const t=Vd(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Rh(ah.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new gf(r,n))}),e.has(ah.keyField().canonicalString())||t.ce.push(new gf(ah.keyField(),n))}return t.ce}function Kf(e){const t=Vd(e);return t.le||(t.le=Gf(t,Hf(e))),t.le}function Gf(e,t){if("F"===e.limitType)return Lf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new gf(e.field,t)});const n=e.endAt?new ff(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ff(e.startAt.position,e.startAt.inclusive):null;return Lf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Qf(e,t){const n=e.filters.concat([t]);return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yf(e,t,n){return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xf(e,t){return Mf(Kf(e),Kf(t))&&e.limitType===t.limitType}function $f(e){return"".concat(Ff(Kf(e)),"|lt:").concat(e.limitType)}function Jf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Cf(e)).join(", "),"]")),xh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Zh(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Zh(e)).join(",")),"Target(".concat(t,")")}(Kf(e)),"; limitType=").concat(e.limitType,")")}function Zf(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Hf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=pf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Hf(e),t))&&!(e.endAt&&!function(e,t,n){const r=pf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Hf(e),t))}(e,t)}function ep(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tp(e){return(t,n)=>{let r=!1;for(const i of Hf(e)){const e=np(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function np(e,t,n){const r=e.field.isKeyField()?lh.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$h(r,i):Md()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Md()}}class rp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Nh(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ih(this.inner)}size(){return this.innerSize}}const ip=new Ah(lh.comparator);function sp(){return ip}const op=new Ah(lh.comparator);function ap(){let e=op;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function lp(e){let t=op;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function cp(){return dp()}function up(){return dp()}function dp(){return new rp(e=>e.toString(),(e,t)=>e.isEqual(t))}const hp=new Ah(lh.comparator),fp=new Rh(lh.comparator);function pp(){let e=fp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const mp=new Rh(eh);function gp(){return mp}function yp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(t)?"-0":t}}function vp(e){return{integerValue:""+e}}function wp(e,t){return Sh(t)?vp(t):yp(e,t)}class bp{constructor(){this._=void 0}}function xp(e,t,n){return e instanceof kp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zh(t)&&(t=qh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _p?Cp(e,t):e instanceof Tp?Np(e,t):function(e,t){const n=Sp(e,t),r=Ap(n)+Ap(e.Pe);return nf(n)&&nf(e.Pe)?vp(r):yp(e.serializer,r)}(e,t)}function Ep(e,t,n){return e instanceof _p?Cp(e,t):e instanceof Tp?Np(e,t):n}function Sp(e,t){return e instanceof Ip?function(e){return nf(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class kp extends bp{}class _p extends bp{constructor(e){super(),this.elements=e}}function Cp(e,t){const n=Pp(t);for(const r of e.elements)n.some(e=>Yh(e,r))||n.push(r);return{arrayValue:{values:n}}}class Tp extends bp{constructor(e){super(),this.elements=e}}function Np(e,t){let n=Pp(t);for(const r of e.elements)n=n.filter(e=>!Yh(e,r));return{arrayValue:{values:n}}}class Ip extends bp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ap(e){return Vh(e.integerValue||e.doubleValue)}function Pp(e){return rf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class jp{constructor(e,t){this.field=e,this.transform=t}}class Rp{constructor(e,t){this.version=e,this.transformResults=t}}class Dp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dp}static exists(e){return new Dp(void 0,e)}static updateTime(e){return new Dp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Op(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Lp{}function Fp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gp(e.key,Dp.none()):new zp(e.key,e.data,Dp.none());{const n=e.data,r=uf.empty();let i=new Rh(ah.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new qp(e.key,r,new Oh(i.toArray()),Dp.none())}}function Mp(e,t,n){e instanceof zp?function(e,t,n){const r=e.value.clone(),i=Hp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qp?function(e,t,n){if(!Op(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Hp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wp(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Up(e,t,n,r){return e instanceof zp?function(e,t,n,r){if(!Op(e.precondition,t))return n;const i=e.value.clone(),s=Kp(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qp?function(e,t,n,r){if(!Op(e.precondition,t))return n;const i=Kp(e.fieldTransforms,r,t),s=t.data;return s.setAll(Wp(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Op(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Sp(r.transform,e||null);null!=i&&(null===n&&(n=uf.empty()),n.set(r.field,i))}return n||null}function Bp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&th(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _p&&t instanceof _p||e instanceof Tp&&t instanceof Tp?th(e.elements,t.elements,Yh):e instanceof Ip&&t instanceof Ip?Yh(e.Pe,t.Pe):e instanceof kp&&t instanceof kp}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zp extends Lp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qp extends Lp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Hp(e,t,n){const r=new Map;Ud(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ep(o,a,n[i]))}return r}function Kp(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,xp(e,s,t))}return r}class Gp extends Lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qp extends Lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Mp(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Up(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Up(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=up();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Fp(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(rh.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pp())}isEqual(e){return this.batchId===e.batchId&&th(this.mutations,e.mutations,(e,t)=>Bp(e,t))&&th(this.baseMutations,e.baseMutations,(e,t)=>Bp(e,t))}}class Xp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ud(e.mutations.length===n.length);let r=hp;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xp(e,t,n,r)}}class $p{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Jp{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zp,em;function tm(e){switch(e){default:return Md();case Bd.CANCELLED:case Bd.UNKNOWN:case Bd.DEADLINE_EXCEEDED:case Bd.RESOURCE_EXHAUSTED:case Bd.INTERNAL:case Bd.UNAVAILABLE:case Bd.UNAUTHENTICATED:return!1;case Bd.INVALID_ARGUMENT:case Bd.NOT_FOUND:case Bd.ALREADY_EXISTS:case Bd.PERMISSION_DENIED:case Bd.FAILED_PRECONDITION:case Bd.ABORTED:case Bd.OUT_OF_RANGE:case Bd.UNIMPLEMENTED:case Bd.DATA_LOSS:return!0}}function nm(e){if(void 0===e)return Od("GRPC error has no .code"),Bd.UNKNOWN;switch(e){case Zp.OK:return Bd.OK;case Zp.CANCELLED:return Bd.CANCELLED;case Zp.UNKNOWN:return Bd.UNKNOWN;case Zp.DEADLINE_EXCEEDED:return Bd.DEADLINE_EXCEEDED;case Zp.RESOURCE_EXHAUSTED:return Bd.RESOURCE_EXHAUSTED;case Zp.INTERNAL:return Bd.INTERNAL;case Zp.UNAVAILABLE:return Bd.UNAVAILABLE;case Zp.UNAUTHENTICATED:return Bd.UNAUTHENTICATED;case Zp.INVALID_ARGUMENT:return Bd.INVALID_ARGUMENT;case Zp.NOT_FOUND:return Bd.NOT_FOUND;case Zp.ALREADY_EXISTS:return Bd.ALREADY_EXISTS;case Zp.PERMISSION_DENIED:return Bd.PERMISSION_DENIED;case Zp.FAILED_PRECONDITION:return Bd.FAILED_PRECONDITION;case Zp.ABORTED:return Bd.ABORTED;case Zp.OUT_OF_RANGE:return Bd.OUT_OF_RANGE;case Zp.UNIMPLEMENTED:return Bd.UNIMPLEMENTED;case Zp.DATA_LOSS:return Bd.DATA_LOSS;default:return Md()}}(em=Zp||(Zp={}))[em.OK=0]="OK",em[em.CANCELLED=1]="CANCELLED",em[em.UNKNOWN=2]="UNKNOWN",em[em.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",em[em.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",em[em.NOT_FOUND=5]="NOT_FOUND",em[em.ALREADY_EXISTS=6]="ALREADY_EXISTS",em[em.PERMISSION_DENIED=7]="PERMISSION_DENIED",em[em.UNAUTHENTICATED=16]="UNAUTHENTICATED",em[em.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",em[em.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",em[em.ABORTED=10]="ABORTED",em[em.OUT_OF_RANGE=11]="OUT_OF_RANGE",em[em.UNIMPLEMENTED=12]="UNIMPLEMENTED",em[em.INTERNAL=13]="INTERNAL",em[em.UNAVAILABLE=14]="UNAVAILABLE",em[em.DATA_LOSS=15]="DATA_LOSS";let rm=null;function im(){return new TextEncoder}const sm=new Nd([4294967295,4294967295],0);function om(e){const t=im().encode(e),n=new Td;return n.update(t),new Uint8Array(n.digest())}function am(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Nd([n,r],0),new Nd([i,s],0)]}class lm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cm("Invalid padding: ".concat(t));if(n<0)throw new cm("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new cm("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new cm("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Nd.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Nd.fromNumber(n)));return 1===r.compare(sm)&&(r=new Nd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=om(e),[n,r]=am(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new lm(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=om(e),[n,r]=am(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class um{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,dm.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new um(rh.min(),r,new Ah(eh),sp(),pp())}}class dm{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new dm(n,t,pp(),pp(),pp())}}class hm{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class fm{constructor(e,t){this.targetId=e,this.me=t}}class pm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class mm{constructor(){this.fe=0,this.ge=vm(),this.pe=Fh.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pp(),t=pp(),n=pp();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Md()}}),new dm(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=vm()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ud(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gm{constructor(e){this.Le=e,this.Be=new Map,this.ke=sp(),this.qe=ym(),this.Qe=new Ah(eh)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Md()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Uf(i))if(0===n){const e=new lh(i.path);this.Ue(t,e,hf.newNoDocument(e,rh.min()))}else Ud(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==rm||rm.et(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Bh(n).toUint8Array()}catch(e){if(e instanceof Lh)return Ld("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new lm(s,r,i)}catch(e){return Ld(e instanceof cm?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Uf(i.target)){const t=new lh(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,hf.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}});let n=pp();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new um(e,t,this.Qe,this.ke,n);return this.ke=sp(),this.qe=ym(),this.Qe=new Ah(eh),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new mm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rh(eh),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Dd("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ym(){return new Ah(lh.comparator)}function vm(){return new Ah(lh.comparator)}const wm={asc:"ASCENDING",desc:"DESCENDING"},bm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xm={and:"AND",or:"OR"};class Em{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sm(e,t){return e.useProto3Json||xh(t)?t:{value:t}}function km(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function _m(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Cm(e,t){return km(e,t.toTimestamp())}function Tm(e){return Ud(!!e),rh.fromTimestamp(function(e){const t=Uh(e);return new nh(t.seconds,t.nanos)}(e))}function Nm(e,t){return Im(e,t).canonicalString()}function Im(e,t){const n=function(e){return new sh(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Am(e){const t=sh.fromString(e);return Ud(Xm(t)),t}function Pm(e,t){return Nm(e.databaseId,t.path)}function jm(e,t){const n=Am(t);if(n.get(1)!==e.databaseId.projectId)throw new zd(Bd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zd(Bd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lh(Lm(n))}function Rm(e,t){return Nm(e.databaseId,t)}function Dm(e){const t=Am(e);return 4===t.length?sh.emptyPath():Lm(t)}function Om(e){return new sh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lm(e){return Ud(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fm(e,t,n){return{name:Pm(e,t),fields:n.value.mapValue.fields}}function Mm(e,t){let n;if(t instanceof zp)n={update:Fm(e,t.key,t.value)};else if(t instanceof Gp)n={delete:Pm(e,t.key)};else if(t instanceof qp)n={update:Fm(e,t.key,t.data),updateMask:Ym(t.fieldMask)};else{if(!(t instanceof Qp))return Md();n={verify:Pm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof kp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _p)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ip)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Md()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Md()}(e,t.precondition)),n}function Um(e,t){return{documents:[Rm(e,t.path)]}}function Vm(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rm(e,i);const s=function(e){if(0!==e.length)return Qm(bf.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Km(e.field),direction:qm(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sm(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Bm(e){let t=Dm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ud(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=zm(e);return t instanceof bf&&Ef(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new gf(Gm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,xh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ff(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ff(n,t)}(n.endAt)),Bf(t,i,o,s,a,"F",l,c)}function zm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gm(e.unaryFilter.field);return wf.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gm(e.unaryFilter.field);return wf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gm(e.unaryFilter.field);return wf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gm(e.unaryFilter.field);return wf.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Md()}}(e):void 0!==e.fieldFilter?function(e){return wf.create(Gm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Md()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return bf.create(e.compositeFilter.filters.map(e=>zm(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Md()}}(e.compositeFilter.op))}(e):Md()}function qm(e){return wm[e]}function Wm(e){return bm[e]}function Hm(e){return xm[e]}function Km(e){return{fieldPath:e.canonicalString()}}function Gm(e){return ah.fromServerFormat(e.fieldPath)}function Qm(e){return e instanceof wf?function(e){if("=="===e.op){if(of(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NAN"}};if(sf(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(of(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NOT_NAN"}};if(sf(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Km(e.field),op:Wm(e.op),value:e.value}}}(e):e instanceof bf?function(e){const t=e.getFilters().map(e=>Qm(e));return 1===t.length?t[0]:{compositeFilter:{op:Hm(e.op),filters:t}}}(e):Md()}function Ym(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $m{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rh.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rh.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new $m(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $m(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $m(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $m(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jm{constructor(e){this.ut=e}}function Zm(e){const t=Bm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yf(t,t.limit,"L"):t}class eg{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Vh(e.integerValue));else if("doubleValue"in e){const n=Vh(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Eh(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=Uh(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Bh(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?cf(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Md()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),lh.fromName(e).path.forEach(e=>{this.Tt(t,60),this.wt(e,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}eg.St=new eg;class tg{constructor(){this.on=new ng}addToCollectionParentIndex(e,t){return this.on.add(t),yh.resolve()}getCollectionParents(e,t){return yh.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return yh.resolve()}deleteFieldIndex(e,t){return yh.resolve()}deleteAllFieldIndexes(e){return yh.resolve()}createTargetIndexes(e,t){return yh.resolve()}getDocumentsMatchingTarget(e,t){return yh.resolve(null)}getIndexType(e,t){return yh.resolve(0)}getFieldIndexes(e,t){return yh.resolve([])}getNextCollectionGroupToUpdate(e){return yh.resolve(null)}getMinOffset(e,t){return yh.resolve(hh.min())}getMinOffsetFromCollectionGroup(e,t){return yh.resolve(hh.min())}updateCollectionGroup(e,t,n){return yh.resolve()}updateIndexEntries(e,t){return yh.resolve()}}class ng{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rh(sh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Rh(sh.comparator)).toArray()}}new Uint8Array(0);class rg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rg(e,rg.DEFAULT_COLLECTION_PERCENTILE,rg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}rg.DEFAULT_COLLECTION_PERCENTILE=10,rg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rg.DEFAULT=new rg(41943040,rg.DEFAULT_COLLECTION_PERCENTILE,rg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rg.DISABLED=new rg(-1,0,0);class ig{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ig(0)}static Nn(){return new ig(-1)}}class sg{constructor(){this.changes=new rp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?yh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class og{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ag{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Up(n.mutation,e,Oh.empty(),nh.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,pp()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pp();const r=cp();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ap();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=cp();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,pp()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=sp();const s=dp(),o=dp();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Up(o.mutation,t,o.mutation.getFieldMask(),nh.now())):s.set(t.key,Oh.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new og(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=dp();let r=new Ah((e,t)=>e-t),i=pp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Oh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||pp()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=up();l.forEach(e=>{if(!i.has(e)){const r=Fp(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return yh.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return lh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):yh.resolve(cp());let o=-1,a=i;return s.next(t=>yh.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?yh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,pp())).next(e=>({batchId:o,changes:lp(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lh(t)).next(e=>{let t=ap();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ap();return this.indexManager.getCollectionParents(e,i).next(o=>yh.forEach(o,o=>{const a=function(e,t){return new Vf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,hf.newInvalidDocument(r)))});let n=ap();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Up(s.mutation,r,Oh.empty(),nh.now()),Zf(t,r)&&(n=n.insert(e,r))}),n})}}class lg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return yh.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tm(e.createTime)}}(t)),yh.resolve()}getNamedQuery(e,t){return yh.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Zm(e.bundledQuery),readTime:Tm(e.readTime)}}(t)),yh.resolve()}}class cg{constructor(){this.overlays=new Ah(lh.comparator),this.lr=new Map}getOverlay(e,t){return yh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=cp();return yh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.lt(e,t,r)}),yh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.lr.delete(n)),yh.resolve()}getOverlaysForCollection(e,t,n){const r=cp(),i=t.length+1,s=new lh(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return yh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ah((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=cp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=cp(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return yh.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $p(t,n));let i=this.lr.get(t);void 0===i&&(i=pp(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class ug{constructor(){this.hr=new Rh(dg.Pr),this.Ir=new Rh(dg.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new dg(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.dr(new dg(e,t))}Ar(e,t){e.forEach(e=>this.removeReference(e,t))}Rr(e){const t=new lh(new sh([])),n=new dg(t,e),r=new dg(t,e+1),i=[];return this.Ir.forEachInRange([n,r],e=>{this.dr(e),i.push(e.key)}),i}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new lh(new sh([])),n=new dg(t,e),r=new dg(t,e+1);let i=pp();return this.Ir.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new dg(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dg{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return lh.comparator(e.key,t.key)||eh(e.gr,t.gr)}static Tr(e,t){return eh(e.gr,t.gr)||lh.comparator(e.key,t.key)}}class hg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Rh(dg.Pr)}checkEmpty(e){return yh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Yp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new dg(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return yh.resolve(s)}lookupMutationBatch(e,t){return yh.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return yh.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return yh.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return yh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dg(t,0),r=new dg(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],e=>{const t=this.wr(e.gr);i.push(t)}),yh.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Rh(eh);return t.forEach(e=>{const t=new dg(e,0),r=new dg(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],e=>{n=n.add(e.gr)})}),yh.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;lh.isDocumentKey(i)||(i=i.child(""));const s=new dg(new lh(i),0);let o=new Rh(eh);return this.yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)},s),yh.resolve(this.br(o))}br(e){const t=[];return e.forEach(e=>{const n=this.wr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ud(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return yh.forEach(t.mutations,r=>{const i=new dg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=n})}Fn(e){}containsKey(e,t){const n=new dg(t,0),r=this.yr.firstAfterOrEqual(n);return yh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,yh.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fg{constructor(e){this.Cr=e,this.docs=new Ah(lh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return yh.resolve(n?n.document.mutableCopy():hf.newInvalidDocument(t))}getEntries(e,t){let n=sp();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():hf.newInvalidDocument(e))}),yh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=sp();const s=t.path,o=new lh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fh(dh(o),n)<=0||(r.has(o.key)||Zf(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return yh.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Md()}vr(e,t){return yh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new pg(this)}getSize(e){return yh.resolve(this.size)}}class pg extends sg{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)}),yh.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class mg{constructor(e){this.persistence=e,this.Fr=new rp(e=>Ff(e),Mf),this.lastRemoteSnapshotVersion=rh.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ug,this.targetCount=0,this.Nr=ig.On()}forEachTarget(e,t){return this.Fr.forEach((e,n)=>t(n)),yh.resolve()}getLastRemoteSnapshotVersion(e){return yh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return yh.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),yh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),yh.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new ig(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,yh.resolve()}updateTargetData(e,t){return this.kn(t),yh.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,yh.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),yh.waitFor(i).next(()=>r)}getTargetCount(e){return yh.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return yh.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),yh.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),yh.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),yh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return yh.resolve(n)}containsKey(e,t){return yh.resolve(this.Or.containsKey(t))}}class gg{constructor(e,t){this.Lr={},this.overlays={},this.Br=new bh(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new mg(this),this.indexManager=new tg,this.remoteDocumentCache=function(e){return new fg(e)}(e=>this.referenceDelegate.Qr(e)),this.serializer=new Jm(t),this.Kr=new lg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new hg(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Dd("MemoryPersistence","Starting transaction:",e);const r=new yg(this.Br.next());return this.referenceDelegate.$r(),n(r).next(e=>this.referenceDelegate.Ur(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Wr(e,t){return yh.or(Object.values(this.Lr).map(n=>()=>n.containsKey(e,t)))}}class yg extends mh{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Gr=new ug,this.zr=null}static jr(e){return new vg(e)}get Hr(){if(this.zr)return this.zr;throw Md()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),yh.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),yh.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),yh.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(e=>this.Hr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Hr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yh.forEach(this.Hr,n=>{const r=lh.fromPath(n);return this.Jr(e,r).next(e=>{e||t.removeEntry(r,rh.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return yh.or([()=>yh.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class wg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=pp(),r=pp();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new wg(e,t.fromCache,n,r)}}class bg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xg{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=rn()?8:vh(nn())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ji(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new bg;return this.Hi(e,t,n).next(r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)})}).next(()=>i.result)}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Rd()<=En.DEBUG&&Dd("QueryEngine","SDK will not create cache indexes for query:",Jf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),yh.resolve()):(Rd()<=En.DEBUG&&Dd("QueryEngine","Query:",Jf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Rd()<=En.DEBUG&&Dd("QueryEngine","The SDK decides to create cache indexes for query:",Jf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kf(t))):yh.resolve())}zi(e,t){if(qf(t))return yh.resolve(null);let n=Kf(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Yf(t,null,"F"),n=Kf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=pp(...r);return this.Gi.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Yf(t,null,"F")):this.Xi(e,s,t,n)}))})))}ji(e,t,n,r){return qf(t)||r.isEqual(rh.min())?yh.resolve(null):this.Gi.getDocuments(e,n).next(i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?yh.resolve(null):(Rd()<=En.DEBUG&&Dd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jf(t)),this.Xi(e,s,t,uh(r,-1)).next(e=>e))})}Yi(e,t){let n=new Rh(tp(e));return t.forEach((t,r)=>{Zf(e,r)&&(n=n.add(r))}),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Rd()<=En.DEBUG&&Dd("QueryEngine","Using full collection scan to execute query:",Jf(t)),this.Gi.getDocumentsMatchingQuery(e,t,hh.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Eg{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Ah(eh),this.ns=new rp(e=>Ff(e),Mf),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ag(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function Sg(e,t,n,r){return new Eg(e,t,n,r)}async function kg(e,t){const n=Vd(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=pp();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({_s:e,removedBatchIds:i,addedBatchIds:s}))})})}function _g(e){const t=Vd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.qr.getLastRemoteSnapshotVersion(e))}function Cg(e,t,n){let r=pp(),i=pp();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=sp();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(rh.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Dd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{us:r,cs:i}})}function Tg(e,t){const n=Vd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ng(e,t){const n=Vd(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.qr.getTargetData(e,t).next(i=>i?(r=i,yh.resolve(r)):n.qr.allocateTargetId(e).next(i=>(r=new $m(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e})}async function Ig(e,t,n){const r=Vd(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!wh(e))throw e;Dd("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Ag(e,t,n){const r=Vd(e);let i=rh.min(),s=pp();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Vd(e),i=r.ns.get(n);return void 0!==i?yh.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Kf(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.es.getDocumentsMatchingQuery(e,t,n?i:rh.min(),n?s:pp())).next(e=>(Pg(r,ep(t),e),{documents:e,ls:s})))}function Pg(e,t,n){let r=e.rs.get(t)||rh.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.rs.set(t,r)}class jg{constructor(){this.activeTargetIds=gp()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rg{constructor(){this.eo=new jg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new jg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dg{ro(e){}shutdown(){}}class Og{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Dd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Dd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Lg=null;function Fg(){return null===Lg?Lg=268435456+Math.round(2147483648*Math.random()):Lg++,"0x"+Lg.toString(16)}const Mg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ug{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const Vg="WebChannelConnection";class Bg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const s=Fg(),o=this.Co(e,t.toUriEncodedString());Dd("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then(t=>(Dd("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Ld("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Co(e,t){const n=Mg[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=Fg();return new Promise((s,o)=>{const a=new Cd;a.setWithCredentials(!0),a.listenOnce(xd.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case bd.NO_ERROR:const t=a.getResponseJson();Dd(Vg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case bd.TIMEOUT:Dd(Vg,"RPC '".concat(e,"' ").concat(i," timed out")),o(new zd(Bd.DEADLINE_EXCEEDED,"Request time out"));break;case bd.HTTP_ERROR:const n=a.getStatus();if(Dd(Vg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bd).indexOf(t)>=0?t:Bd.UNKNOWN}(t.status);o(new zd(e,t.message))}else o(new zd(Bd.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zd(Bd.UNAVAILABLE,"Connection failed."));break;default:Md()}}finally{Dd(Vg,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Dd(Vg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}xo(e,t,n){const r=Fg(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vd(),o=wd(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new kd({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Dd(Vg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new Ug({co:t=>{h?Dd(Vg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Dd(Vg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,_d.EventType.OPEN,()=>{h||(Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())}),p(u,_d.EventType.CLOSE,()=>{h||(h=!0,Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())}),p(u,_d.EventType.ERROR,t=>{h||(h=!0,Ld(Vg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new zd(Bd.UNAVAILABLE,"The operation could not be completed")))}),p(u,_d.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Ud(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Zp[e];if(void 0!==t)return nm(t)}(t),i=o.message;void 0===n&&(n=Bd.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.fo(new zd(n,i)),u.close()}else Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}}),p(o,Ed.STAT_EVENT,t=>{t.stat===Sd.PROXY?Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sd.NOPROXY&&Dd(Vg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.mo()},0),f}}function zg(){return"undefined"!=typeof document?document:null}function qg(e){return new Em(e,!0)}class Wg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&Dd("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class Hg{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Wg(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===Bd.RESOURCE_EXHAUSTED?(Od(t.toString()),Od("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===Bd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)},t=>{e(()=>{const e=new zd(Bd.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)})})}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho(()=>{n(()=>this.listener.ho())}),this.stream.Io(()=>{n(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(e=>{n(()=>this.u_(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Xo(){this.state=5,this.Jo.Ko(async()=>{this.state=0,this.start()})}u_(e){return Dd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget(()=>this.zo===e?t():(Dd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kg extends Hg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Md()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ud(void 0===t||"string"==typeof t),Fh.fromBase64String(t||"")):(Ud(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Fh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Bd.UNKNOWN:nm(e.code);return new zd(t,e.message||"")}(o);n=new pm(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jm(e,r.document.name),s=Tm(r.document.updateTime),o=r.document.createTime?Tm(r.document.createTime):rh.min(),a=new uf({mapValue:{fields:r.document.fields}}),l=hf.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hm(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jm(e,r.document),s=r.readTime?Tm(r.readTime):rh.min(),o=hf.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hm([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jm(e,r.document),s=r.removedTargetIds||[];n=new hm([],s,i,null)}else{if(!("filter"in t))return Md();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Jp(r,i),o=e.targetId;n=new fm(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rh.min():t.readTime?Tm(t.readTime):rh.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=Om(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Uf(r)?{documents:Um(e,r)}:{query:Vm(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_m(e,t.resumeToken);const r=Sm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rh.min())>0){n.readTime=km(e,t.snapshotVersion.toTimestamp());const r=Sm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Md()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=Om(this.serializer),t.removeTarget=e,this.r_(t)}}class Gg extends Hg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(Ud(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(Ud(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Tm(e.updateTime):Tm(t);return n.isEqual(rh.min())&&(n=Tm(t)),new Rp(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Tm(e.commitTime);return this.listener.d_(n,t)}return Ud(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=Om(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Mm(this.serializer,e))};this.r_(t)}}class Qg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new zd(Bd.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Do(e,Im(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Bd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zd(Bd.UNKNOWN,e.toString())})}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Mo(e,Im(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Bd.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zd(Bd.UNKNOWN,e.toString())})}terminate(){this.V_=!0,this.connection.terminate()}}class Yg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Od(t),this.y_=!1):Dd("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Xg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro(e=>{n.enqueueAndForget(async()=>{sy(this)&&(Dd("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Vd(e);t.M_.add(4),await Jg(t),t.N_.set("Unknown"),t.M_.delete(4),await $g(t)}(this))})}),this.N_=new Yg(n,r)}}async function $g(e){if(sy(e))for(const t of e.x_)await t(!0)}async function Jg(e){for(const t of e.x_)await t(!1)}function Zg(e,t){const n=Vd(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),iy(n)?ry(n):ky(n).Zo()&&ty(n,t))}function ey(e,t){const n=Vd(e),r=ky(n);n.F_.delete(t),r.Zo()&&ny(n,t),0===n.F_.size&&(r.Zo()?r.t_():sy(n)&&n.N_.set("Unknown"))}function ty(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ky(e).h_(t)}function ny(e,t){e.L_.xe(t),ky(e).P_(t)}function ry(e){e.L_=new gm({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ky(e).start(),e.N_.w_()}function iy(e){return sy(e)&&!ky(e).Yo()&&e.F_.size>0}function sy(e){return 0===Vd(e).M_.size}function oy(e){e.L_=void 0}async function ay(e){e.N_.set("Online")}async function ly(e){e.F_.forEach((t,n)=>{ty(e,t)})}async function cy(e,t){oy(e),iy(e)?(e.N_.D_(t),ry(e)):e.N_.set("Unknown")}async function uy(e,t,n){if(e.N_.set("Online"),t instanceof pm&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Dd("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await dy(e,n)}else if(t instanceof hm?e.L_.Ke(t):t instanceof fm?e.L_.He(t):e.L_.We(t),!n.isEqual(rh.min()))try{const t=await _g(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Fh.EMPTY_BYTE_STRING,r.snapshotVersion)),ny(e,t);const i=new $m(r.target,t,n,r.sequenceNumber);ty(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Dd("RemoteStore","Failed to raise snapshot:",t),await dy(e,t)}}async function dy(e,t,n){if(!wh(t))throw t;e.M_.add(1),await Jg(e),e.N_.set("Offline"),n||(n=()=>_g(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Dd("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await $g(e)})}function hy(e,t){return t().catch(n=>dy(e,n,t))}async function fy(e){const t=Vd(e),n=_y(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;py(t);)try{const e=await Tg(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,my(t,e)}catch(e){await dy(t,e)}gy(t)&&yy(t)}function py(e){return sy(e)&&e.v_.length<10}function my(e,t){e.v_.push(t);const n=_y(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function gy(e){return sy(e)&&!_y(e).Yo()&&e.v_.length>0}function yy(e){_y(e).start()}async function vy(e){_y(e).R_()}async function wy(e){const t=_y(e);for(const n of e.v_)t.E_(n.mutations)}async function by(e,t,n){const r=e.v_.shift(),i=Xp.from(r,t,n);await hy(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await fy(e)}async function xy(e,t){t&&_y(e).T_&&await async function(e,t){if(function(e){return tm(e)&&e!==Bd.ABORTED}(t.code)){const n=e.v_.shift();_y(e).e_(),await hy(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await fy(e)}}(e,t),gy(e)&&yy(e)}async function Ey(e,t){const n=Vd(e);n.asyncQueue.verifyOperationInProgress(),Dd("RemoteStore","RemoteStore received new credentials");const r=sy(n);n.M_.add(3),await Jg(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await $g(n)}async function Sy(e,t){const n=Vd(e);t?(n.M_.delete(2),await $g(n)):t||(n.M_.add(2),await Jg(n),n.N_.set("Unknown"))}function ky(e){return e.B_||(e.B_=function(e,t,n){const r=Vd(e);return r.m_(),new Kg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:ay.bind(null,e),Io:ly.bind(null,e),Eo:cy.bind(null,e),l_:uy.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.e_(),iy(e)?ry(e):e.N_.set("Unknown")):(await e.B_.stop(),oy(e))})),e.B_}function _y(e){return e.k_||(e.k_=function(e,t,n){const r=Vd(e);return r.m_(),new Gg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:vy.bind(null,e),Eo:xy.bind(null,e),A_:wy.bind(null,e),d_:by.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.e_(),await fy(e)):(await e.k_.stop(),e.v_.length>0&&(Dd("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))})),e.k_}class Cy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new qd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Cy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zd(Bd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(e,t){if(Od("AsyncQueue","".concat(t,": ").concat(e)),wh(e))return new zd(Bd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ny{constructor(e){this.comparator=e?(t,n)=>e(t,n)||lh.comparator(t.key,n.key):(e,t)=>lh.comparator(e.key,t.key),this.keyedMap=ap(),this.sortedSet=new Ah(this.comparator)}static emptySet(e){return new Ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ny))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ny;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Iy{constructor(){this.q_=new Ah(lh.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Md():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ay{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ay(e,t,Ny.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Py{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class jy{constructor(){this.queries=new rp(e=>$f(e),Xf),this.onlineState="Unknown",this.z_=new Set}}async function Ry(e,t){const n=Vd(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new Py,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ty(e,"Initialization of query '".concat(Jf(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Fy(n)}async function Dy(e,t){const n=Vd(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Oy(e,t){const n=Vd(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&Fy(n)}function Ly(e,t,n){const r=Vd(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Fy(e){e.z_.forEach(e=>{e.next()})}var My,Uy;(Uy=My||(My={})).J_="default",Uy.Cache="cache";class Vy{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ay(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==My.Cache}}class By{constructor(e){this.key=e}}class zy{constructor(e){this.key=e}}class qy{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pp(),this.mutatedKeys=pp(),this.Ia=tp(e),this.Ta=new Ny(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Iy,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Zf(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Md()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc)),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new Ay(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Iy,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(e=>this.la=this.la.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=pp(),this.Ta.forEach(e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))});const t=[];return e.forEach(e=>{this.Pa.has(e)||t.push(new zy(e))}),this.Pa.forEach(n=>{e.has(n)||t.push(new By(n))}),t}pa(e){this.la=e.ls,this.Pa=pp();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ay.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Wy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Hy{constructor(e){this.key=e,this.wa=!1}}class Ky{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new rp(e=>$f(e),Xf),this.Da=new Map,this.Ca=new Set,this.va=new Ah(lh.comparator),this.Fa=new Map,this.Ma=new ug,this.xa={},this.Oa=new Map,this.Na=ig.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Gy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=pv(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Yy(r,t,n,!0),i}async function Qy(e,t){const n=pv(e);await Yy(n,t,!0,!1)}async function Yy(e,t,n,r){const i=await Ng(e.localStore,Kf(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Xy(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Zg(e.remoteStore,i),a}async function Xy(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await Ag(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.da(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return lv(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Ag(e.localStore,t,!0),o=new qy(t,s.ls),a=o.da(s.documents),l=dm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);lv(e,n,c.fa);const u=new Wy(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function $y(e,t,n){const r=Vd(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(e=>!Xf(e,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ig(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ey(r.remoteStore,i.targetId),ov(r,i.targetId)}).catch(gh)):(ov(r,i.targetId),await Ig(r.localStore,i.targetId,!0))}async function Jy(e,t){const n=Vd(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ey(n.remoteStore,r.targetId))}async function Zy(e,t){const n=Vd(e);try{const e=await function(e,t){const n=Vd(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.qr.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Fh.EMPTY_BYTE_STRING,rh.min()).withLastLimboFreeSnapshotVersion(rh.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))});let a=sp(),l=pp();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Cg(e,s,t.documentUpdates).next(e=>{a=e.us,l=e.cs})),!r.isEqual(rh.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next(t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return yh.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.ts=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fa.get(t);r&&(Ud(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Ud(r.wa):e.removedDocuments.size>0&&(Ud(r.wa),r.wa=!1))}),await dv(n,e,t)}catch(e){await gh(e)}}function ev(e,t,n){const r=Vd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Vd(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)}),r&&Fy(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function tv(e,t,n){const r=Vd(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Ah(lh.comparator);e=e.insert(s,hf.newNoDocument(s,rh.min()));const n=pp().add(s),i=new um(rh.min(),new Map,new Ah(eh),e,n);await Zy(r,i),r.va=r.va.remove(s),r.Fa.delete(t),uv(r)}else await Ig(r.localStore,t,!1).then(()=>ov(r,t,n)).catch(gh)}async function nv(e,t){const n=Vd(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Vd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=yh.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ud(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=pp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);sv(n,r,null),iv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dv(n,e)}catch(e){await gh(e)}}async function rv(e,t,n){const r=Vd(e);try{const e=await function(e,t){const n=Vd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ud(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);sv(r,t,n),iv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dv(r,e)}catch(n){await gh(n)}}function iv(e,t){(e.Oa.get(t)||[]).forEach(e=>{e.resolve()}),e.Oa.delete(t)}function sv(e,t,n){const r=Vd(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function ov(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach(t=>{e.Ma.containsKey(t)||av(e,t)})}function av(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(ey(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),uv(e))}function lv(e,t,n){for(const r of n)r instanceof By?(e.Ma.addReference(r.key,t),cv(e,r)):r instanceof zy?(Dd("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||av(e,r.key)):Md()}function cv(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Dd("SyncEngine","New document in limbo: "+n),e.Ca.add(r),uv(e))}function uv(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new lh(sh.fromString(t)),r=e.Na.next();e.Fa.set(r,new Hy(n)),e.va=e.va.insert(n,r),Zg(e.remoteStore,new $m(Kf(zf(n.path)),r,"TargetPurposeLimboResolution",bh.oe))}}async function dv(e,t,n){const r=Vd(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((e,a)=>{o.push(r.Ba(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=wg.Qi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=Vd(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>yh.forEach(t,t=>yh.forEach(t.ki,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>yh.forEach(t.qi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!wh(e))throw e;Dd("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function hv(e,t){const n=Vd(e);if(!n.currentUser.isEqual(t)){Dd("SyncEngine","User change. New user:",t.toKey());const e=await kg(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach(e=>{e.forEach(e=>{e.reject(new zd(Bd.CANCELLED,t))})}),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await dv(n,e._s)}}function fv(e,t){const n=Vd(e),r=n.Fa.get(t);if(r&&r.wa)return pp().add(r.key);{let e=pp();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function pv(e){const t=Vd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tv.bind(null,t),t.Sa.l_=Oy.bind(null,t.eventManager),t.Sa.ka=Ly.bind(null,t.eventManager),t}function mv(e){const t=Vd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rv.bind(null,t),t}class gv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Sg(this.persistence,new xg,e.initialUser,this.serializer)}createPersistence(e){return new gg(vg.jr,this.serializer)}createSharedClientState(e){return new Rg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class yv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ev(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=hv.bind(null,this.syncEngine),await Sy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jy}createDatastore(e){const t=qg(e.databaseInfo.databaseId),n=function(e){return new Bg(e)}(e.databaseInfo);return function(e,t,n,r){return new Qg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Xg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ev(this.syncEngine,e,0),Og.D()?new Og:new Dg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ky(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Vd(e);Dd("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Jg(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Od("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new zd(Bd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Vd(e),r={documents:t.map(e=>Pm(n.serializer,e))},i=await n.Mo("BatchGetDocuments",n.serializer.databaseId,sh.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ud(!!t.found),t.found.name,t.found.updateTime;const n=jm(e,t.found.name),r=Tm(t.found.updateTime),i=t.found.createTime?Tm(t.found.createTime):rh.min(),s=new uf({mapValue:{fields:t.found.fields}});return hf.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ud(!!t.missing),Ud(!!t.readTime);const n=jm(e,t.missing),r=Tm(t.readTime);return hf.newNoDocument(n,r)}(e,t):Md()}(n.serializer,e);s.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=s.get(e.toString());Ud(!!t),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=lh.fromPath(t);this.mutations.push(new Qp(n,this.precondition(n)))}),await async function(e,t){const n=Vd(e),r={writes:t.map(e=>Mm(n.serializer,e))};await n.Do("Commit",n.serializer.databaseId,sh.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Md();t=rh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zd(Bd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rh.min())?Dp.exists(!1):Dp.updateTime(t):Dp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rh.min()))throw new zd(Bd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dp.updateTime(t)}return Dp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bv{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Jo=new Wg(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(async()=>{const e=new wv(this.datastore),t=this.tu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.nu(e)}))}).catch(e=>{this.nu(e)})})}tu(e){try{const t=this.updateFunction(e);return!xh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tm(t)}return!1}}class xv{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ad.UNAUTHENTICATED,this.clientId=Zd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Dd("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Dd("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zd(Bd.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ty(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ev(e,t){e.asyncQueue.verifyOperationInProgress(),Dd("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await kg(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Sv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _v(e);Dd("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ey(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ey(t.remoteStore,n)),e._onlineComponents=t}function kv(e){return"FirebaseError"===e.name?e.code===Bd.FAILED_PRECONDITION||e.code===Bd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function _v(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dd("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ev(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!kv(n))throw n;Ld("Error using user provided cache. Falling back to memory cache: "+n),await Ev(e,new gv)}}else Dd("FirestoreClient","Using default OfflineComponentProvider"),await Ev(e,new gv);return e._offlineComponents}async function Cv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dd("FirestoreClient","Using user provided OnlineComponentProvider"),await Sv(e,e._uninitializedComponentsProvider._online)):(Dd("FirestoreClient","Using default OnlineComponentProvider"),await Sv(e,new yv))),e._onlineComponents}function Tv(e){return Cv(e).then(e=>e.syncEngine)}function Nv(e){return Cv(e).then(e=>e.datastore)}async function Iv(e){const t=await Cv(e),n=t.eventManager;return n.onListen=Gy.bind(null,t.syncEngine),n.onUnlisten=$y.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Qy.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Jy.bind(null,t.syncEngine),n}function Av(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qd;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new vv({next:s=>{t.enqueueAndForget(()=>Dy(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new zd(Bd.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new zd(Bd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Vy(zf(n.path),s,{includeMetadataChanges:!0,ra:!0});return Ry(e,o)}(await Iv(e),e.asyncQueue,t,n,r)),r.promise}function Pv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qd;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new vv({next:n=>{t.enqueueAndForget(()=>Dy(e,o)),n.fromCache&&"server"===r.source?i.reject(new zd(Bd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Vy(n,s,{includeMetadataChanges:!0,ra:!0});return Ry(e,o)}(await Iv(e),e.asyncQueue,t,n,r)),r.promise}function jv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Rv=new Map;function Dv(e,t,n){if(!n)throw new zd(Bd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ov(e){if(!lh.isDocumentKey(e))throw new zd(Bd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lv(e){if(lh.isDocumentKey(e))throw new zd(Bd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Md()}function Mv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zd(Bd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fv(e);throw new zd(Bd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Uv(e,t){if(t<=0)throw new zd(Bd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Vv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zd(Bd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zd(Bd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new zd(Bd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zd(Bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new zd(Bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new zd(Bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zd(Bd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zd(Bd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hd;switch(e.type){case"firstParty":return new Yd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zd(Bd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rv.get(e);t&&(Dd("ComponentProvider","Removing Datastore"),Rv.delete(e),t.terminate())}(this),Promise.resolve()}}class zv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zv(this.firestore,e,this._query)}}class qv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qv(this.firestore,e,this._key)}}class Wv extends zv{constructor(e,t,n){super(e,t,zf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qv(this.firestore,null,new lh(e))}withConverter(e){return new Wv(this.firestore,e,this._path)}}function Hv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gn(e),Dv("collection","path",t),e instanceof Bv){const n=sh.fromString(t,...r);return Lv(n),new Wv(e,null,n)}{if(!(e instanceof qv||e instanceof Wv))throw new zd(Bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sh.fromString(t,...r));return Lv(n),new Wv(e.firestore,null,n)}}function Kv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gn(e),1===arguments.length&&(t=Zd.newId()),Dv("doc","path",t),e instanceof Bv){const n=sh.fromString(t,...r);return Ov(n),new qv(e,null,new lh(n))}{if(!(e instanceof qv||e instanceof Wv))throw new zd(Bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(sh.fromString(t,...r));return Ov(n),new qv(e.firestore,e instanceof Wv?e.converter:null,new lh(n))}}class Gv{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Wg(this,"async_queue_retry"),this.hu=()=>{const e=zg();e&&Dd("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=zg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=zg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new qd;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(UI){if(!wh(UI))throw UI;Dd("AsyncQueue","Operation failed with retryable error: "+UI)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Od("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.uu=!1,e))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Cy.createAndSchedule(this,e,t,n,e=>this.Eu(e));return this._u.push(r),r}Pu(){this.au&&Md()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function Qv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yv extends Bv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$v(this),this._firestoreClient.terminate()}}function Xv(e){return e._firestoreClient||$v(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $v(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Hh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new xv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Jv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jv(Fh.fromBase64String(e))}catch(e){throw new zd(Bd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Jv(Fh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zd(Bd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ah(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ew{constructor(e){this._methodName=e}}class tw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zd(Bd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zd(Bd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return eh(this._lat,e._lat)||eh(this._long,e._long)}}const nw=/^__.*__$/;class rw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new qp(e,this.data,this.fieldMask,t,this.fieldTransforms):new zp(e,this.data,t,this.fieldTransforms)}}class iw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new qp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Md()}}class ow{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new ow(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Sw(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(sw(this.fu)&&nw.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class aw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qg(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ow({fu:e,methodName:t,vu:n,path:ah.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lw(e){const t=e._freezeSettings(),n=qg(e._databaseId);return new aw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cw(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);ww("Data must be an object, but it was:",o,r);const a=yw(r,o);let l,c;if(s.merge)l=new Oh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=bw(t,r,n);if(!o.contains(i))throw new zd(Bd.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));kw(e,i)||e.push(i)}l=new Oh(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new rw(new uf(a),l,c)}class uw extends ew{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uw}}class dw extends ew{_toFieldTransform(e){return new jp(e.path,new kp)}isEqual(e){return e instanceof dw}}class hw extends ew{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Ip(e.serializer,wp(e.serializer,this.xu));return new jp(e.path,t)}isEqual(e){return e instanceof hw&&this.xu===e.xu}}function fw(e,t,n,r){const i=e.Fu(1,t,n);ww("Data must be an object, but it was:",i,r);const s=[],o=uf.empty();Nh(r,(e,r)=>{const a=Ew(t,e,n);r=gn(r);const l=i.Su(a);if(r instanceof uw)s.push(a);else{const e=gw(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Oh(s);return new iw(o,a,i.fieldTransforms)}function pw(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[bw(t,r,n)],l=[i];if(s.length%2!=0)throw new zd(Bd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(bw(t,s[h])),l.push(s[h+1]);const c=[],u=uf.empty();for(let h=a.length-1;h>=0;--h)if(!kw(c,a[h])){const e=a[h];let t=l[h];t=gn(t);const n=o.Su(e);if(t instanceof uw)c.push(e);else{const r=gw(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Oh(c);return new iw(u,d,o.fieldTransforms)}function mw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gw(n,e.Fu(r?4:3,t))}function gw(e,t){if(vw(e=gn(e)))return ww("Unsupported field value:",t,e),yw(e,t);if(e instanceof ew)return function(e,t){if(!sw(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gw(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=gn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nh.fromDate(e);return{timestampValue:km(t.serializer,n)}}if(e instanceof nh){const n=new nh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:km(t.serializer,n)}}if(e instanceof tw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jv)return{bytesValue:_m(t.serializer,e._byteString)};if(e instanceof qv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Nm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Fv(e)))}(e,t)}function yw(e,t){const n={};return Ih(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nh(e,(e,r)=>{const i=gw(r,t.pu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function vw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nh||e instanceof tw||e instanceof Jv||e instanceof qv||e instanceof ew)}function ww(e,t,n){if(!vw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Fv(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function bw(e,t,n){if((t=gn(t))instanceof Zv)return t._internalPath;if("string"==typeof t)return Ew(e,t);throw Sw("Field path arguments must be of type string or ",e,!1,void 0,n)}const xw=new RegExp("[~\\*/\\[\\]]");function Ew(e,t,n){if(t.search(xw)>=0)throw Sw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Zv(...t.split("."))._internalPath}catch(Ea){throw Sw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new zd(Bd.INVALID_ARGUMENT,a+e+l)}function kw(e,t){return e.some(e=>e.isEqual(t))}class _w{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cw extends _w{data(){return super.data()}}function Tw(e,t){return"string"==typeof t?Ew(e,t):t instanceof Zv?t._internalPath:t._delegate._internalPath}function Nw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zd(Bd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iw{}class Aw extends Iw{}function Pw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Iw&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Dw).length,n=e.filter(e=>e instanceof jw).length;if(t>1||t>0&&n>0)throw new zd(Bd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class jw extends Aw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jw(e,t,n)}_apply(e){const t=this._parse(e);return Vw(e._query,t),new zv(e.firestore,e.converter,Qf(e._query,t))}_parse(e){const t=lw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new zd(Bd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Uw(o,s);const t=[];for(const n of o)t.push(Mw(r,e,n));a={arrayValue:{values:t}}}else a=Mw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Uw(o,s),a=mw(n,t,o,"in"===s||"not-in"===s);return wf.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Rw(e,t,n){const r=t,i=Tw("where",e);return jw._create(i,r,n)}class Dw extends Iw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dw(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:bf.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Vw(n,i),n=Qf(n,i)}(e._query,t),new zv(e.firestore,e.converter,Qf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ow extends Aw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ow(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gf(t,n)}(e._query,this._field,this._direction);return new zv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Lw(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Tw("orderBy",e);return Ow._create(n,t)}class Fw extends Aw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Fw(e,t,n)}_apply(e){return new zv(e.firestore,e.converter,Yf(e._query,this._limit,this._limitType))}}function Mw(e,t,n){if("string"==typeof(n=gn(n))){if(""===n)throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wf(t)&&-1!==n.indexOf("/"))throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(sh.fromString(n));if(!lh.isDocumentKey(r))throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tf(e,new lh(r))}if(n instanceof qv)return tf(e,n._key);throw new zd(Bd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Fv(n),"."))}function Uw(e,t){if(!Array.isArray(e)||0===e.length)throw new zd(Bd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Vw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zd(Bd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zd(Bd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Bw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Md()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Nh(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new tw(Vh(e.latitude),Vh(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=qh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wh(e));default:return null}}convertTimestamp(e){const t=Uh(e);return new nh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=sh.fromString(e);Ud(Xm(n));const r=new Kh(n.get(1),n.get(3)),i=new lh(n.popFirst(5));return r.isEqual(t)||Od("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function zw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qw extends Bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qv(this.firestore,null,t)}}class Ww{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hw extends _w{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Kw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Tw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kw extends Hw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Gw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ww(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Kw(this._firestore,this._userDataWriter,n.key,n,new Ww(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zd(Bd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Kw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ww(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Kw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ww(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Qw(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Qw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Md()}}function Yw(e){e=Mv(e,qv);const t=Mv(e.firestore,Yv);return Av(Xv(t),e._key).then(n=>rb(t,e,n))}class Xw extends Bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qv(this.firestore,null,t)}}function $w(e){e=Mv(e,zv);const t=Mv(e.firestore,Yv),n=Xv(t),r=new Xw(t);return Nw(e._query),Pv(n,e._query).then(n=>new Gw(t,r,e,n))}function Jw(e,t,n){e=Mv(e,qv);const r=Mv(e.firestore,Yv),i=zw(e.converter,t,n);return nb(r,[cw(lw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Dp.none())])}function Zw(e,t,n){e=Mv(e,qv);const r=Mv(e.firestore,Yv),i=lw(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=gn(t))||t instanceof Zv?pw(i,"updateDoc",e._key,t,n,a):fw(i,"updateDoc",e._key,t),nb(r,[s.toMutation(e._key,Dp.exists(!0))])}function eb(e){return nb(Mv(e.firestore,Yv),[new Gp(e._key,Dp.none())])}function tb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=gn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Qv(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Qv(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof qv)d=Mv(e.firestore,Yv),h=zf(e._key.path),u={next:t=>{n[l]&&n[l](rb(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Mv(e,zv);d=Mv(t.firestore,Yv),h=t._query;const r=new Xw(d);u={next:e=>{n[l]&&n[l](new Gw(d,r,t,e))},error:n[l+1],complete:n[l+2]},Nw(e._query)}return function(e,t,n,r){const i=new vv(r),s=new Vy(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Ry(await Iv(e),s)),()=>{i.$a(),e.asyncQueue.enqueueAndForget(async()=>Dy(await Iv(e),s))}}(Xv(d),h,c,u)}function nb(e,t){return function(e,t){const n=new qd;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=mv(e);try{const e=await function(e,t){const n=Vd(e),r=nh.now(),i=t.reduce((e,t)=>e.add(t.key),pp());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=sp(),l=pp();return n.ss.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Vp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new qp(e.key,t,df(t.value.mapValue),Dp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:lp(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Ah(eh)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await dv(r,e.changes),await fy(r.remoteStore)}catch(e){const t=Ty(e,"Failed to persist write");n.reject(t)}}(await Tv(e),t,n)),n.promise}(Xv(e),t)}function rb(e,t,n){const r=n.docs.get(t._key),i=new Xw(e);return new Hw(e,i,t._key,r,new Ww(n.hasPendingWrites,n.fromCache),t.converter)}const ib={maxAttempts:5};class sb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lw(e)}set(e,t,n){this._verifyNotCommitted();const r=ob(e,this._firestore),i=zw(r.converter,t,n),s=cw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Dp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=ob(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=gn(t))||t instanceof Zv?pw(this._dataReader,"WriteBatch.update",r._key,t,n,o):fw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Dp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ob(e,this._firestore);return this._mutations=this._mutations.concat(new Gp(t._key,Dp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zd(Bd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ob(e,t){if((e=gn(e)).firestore!==t)throw new zd(Bd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ab extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lw(e)}get(e){const t=ob(e,this._firestore),n=new qw(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Md();const r=e[0];if(r.isFoundDocument())return new _w(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new _w(this._firestore,n,t._key,null,t.converter);throw Md()})}set(e,t,n){const r=ob(e,this._firestore),i=zw(r.converter,t,n),s=cw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=ob(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=gn(t))||t instanceof Zv?pw(this._dataReader,"Transaction.update",r._key,t,n,o):fw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=ob(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ob(e,this._firestore),n=new Xw(this._firestore);return super.get(e).then(e=>new Hw(this._firestore,n,t._key,e._document,new Ww(!1,!1),t.converter))}}function lb(e,t,n){e=Mv(e,Yv);const r=Object.assign(Object.assign({},ib),n);return function(e){if(e.maxAttempts<1)throw new zd(Bd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new qd;return e.asyncQueue.enqueueAndForget(async()=>{const i=await Nv(e);new bv(e.asyncQueue,i,n,t,r).Xa()}),r.promise}(Xv(e),n=>t(new ab(e,n)),r)}function cb(){return new dw("serverTimestamp")}function ub(e){return Xv(e=Mv(e,Yv)),new sb(e,t=>nb(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pd=e}(Ir),kr(new yn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Yv(new Gd(e.getProvider("auth-internal")),new $d(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zd(Bd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),jr(Id,"4.6.1",e),jr(Id,"4.6.1","esm2017")}();const db="firebasestorage.googleapis.com",hb="storageBucket";class fb extends on{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(gb(e),"Firebase Storage: ".concat(t," (").concat(gb(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fb.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var pb,mb;function gb(e){return"storage/"+e}function yb(){return new fb(pb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vb(){return new fb(pb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wb(){return new fb(pb.CANCELED,"User canceled the upload/download.")}function bb(e){return new fb(pb.INVALID_ARGUMENT,e)}function xb(){return new fb(pb.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(pb||(pb={}));class Eb{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Eb.makeFromUrl(e,t)}catch(UI){return new Eb(e,"")}if(""===n.path)return n;throw r=e,new fb(pb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===db?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Eb(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new fb(pb.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Sb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function kb(e,t,n,r){if(r<t)throw bb("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw bb("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _b(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Cb(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(mb||(mb={}));class Tb{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Nb(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===mb.NO_ERROR,i=n.getStatus();if(!t||Cb(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===mb.ABORT;return void e(!1,new Nb(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Nb(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(UI){r(UI)}else if(null!==i){const e=yb();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?xb():wb())}else{r(vb())}};this.canceled_?t(0,new Nb(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nb{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ib(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Ab{constructor(e,t){this._service=e,this._location=t instanceof Eb?t:Eb.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ab(e,t)}get root(){const e=new Eb(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ib(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Eb(this._location.bucket,e);return new Ab(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new fb(pb.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Pb(e,t){const n=null===t||void 0===t?void 0:t[hb];return null==n?null:Eb.makeFromBucketSpec(n,e)}class jb{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=db,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Eb.makeFromBucketSpec(r,this._host):Pb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Eb.makeFromBucketSpec(this._url,e):this._bucket=Pb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ab(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Sb(xb());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=_b(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Tb(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Rb="@firebase/storage",Db="0.12.4",Ob="storage";function Lb(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new jb(r,i,s,n,Ir)}kr(new yn(Ob,Lb,"PUBLIC").setMultipleInstances(!0)),jr(Rb,Db,""),jr(Rb,Db,"esm2017");const Fb=Ar({apiKey:"AIzaSyDzwOFPA8JEq_m7mojA0CjsKXfCXyHWPV0",authDomain:"ukiyo-store.firebaseapp.com",projectId:"ukiyo-store",storageBucket:"ukiyo-store.appspot.com",messagingSenderId:"778407123724",appId:"1:778407123724:web:5b8f0988cb19d27d750729"}),Mb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr();const t=_r(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=_r(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(cn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Yr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:na,persistence:[po,Xs,Js]}),r=Zt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>oa)return;const r=null===t||void 0===t?void 0:t.token;aa!==r&&(aa=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){gn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){gn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Xt("auth");return s&&hs(n,"http://".concat(s)),n}(Fb),Ub=function(e,t){const n="string"==typeof e?e:t||"(default)",r=_r("object"==typeof e?e:Pr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=$t("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Mv(e,Bv))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ld("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ad.MOCK_USER;else{t=tn(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new zd(Bd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ad(s)}e._authCredentials=new Kd(new Wd(t,n))}}(r,...e)}return r}(Fb),Vb=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr(),t=arguments.length>1?arguments[1]:void 0;e=gn(e);const n=_r(e,Ob).getImmediate({identifier:t}),r=$t("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:tn(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Fb),()=>{const[e,t]=(0,r.useState)(0),[n,i]=(0,r.useState)(0),[s,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const r=e=>{0!==window.scrollY||s||t(e.touches[0].clientY)},a=t=>{if(0===e||s)return;const n=t.touches[0].clientY-e;n>0&&i(Math.min(n,220))},l=()=>{0===e||s||(n>=180?(o(!0),setTimeout(()=>{window.location.reload()},1200)):(i(0),t(0)))};return window.addEventListener("touchstart",r),window.addEventListener("touchmove",a),window.addEventListener("touchend",l),()=>{window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l)}},[e,n,s]),{isRefreshing:s,pullPosition:n}}),Bb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zb=(()=>new Set(Bb))(),qb=e=>180*e/Math.PI,Wb=e=>{const t=qb(Math.atan2(e[1],e[0]));return Kb(t)},Hb={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Wb,rotateZ:Wb,skewX:e=>qb(Math.atan(e[1])),skewY:e=>qb(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Kb=e=>((e%=360)<0&&(e+=360),e),Gb=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Qb=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Yb={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gb,scaleY:Qb,scale:e=>(Gb(e)+Qb(e))/2,rotateX:e=>Kb(qb(Math.atan2(e[6],e[5]))),rotateY:e=>Kb(qb(Math.atan2(-e[2],e[0]))),rotateZ:Wb,rotate:Wb,skewX:e=>qb(Math.atan(e[4])),skewY:e=>qb(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Xb(e){return e.includes("scale")?1:0}function $b(e,t){if(!e||"none"===e)return Xb(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,i;if(n)r=Yb,i=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=Hb,i=t}if(!i)return Xb(t);const s=r[t],o=i[1].split(",").map(Jb);return"function"===typeof s?s(o):o[s]}function Jb(e){return parseFloat(e.trim())}const Zb=e=>t=>"string"===typeof t&&t.startsWith(e),ex=Zb("--"),tx=Zb("var(--"),nx=e=>!!tx(e)&&rx.test(e.split("/*")[0].trim()),rx=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function ix(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}const sx=(e,t,n)=>e+(t-e)*n;function ox(e){return void 0===e||1===e}function ax(e){let{scale:t,scaleX:n,scaleY:r}=e;return!ox(t)||!ox(n)||!ox(r)}function lx(e){return ax(e)||cx(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cx(e){return ux(e.x)||ux(e.y)}function ux(e){return e&&"0%"!==e}function dx(e,t,n){return n+t*(e-n)}function hx(e,t,n,r,i){return void 0!==i&&(e=dx(e,i,r)),dx(e,n,r)+t}function fx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=hx(e.min,t,n,r,i),e.max=hx(e.max,t,n,r,i)}function px(e,t){let{x:n,y:r}=t;fx(e.x,n.translate,n.scale,n.originPoint),fx(e.y,r.translate,r.scale,r.originPoint)}const mx=.999999999999,gx=1.0000000000001;function yx(e,t){e.min=e.min+t,e.max=e.max+t}function vx(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;fx(e,t,n,sx(e.min,e.max,i),r)}function wx(e,t){vx(e.x,t.x,t.scaleX,t.scale,t.originX),vx(e.y,t.y,t.scaleY,t.scale,t.originY)}function bx(e,t){return ix(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const xx=new Set(["width","height","top","left","right","bottom",...Bb]),Ex=(e,t,n)=>n>t?t:n<e?e:n,Sx={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},kx=u(u({},Sx),{},{transform:e=>Ex(0,1,e)}),_x=u(u({},Sx),{},{default:1}),Cx=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Tx=Cx("deg"),Nx=Cx("%"),Ix=Cx("px"),Ax=Cx("vh"),Px=Cx("vw"),jx=(()=>u(u({},Nx),{},{parse:e=>Nx.parse(e)/100,transform:e=>Nx.transform(100*e)}))(),Rx=e=>t=>t.test(e),Dx=[Sx,Ix,Nx,Tx,Px,Ax,{test:e=>"auto"===e,parse:e=>e}],Ox=e=>Dx.find(Rx(e));const Lx=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),Fx=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Mx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,i]=function(e){const t=Fx.exec(e);if(!t)return[,];const[,n,r,i]=t;return["--".concat(null!==n&&void 0!==n?n:r),i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return Lx(e)?parseFloat(e):e}return nx(i)?Mx(i,t,n+1):i}const Ux=e=>e===Sx||e===Ix,Vx=new Set(["x","y","z"]),Bx=Bb.filter(e=>!Vx.has(e));const zx={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return $b(n,"x")},y:(e,t)=>{let{transform:n}=t;return $b(n,"y")}};zx.translateX=zx.x,zx.translateY=zx.y;const qx=e=>e,Wx={},Hx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Kx={value:null,addProjectionMetrics:null};function Gx(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Hx.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){o.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{a=e,i?s=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&Kx.value&&Kx.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:p}=o,m=()=>{const s=Wx.useManualTiming?i.timestamp:performance.now();n=!1,Wx.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=Hx.reduce((t,s)=>{const a=o[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(m)),a.schedule(t,s,o)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<Hx.length;t++)o[Hx[t]].cancel(e)},state:i,steps:o}}const{schedule:Qx,cancel:Yx,state:Xx,steps:$x}=Gx("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:qx,!0),Jx=new Set;let Zx=!1,eE=!1,tE=!1;function nE(){if(eE){const e=Array.from(Jx).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Bx.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,i]=t;null===(n=e.getValue(r))||void 0===n||n.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}eE=!1,Zx=!1,Jx.forEach(e=>e.complete(tE)),Jx.clear()}function rE(){Jx.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(eE=!0)})}class iE{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Jx.add(this),Zx||(Zx=!0,Qx.read(rE),Qx.resolveKeyframes(nE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=null===r||void 0===r?void 0:r.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Jx.delete(this)}cancel(){"scheduled"===this.state&&(Jx.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const sE=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function oE(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||sE(e))}const aE=e=>Math.round(1e5*e)/1e5,lE=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const cE=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,uE=(e,t)=>n=>Boolean("string"===typeof n&&cE.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),dE=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,s,o,a]=r.match(lE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},hE=u(u({},Sx),{},{transform:e=>Math.round((e=>Ex(0,255,e))(e))}),fE={test:uE("rgb","red"),parse:dE("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+hE.transform(t)+", "+hE.transform(n)+", "+hE.transform(r)+", "+aE(kx.transform(i))+")"}};const pE={test:uE("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:fE.transform},mE={test:uE("hsl","hue"),parse:dE("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+Nx.transform(aE(n))+", "+Nx.transform(aE(r))+", "+aE(kx.transform(i))+")"}},gE={test:e=>fE.test(e)||pE.test(e)||mE.test(e),parse:e=>fE.test(e)?fE.parse(e):mE.test(e)?mE.parse(e):pE.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?fE.transform(e):mE.transform(e),getAnimatableNone:e=>{const t=gE.parse(e);return t.alpha=0,gE.transform(t)}},yE=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const vE="number",wE="color",bE=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function xE(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(bE,e=>(gE.test(e)?(r.color.push(s),i.push(wE),n.push(gE.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(vE),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function EE(e){return xE(e).values}function SE(e){const{split:t,types:n}=xE(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===vE?aE(e[s]):t===wE?gE.transform(e[s]):e[s]}return i}}const kE=e=>"number"===typeof e?0:gE.test(e)?gE.getAnimatableNone(e):e;const _E={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(lE))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(yE))||void 0===n?void 0:n.length)||0)>0},parse:EE,createTransformer:SE,getAnimatableNone:function(e){const t=EE(e);return SE(e)(t.map(kE))}},CE=new Set(["brightness","contrast","saturate","opacity"]);function TE(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(lE)||[];if(!r)return e;const i=n.replace(r,"");let s=CE.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const NE=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,IE=u(u({},_E),{},{getAnimatableNone:e=>{const t=e.match(NE);return t?t.map(TE).join(" "):e}}),AE=u(u({},Sx),{},{transform:Math.round}),PE=u(u({borderWidth:Ix,borderTopWidth:Ix,borderRightWidth:Ix,borderBottomWidth:Ix,borderLeftWidth:Ix,borderRadius:Ix,radius:Ix,borderTopLeftRadius:Ix,borderTopRightRadius:Ix,borderBottomRightRadius:Ix,borderBottomLeftRadius:Ix,width:Ix,maxWidth:Ix,height:Ix,maxHeight:Ix,top:Ix,right:Ix,bottom:Ix,left:Ix,padding:Ix,paddingTop:Ix,paddingRight:Ix,paddingBottom:Ix,paddingLeft:Ix,margin:Ix,marginTop:Ix,marginRight:Ix,marginBottom:Ix,marginLeft:Ix,backgroundPositionX:Ix,backgroundPositionY:Ix},{rotate:Tx,rotateX:Tx,rotateY:Tx,rotateZ:Tx,scale:_x,scaleX:_x,scaleY:_x,scaleZ:_x,skew:Tx,skewX:Tx,skewY:Tx,distance:Ix,translateX:Ix,translateY:Ix,translateZ:Ix,x:Ix,y:Ix,z:Ix,perspective:Ix,transformPerspective:Ix,opacity:kx,originX:jx,originY:jx,originZ:Ix}),{},{zIndex:AE,fillOpacity:kx,strokeOpacity:kx,numOctaves:AE}),jE=u(u({},PE),{},{color:gE,backgroundColor:gE,outlineColor:gE,fill:gE,stroke:gE,borderColor:gE,borderTopColor:gE,borderRightColor:gE,borderBottomColor:gE,borderLeftColor:gE,filter:IE,WebkitFilter:IE}),RE=e=>jE[e];function DE(e,t){let n=RE(e);return n!==IE&&(n=_E),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const OE=new Set(["auto","none","0"]);class LE extends iE{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),nx(n))){const r=Mx(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!xx.has(n)||2!==e.length)return;const[r,i]=e,s=Ox(r),o=Ox(i);if(s!==o)if(Ux(s)&&Ux(o))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else zx[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||oE(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!OE.has(t)&&xE(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=DE(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zx[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=zx[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const FE=e=>Boolean(e&&e.getVelocity);let ME;function UE(){ME=void 0}const VE={now:()=>(void 0===ME&&VE.set(Xx.isProcessing||Wx.useManualTiming?Xx.timestamp:performance.now()),ME),set:e=>{ME=e,queueMicrotask(UE)}};function BE(e,t){-1===e.indexOf(t)&&e.push(t)}function zE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class qE{constructor(){this.subscriptions=[]}add(e){return BE(this.subscriptions,e),()=>zE(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function WE(e,t){return t?e*(1e3/t):0}const HE={current:void 0};class KE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=VE.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=VE.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qE);const n=this.events[e].add(t);return"change"===e?()=>{n(),Qx.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return HE.current&&HE.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=VE.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return WE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function GE(e,t){return new KE(e,t)}const QE=[...Dx,gE,_E],{schedule:YE,cancel:XE}=Gx(queueMicrotask,!1),$E={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},JE={};for(const BI in $E)JE[BI]={isEnabled:e=>$E[BI].some(t=>!!e[t])};const ZE=()=>({x:{min:0,max:0},y:{min:0,max:0}}),eS={current:null},tS={current:!1};const nS=new WeakMap;function rS(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function iS(e){return"string"===typeof e||Array.isArray(e)}const sS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oS=["initial",...sS];function aS(e){return rS(e.animate)||oS.some(t=>iS(e[t]))}function lS(e){return Boolean(aS(e)||e.variants)}function cS(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function uS(e,t,n,r){if("function"===typeof t){const[i,s]=cS(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,s]=cS(r);t=t(void 0!==n?n:e.custom,i,s)}return t}const dS=["willChange"],hS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fS{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=VE.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Qx.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget=u({},c),this.initialValues=n.initial?u({},c):{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=aS(n),this.isVariantNode=lS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const h=this.scrapeMotionValuesFromProps(n,{},this),{willChange:f}=h,p=s(h,dS);for(const s in p){const e=p[s];void 0!==c[s]&&FE(e)&&e.set(c[s])}}mount(e){var t;this.current=e,nS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),tS.current||function(){if(tS.current=!0,It)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eS.current=e.matches;e.addEventListener("change",t),t()}else eS.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||eS.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Yx(this.notifyUpdate),Yx(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=zb.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Qx.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in JE){const t=JE[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<hS.length;n++){const t=hS[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(FE(i))e.addValue(r,i);else if(FE(s))e.addValue(r,GE(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,GE(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=GE(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(Lx(r)||sE(r))?r=parseFloat(r):!(e=>QE.find(Rx(e)))(r)&&_E.test(t)&&(r=DE(e,t)),this.setBaseTarget(e,FE(r)?r.get():r)),FE(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const i=uS(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);i&&(n=i[e])}if(t&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||FE(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new qE),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){YE.render(this.render)}}class pS extends fS{constructor(){super(...arguments),this.KeyframeResolver=LE}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;FE(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const mS=(e,t)=>t&&"number"===typeof e?t.transform(e):e,gS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yS=Bb.length;function vS(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(zb.has(l))o=!0;else if(ex(l))i[l]=e;else{const t=mS(e,PE[l]);l.startsWith("origin")?(a=!0,s[l]=t):r[l]=t}}if(t.transform||(o||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<yS;s++){const o=Bb[s],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=mS(a,PE[o]);l||(i=!1,r+="".concat(gS[o]||o,"(").concat(e,") ")),n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function wS(e,t,n,r){let{style:i,vars:s}=t;const o=e.style;let a;for(a in i)o[a]=i[a];for(a in null===r||void 0===r||r.applyProjectionStyles(o,n),s)o.setProperty(a,s[a])}const bS={};function xS(e,t){let{layout:n,layoutId:r}=t;return zb.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!bS[e]||"opacity"===e)}function ES(e,t,n){const{style:r}=e,i={};for(const o in r){var s;(FE(r[o])||t.style&&FE(t.style[o])||xS(o,e)||void 0!==(null===n||void 0===n||null===(s=n.getValue(o))||void 0===s?void 0:s.liveStyle))&&(i[o]=r[o])}return i}class SS extends pS{constructor(){super(...arguments),this.type="html",this.renderInstance=wS}readValueFromInstance(e,t){var n,r;if(zb.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?Xb(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return $b(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),i=(ex(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return bx(e,n)}build(e,t,n){vS(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return ES(e,t,n)}}const kS=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_S={offset:"stroke-dashoffset",array:"stroke-dasharray"},CS={offset:"strokeDashoffset",array:"strokeDasharray"};const TS=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function NS(e,t,n,r,i){let{attrX:o,attrY:a,attrScale:l,pathLength:c,pathSpacing:u=1,pathOffset:d=0}=t;if(vS(e,s(t,TS),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;var p,m;(h.transform&&(f.transform=h.transform,delete h.transform),f.transform||h.transformOrigin)&&(f.transformOrigin=null!==(p=h.transformOrigin)&&void 0!==p?p:"50% 50%",delete h.transformOrigin);f.transform&&(f.transformBox=null!==(m=null===i||void 0===i?void 0:i.transformBox)&&void 0!==m?m:"fill-box",delete h.transformBox);void 0!==o&&(h.x=o),void 0!==a&&(h.y=a),void 0!==l&&(h.scale=l),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?_S:CS;e[s.offset]=Ix.transform(-r);const o=Ix.transform(t),a=Ix.transform(n);e[s.array]="".concat(o," ").concat(a)}(h,c,u,d,!1)}const IS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),AS=e=>"string"===typeof e&&"svg"===e.toLowerCase();function PS(e,t,n){const r=ES(e,t,n);for(const i in e)if(FE(e[i])||FE(t[i])){r[-1!==Bb.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}class jS extends pS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ZE}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(zb.has(t)){const e=RE(t);return e&&e.default||0}return t=IS.has(t)?t:kS(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return PS(e,t,n)}build(e,t,n){NS(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){wS(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(IS.has(i)?i:kS(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=AS(e.tagName),super.mount(e)}}const RS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function DS(e){return"string"===typeof e&&!e.includes("-")&&!!(RS.indexOf(e)>-1||/[A-Z]/.test(e))}const OS=(e,t)=>DS(e)?new jS(t):new SS(t,{allowProjection:e!==r.Fragment}),LS=(0,r.createContext)({strict:!1}),FS=(0,r.createContext)({});function MS(e){const{initial:t,animate:n}=function(e,t){if(aS(e)){const{initial:t,animate:n}=e;return{initial:!1===t||iS(t)?t:void 0,animate:iS(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(FS));return(0,r.useMemo)(()=>({initial:t,animate:n}),[US(t),US(n)])}function US(e){return Array.isArray(e)?e.join(" "):e}const VS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function BS(e,t,n){for(const r in t)FE(t[r])||xS(r,n)||(e[r]=t[r])}function zS(e,t){const n={};return BS(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return vS(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function qS(e,t){const n={},r=zS(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const WS=()=>u(u({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function HS(e,t,n,i){const s=(0,r.useMemo)(()=>{const n=WS();return NS(n,t,AS(i),e.transformTemplate,e.style),u(u({},n.attrs),{},{style:u({},n.style)})},[t]);if(e.style){const t={};BS(t,e.style,e),s.style=u(u({},t),s.style)}return s}const KS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function GS(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||KS.has(e)}let QS=e=>!GS(e);try{"function"===typeof(YS=require("@emotion/is-prop-valid").default)&&(QS=e=>e.startsWith("on")?!GS(e):YS(e))}catch(VI){}var YS;function XS(e,t,n,i,s){let{latestValues:o}=i,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(DS(e)?HS:qS)(t,o,s,e),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(QS(i)||!0===n&&GS(i)||!t&&!GS(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"===typeof e,a),d=e!==r.Fragment?u(u(u({},c),l),{},{ref:n}):{},{children:h}=t,f=(0,r.useMemo)(()=>FE(h)?h.get():h,[h]);return(0,r.createElement)(e,u(u({},d),{},{children:f}))}function $S(e){return FE(e)?e.get():e}const JS=["transitionEnd","transition"];function ZS(e,t,n,r){const i={},o=r(e,{});for(const s in o)i[s]=$S(o[s]);let{initial:a,animate:l}=e;const c=aS(e),u=lS(e);t&&u&&!c&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===l&&(l=t.animate));let d=!!n&&!1===n.initial;d=d||!1===a;const h=d?l:a;if(h&&"boolean"!==typeof h&&!rS(h)){const t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){const r=uS(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=s(r,JS);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const ek=e=>(t,n)=>{const i=(0,r.useContext)(FS),s=(0,r.useContext)(Pt),o=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s}=e;return{latestValues:ZS(t,n,r,i),renderState:s()}}(e,t,i,s);return n?o():Nt(o)},tk=ek({scrapeMotionValuesFromProps:ES,createRenderState:VS}),nk=ek({scrapeMotionValuesFromProps:PS,createRenderState:WS});const rk=Symbol.for("motionComponentSymbol");function ik(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function sk(e,t,n){return(0,r.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):ik(n)&&(n.current=r))},[t])}const ok="data-"+kS("framerAppearId"),ak=(0,r.createContext)({});function lk(e,t,n,i,s){var o,a,l,c;const{visualElement:u}=(0,r.useContext)(FS),d=(0,r.useContext)(LS),h=(0,r.useContext)(Pt),f=(0,r.useContext)(Dt).reducedMotion,p=(0,r.useRef)(null);i=i||d.renderer,!p.current&&i&&(p.current=i(e,{visualState:t,parent:u,props:n,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:f}));const m=p.current,g=(0,r.useContext)(ak);!m||m.projection||!s||"html"!==m.type&&"svg"!==m.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ck(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(o)||a&&ik(a),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(p.current,n,s,g);const y=(0,r.useRef)(!1);(0,r.useInsertionEffect)(()=>{m&&y.current&&m.update(n,h)});const v=n[ok],w=(0,r.useRef)(Boolean(v)&&!(null!==(o=(a=window).MotionHandoffIsComplete)&&void 0!==o&&o.call(a,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return At(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),(0,r.useEffect)(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),w.current=!1),m.enteringChildren=void 0)}),m}function ck(e){if(e)return!1!==e.options.allowProjection?e.projection:ck(e.parent)}function uk(e){var t,n;let{forwardMotionProps:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;s&&function(e){for(const t in e)JE[t]=u(u({},JE[t]),e[t])}(s);const a=DS(e)?nk:tk;function l(t,n){let s;const l=u(u(u({},(0,r.useContext)(Dt)),t),{},{layoutId:dk(t)}),{isStatic:c}=l,d=MS(t),h=a(t,c);if(!c&&It){!function(){(0,r.useContext)(LS).strict;0}();const t=function(e){const{drag:t,layout:n}=JE;if(!t&&!n)return{};const r=u(u({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);s=t.MeasureLayout,d.visualElement=lk(e,h,l,o,t.ProjectionNode)}return(0,Ct.jsxs)(FS.Provider,{value:d,children:[s&&d.visualElement?(0,Ct.jsx)(s,u({visualElement:d.visualElement},l)):null,XS(e,t,sk(h,d.visualElement,n),h,c,i)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==t?t:"",")"));const c=(0,r.forwardRef)(l);return c[rk]=e,c}function dk(e){let{layoutId:t}=e;const n=(0,r.useContext)(Tt).id;return n&&void 0!==t?n+"-"+t:t}function hk(e,t){if("undefined"===typeof Proxy)return uk;const n=new Map,r=(n,r)=>uk(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,s)=>"create"===s?r:(n.has(s)||n.set(s,uk(s,void 0,e,t)),n.get(s))})}function fk(e,t,n){const r=e.getProps();return uS(r,t,void 0!==n?n:r.custom,e)}function pk(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const mk=e=>Array.isArray(e),gk=["transitionEnd","transition"];function yk(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,GE(n))}function vk(e){return mk(e)?e[e.length-1]||0:e}function wk(e,t){const n=e.getValue("willChange");if(r=n,Boolean(FE(r)&&r.add))return n.add(t);if(!n&&Wx.WillChange){const n=new Wx.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function bk(e){return e.props[ok]}function xk(e){e.duration=0,e.type}const Ek=(e,t)=>n=>t(e(n)),Sk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Ek)},kk=e=>1e3*e,_k=e=>e/1e3,Ck={layout:0,mainThread:0,waapi:0};function Tk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Nk(e,t){return n=>n>0?t:e}const Ik=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Ak=[pE,fE,mE];function Pk(e){const t=(e=>Ak.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let n=t.parse(e);return t===mE&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=Tk(i,e,t+1/3),o=Tk(i,e,t),a=Tk(i,e,t-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}(n)),n}const jk=(e,t)=>{const n=Pk(e),r=Pk(t);if(!n||!r)return Nk(e,t);const i=u({},n);return e=>(i.red=Ik(n.red,r.red,e),i.green=Ik(n.green,r.green,e),i.blue=Ik(n.blue,r.blue,e),i.alpha=sx(n.alpha,r.alpha,e),fE.transform(i))},Rk=new Set(["none","hidden"]);function Dk(e,t){return n=>sx(e,t,n)}function Ok(e){return"number"===typeof e?Dk:"string"===typeof e?nx(e)?Nk:gE.test(e)?jk:Mk:Array.isArray(e)?Lk:"object"===typeof e?gE.test(e)?jk:Fk:Nk}function Lk(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>Ok(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Fk(e,t){const n=u(u({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Ok(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Mk=(e,t)=>{const n=_E.createTransformer(t),r=xE(e),i=xE(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Rk.has(e)&&!i.values.length||Rk.has(t)&&!r.values.length?function(e,t){return Rk.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Sk(Lk(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){var i;const o=t.types[s],a=e.indexes[o][r[o]],l=null!==(i=e.values[a])&&void 0!==i?i:0;n[s]=l,r[o]++}return n}(r,i),i.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Nk(e,t))};function Uk(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return sx(e,t,n);return Ok(e)(e,t)}const Vk=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Qx.update(t,e)},stop:()=>Yx(t),now:()=>Xx.isProcessing?Xx.timestamp:VE.now()}},Bk=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(1e4*e(s/(i-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},zk=2e4;function qk(e){let t=0;let n=e.next(t);for(;!n.done&&t<zk;)t+=50,n=e.next(t);return t>=zk?1/0:t}function Wk(e,t,n){const r=Math.max(t-5,0);return WE(n-e(r),t-r)}const Hk={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Kk=.001;function Gk(e){let t,n,{duration:r=Hk.duration,bounce:i=Hk.bounce,velocity:s=Hk.velocity,mass:o=Hk.mass}=e;kk(Hk.maxDuration);let a=1-i;a=Ex(Hk.minDamping,Hk.maxDamping,a),r=Ex(Hk.minDuration,Hk.maxDuration,_k(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-s,o=Yk(e,a),l=Math.exp(-n);return Kk-i/o*l},n=e=>{const n=e*a*r,i=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Yk(Math.pow(e,2),a);return(-t(e)+Kk>0?-1:1)*((i-o)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Qk;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=kk(r),isNaN(l))return{stiffness:Hk.stiffness,damping:Hk.damping,duration:r};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const Qk=12;function Yk(e,t){return e*Math.sqrt(1-t*t)}const Xk=["duration","bounce"],$k=["stiffness","damping","mass"];function Jk(e,t){return t.some(t=>void 0!==e[t])}function Zk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hk.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hk.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=function(e){let t=u({velocity:Hk.velocity,stiffness:Hk.stiffness,damping:Hk.damping,mass:Hk.mass,isResolvedFromDuration:!1},e);if(!Jk(e,$k)&&Jk(e,Xk))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*Ex(.05,1,1-(e.bounce||0))*Math.sqrt(i);t=u(u({},t),{},{mass:Hk.mass,stiffness:i,damping:s})}else{const n=Gk(e);t=u(u(u({},t),n),{},{mass:Hk.mass}),t.isResolvedFromDuration=!0}return t}(u(u({},n),{},{velocity:-_k(n.velocity||0)})),m=f||0,g=c/(2*Math.sqrt(l*d)),y=o-s,v=_k(Math.sqrt(l/d)),w=Math.abs(y)<5;let b;if(r||(r=w?Hk.restSpeed.granular:Hk.restSpeed.default),i||(i=w?Hk.restDelta.granular:Hk.restDelta.default),g<1){const e=Yk(v,g);b=t=>{const n=Math.exp(-g*v*t);return o-n*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}}else if(1===g)b=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{const e=v*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*v*t),r=Math.min(e*t,300);return o-n*((m+g*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}const x={calculatedDuration:p&&h||null,next:e=>{const t=b(e);if(p)a.done=e>=h;else{let n=0===e?m:0;g<1&&(n=0===e?kk(m):Wk(b,e,t));const s=Math.abs(n)<=r,l=Math.abs(o-t)<=i;a.done=s&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(qk(x),zk),t=Bk(t=>x.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return x}function e_(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,y=void 0===a?g:a(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/i),w=e=>y+v(e),b=e=>{const t=v(e),n=w(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let x,E;const S=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(x=e,E=Zk({keyframes:[f.value,p(f.value)],velocity:Wk(w,e,f.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==x||(t=!0,b(e),S(e)),void 0!==x&&e>=x?E.next(e-x):(!t&&b(e),f)}}}Zk.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(u(u({},e),{},{keyframes:[0,t]})),r=Math.min(qk(n),zk);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:_k(r)}}(e,100,Zk);return e.ease=t.ease,e.duration=kk(t.duration),e.type="keyframes",e};const t_=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function n_(e,t,n,r){if(e===t&&n===r)return qx;const i=t=>function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=t_(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:t_(i(e),t,r)}const r_=n_(.42,0,1,1),i_=n_(0,0,.58,1),s_=n_(.42,0,.58,1),o_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,a_=e=>t=>1-e(1-t),l_=n_(.33,1.53,.69,.99),c_=a_(l_),u_=o_(c_),d_=e=>(e*=2)<1?.5*c_(e):.5*(2-Math.pow(2,-10*(e-1))),h_=e=>1-Math.sin(Math.acos(e)),f_=a_(h_),p_=o_(h_),m_=e=>Array.isArray(e)&&"number"===typeof e[0],g_={linear:qx,easeIn:r_,easeInOut:s_,easeOut:i_,circIn:h_,circInOut:p_,circOut:f_,backIn:c_,backInOut:u_,backOut:l_,anticipate:d_},y_=e=>{if(m_(e)){e.length;const[t,n,r,i]=e;return n_(t,n,r,i)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),g_[e]):e},v_=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function w_(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(t.length,1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],i=n||Wx.mix||Uk,s=e.length-1;for(let o=0;o<s;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||qx:t;n=Sk(e,n)}r.push(n)}return r}(t,r,i),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=v_(e[r],e[r+1],n);return a[r](i)};return n?t=>c(Ex(e[0],e[s-1],t)):c}function b_(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=v_(0,t,r);e.push(sx(n,1,i))}}(t,e.length-1),t}function x_(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(y_):y_(i),o={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:b_(n),t),l=w_(a,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||s_).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}const E_=e=>null!==e;function S_(e,t,n){let{repeat:r,repeatType:i="loop"}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.filter(E_),a=s<0||r&&"loop"!==i&&r%2===1?0:o.length-1;return a&&void 0!==n?n:o[a]}const k_={decay:e_,inertia:e_,tween:x_,keyframes:x_,spring:Zk};function __(e){"string"===typeof e.type&&(e.type=k_[e.type])}class C_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const T_=e=>e/100;class N_ extends C_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==VE.now()&&this.tick(VE.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},Ck.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;__(e);const{type:t=x_,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=e;let{keyframes:o}=e;const a=t||x_;a!==x_&&"number"!==typeof o[0]&&(this.mixKeyframes=Sk(T_,Uk(o[0],o[1])),o=[0,100]);const l=a(u(u({},e),{},{keyframes:o}));"mirror"===i&&(this.mirroredGenerator=a(u(u({},e),{},{keyframes:[...o].reverse(),velocity:-s}))),null===l.calculatedDuration&&(l.calculatedDuration=qk(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,w=n;if(u){const e=Math.min(this.currentTime,r)/o;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/o)):"mirror"===d&&(w=s)),v=Ex(0,1,n)*o}const b=y?{done:!1,value:c[0]}:w.next(v);i&&(b.value=i(b.value));let{done:x}=b;y||null===a||(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return E&&f!==e_&&(b.value=S_(c,this.options,m,this.speed)),p&&p(b.value),E&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return _k(this.calculatedDuration)}get time(){return _k(this.currentTime)}set time(e){var t;e=kk(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(VE.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_k(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=Vk,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(VE.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Ck.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function I_(e){let t;return()=>(void 0===t&&(t=e()),t)}const A_=I_(()=>void 0!==window.ScrollTimeline),P_={};function j_(e,t){const n=I_(e);return()=>{var e;return null!==(e=P_[t])&&void 0!==e?e:n()}}const R_=j_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(UI){return!1}return!0},"linearEasing"),D_=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},O_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:D_([0,.65,.55,1]),circOut:D_([.55,0,1,.45]),backIn:D_([.31,.01,.66,-.59]),backOut:D_([.33,1.53,.69,.99])};function L_(e,t){return e?"function"===typeof e?R_()?Bk(e,t):"ease-out":m_(e)?D_(e):Array.isArray(e)?e.map(e=>L_(e,t)||O_.easeOut):O_[e]:void 0}function F_(e,t,n){let{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=L_(a,i);Array.isArray(d)&&(u.easing=d),Kx.value&&Ck.waapi++;const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"};c&&(h.pseudoElement=c);const f=e.animate(u,h);return Kx.value&&f.finished.finally(()=>{Ck.waapi--}),f}function M_(e){return"function"===typeof e&&"applyToOptions"in e}const U_=["type"];class V_ extends C_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=o,this.options=e,e.type;const c=function(e){let{type:t}=e,n=s(e,U_);return M_(t)&&R_()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(i=n.ease)&&void 0!==i||(n.ease="easeOut"),n);var r,i}(e);this.animation=F_(t,n,r,c,i),!1===c.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=S_(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===l||void 0===l||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(UI){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return _k(Number(n))}get time(){return _k(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=kk(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&A_()?(this.animation.timeline=t,qx):n(this)}}const B_={anticipate:d_,backInOut:u_,circInOut:p_};function z_(e){"string"===typeof e.ease&&e.ease in B_&&(e.ease=B_[e.ease])}const q_=["motionValue","onUpdate","onComplete","element"];class W_ extends V_{constructor(e){z_(e),__(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:i,onComplete:o,element:a}=n,l=s(n,q_);if(!r)return;if(void 0!==e)return void r.set(e);const c=new N_(u(u({},l),{},{autoplay:!1})),d=kk(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(c.sample(d-10).value,c.sample(d).value,10),c.stop()}}const H_=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!_E.test(e)&&"0"!==e||e.startsWith("url(")));const K_=new Set(["opacity","clipPath","filter","transform"]),G_=I_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const Q_=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Y_ extends C_{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:f}=e,p=s(e,Q_);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=VE.now();const m=u({autoplay:n,delay:r,type:i,repeat:o,repeatDelay:a,repeatType:l,name:d,motionValue:h,element:f},p),g=(null===f||void 0===f?void 0:f.KeyframeResolver)||iE;this.keyframeResolver=new g(c,(e,t,n)=>this.onKeyframesResolved(e,t,m,!n),d,h,f),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=VE.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],o=H_(i,t),a=H_(s,t);return"You are trying to animate ".concat(t,' from "').concat(i,'" to "').concat(s,'". "').concat(o?s:i,'" is not an animatable value.'),!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||M_(n))&&r)}(e,i,s,o)||(!Wx.instantAnimations&&a||null===c||void 0===c||c(S_(e,n,t)),e[0]=e[e.length-1],xk(n),n.repeat=0);const d=u(u({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return G_()&&r&&K_.has(r)&&("transform"!==r||!c)&&!l&&!i&&"mirror"!==s&&0!==o&&"inertia"!==a}(d)?new W_(u(u({},d),{},{element:d.motionValue.owner.current})):new N_(d);h.finished.then(()=>this.notifyFinished()).catch(qx),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),tE=!0,rE(),nE(),tE=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const X_=e=>null!==e;const $_={type:"spring",stiffness:500,damping:25,restSpeed:10},J_={type:"keyframes",duration:.8},Z_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eC=(e,t)=>{let{keyframes:n}=t;return n.length>2?J_:zb.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:$_:Z_},tC=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const nC=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return a=>{const l=pk(r,e)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d-=kk(c);const h=u(u({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},l),{},{delay:-d,onUpdate:e=>{t.set(e),l.onUpdate&&l.onUpdate(e)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:i});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:l,repeatDelay:c,from:u,elapsed:d}=e,h=s(e,tC);return!!Object.keys(h).length})(l)||Object.assign(h,eC(e,h)),h.duration&&(h.duration=kk(h.duration)),h.repeatDelay&&(h.repeatDelay=kk(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let f=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(xk(h),0===h.delay&&(f=!0)),(Wx.instantAnimations||Wx.skipAnimations)&&(f=!0,xk(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,f&&!o&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const s=e.filter(X_),o=r&&"loop"!==i&&r%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}(h.keyframes,l);if(void 0!==e)return void Qx.update(()=>{h.onUpdate(e),h.onComplete()})}return l.isSync?new N_(h):new Y_(h)}},rC=["transition","transitionEnd"];function iC(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function sC(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:a}=t,l=s(t,rC);r&&(o=r);const c=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const s in l){var h;const t=e.getValue(s,null!==(h=e.latestValues[s])&&void 0!==h?h:null),r=l[s];if(void 0===r||d&&iC(d,s))continue;const i=u({delay:n},pk(o||{},s)),a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!i.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const t=bk(e);if(t){const e=window.MotionHandoffAnimation(t,s,Qx);null!==e&&(i.startTime=e,f=!0)}}wk(e,s),t.start(nC(s,t,r,e.shouldReduceMotion&&xx.has(s)?{type:!1}:i,e,f));const p=t.animation;p&&c.push(p)}return a&&Promise.all(c).then(()=>{Qx.update(()=>{a&&function(e,t){let n=fk(e,t)||{},{transitionEnd:r={},transition:i={}}=n,o=s(n,gk);o=u(u({},o),r);for(const s in o)yk(e,s,vk(o[s]))}(e,a)})}),c}function oC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,a=(o-1)*r;return"function"===typeof n?n(s,o):1===i?s*r:a-s*r}function aC(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=fk(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const o=i?()=>Promise.all(sC(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0;const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(aC(l,t,u(u({},o),{},{delay:n+("function"===typeof r?0:r)+oC(e.variantChildren,l,r,i,s)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,n,i,o,a,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(r.delay)])}function lC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const cC=oS.length;function uC(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&uC(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<cC;n++){const r=oS[n],i=e.props[r];(iS(i)||!1===i)&&(t[r]=i)}return t}const dC=["transition","transitionEnd"],hC=[...sS].reverse(),fC=sS.length;function pC(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>aC(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=aC(e,t,r);else{const i="function"===typeof t?fk(e,t,r.custom):t;n=Promise.all(sC(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function mC(e){let t=pC(e),n=vC(),r=!0;const i=t=>(n,r)=>{var i;const o=fk(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(o){const{transition:e,transitionEnd:t}=o,r=s(o,dC);n=u(u(u({},n),r),t)}return n};function o(s){const{props:o}=e,a=uC(e.parent)||{},l=[],c=new Set;let d={},h=1/0;for(let t=0;t<fC;t++){const f=hC[t],p=n[f],m=void 0!==o[f]?o[f]:a[f],g=iS(m),y=f===s?p.isActive:null;!1===y&&(h=t);let v=m===a[f]&&m!==o[f]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=u({},d),!p.isActive&&null===y||!m&&!p.prevProp||rS(m)||"boolean"===typeof m)continue;const w=gC(p.prevProp,m);let b=w||f===s&&p.isActive&&!v&&g||t>h&&g,x=!1;const E=Array.isArray(m)?m:[m];let S=E.reduce(i(f),{});!1===y&&(S={});const{prevResolvedValues:k={}}=p,_=u(u({},k),S),C=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in _){const t=S[e],n=k[e];if(d.hasOwnProperty(e))continue;let r=!1;r=mk(t)&&mk(n)?!lC(t,n):t!==n,r?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=S,p.isActive&&(d=u(u({},d),S)),r&&e.blockInitialAnimation&&(b=!1);const T=v&&w;b&&(!T||x)&&l.push(...E.map(t=>{const n={type:f};if("string"===typeof t&&r&&!T&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=fk(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=oC(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof o.initial){const n=fk(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let f=Boolean(l.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const s=o(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=vC(),r=!0}}}function gC(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!lC(t,e)}function yC(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vC(){return{animate:yC(!0),whileInView:yC(),whileHover:yC(),whileTap:yC(),whileDrag:yC(),whileFocus:yC(),exit:yC()}}class wC{constructor(e){this.isMounted=!1,this.node=e}update(){}}let bC=0;const xC={animation:{Feature:class extends wC{constructor(e){super(e),e.animationState||(e.animationState=mC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends wC{constructor(){super(...arguments),this.id=bC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},EC={x:!1,y:!1};function SC(){return EC.x||EC.y}function kC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const _C=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function CC(e){return{point:{x:e.pageX,y:e.pageY}}}function TC(e,t,n,r){return kC(e,t,(e=>t=>_C(t)&&e(t,CC(t)))(n),r)}function NC(e){return e.max-e.min}function IC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=sx(t.min,t.max,e.origin),e.scale=NC(n)/NC(t),e.translate=sx(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function AC(e,t,n,r){IC(e.x,t.x,n.x,r?r.originX:void 0),IC(e.y,t.y,n.y,r?r.originY:void 0)}function PC(e,t,n){e.min=n.min+t.min,e.max=e.min+NC(t)}function jC(e,t,n){e.min=t.min-n.min,e.max=e.min+NC(t)}function RC(e,t,n){jC(e.x,t.x,n.x),jC(e.y,t.y,n.y)}function DC(e){return[e("x"),e("y")]}const OC=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},LC=(e,t)=>Math.abs(e-t);class FC{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=VC(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=LC(e.x,t.x),r=LC(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=Xx;this.history.push(u(u({},r),{},{timestamp:i}));const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=MC(t,this.transformPagePoint),Qx.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=VC("pointercancel"===e.type?this.lastMoveEventInfo:MC(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!_C(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=r||window;const o=MC(CC(e),this.transformPagePoint),{point:a}=o,{timestamp:l}=Xx;this.history=[u(u({},a),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,VC(o,this.history)),this.removeListeners=Sk(TC(this.contextWindow,"pointermove",this.handlePointerMove),TC(this.contextWindow,"pointerup",this.handlePointerUp),TC(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yx(this.updatePoint)}}function MC(e,t){return t?{point:t(e.point)}:e}function UC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function VC(e,t){let{point:n}=e;return{point:n,delta:UC(n,zC(t)),offset:UC(n,BC(t)),velocity:qC(t,.1)}}function BC(e){return e[0]}function zC(e){return e[e.length-1]}function qC(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=zC(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>kk(t)));)n--;if(!r)return{x:0,y:0};const s=_k(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function WC(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function HC(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const KC=.35;function GC(e,t,n){return{min:QC(e,t),max:QC(e,n)}}function QC(e,t){return"number"===typeof e?e:e[t]||0}const YC=new WeakMap;class XC{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new FC(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(CC(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?EC[s]?null:(EC[s]=!0,()=>{EC[s]=!1}):EC.x||EC.y?null:(EC.x=EC.y=!0,()=>{EC.x=EC.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),DC(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Nx.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=NC(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&Qx.postRender(()=>i(e,t)),wk(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>DC(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:OC(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Qx.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!$C(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?sx(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?sx(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&ik(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:WC(e.x,r,s),y:WC(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KC;return!1===e?e=0:!0===e&&(e=KC),{x:GC(e,"left","right"),y:GC(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&DC(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ik(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=bx(e,n),{scroll:i}=t;return i&&(yx(r.x,i.offset.x),yx(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:HC(e.x,t.x),y:HC(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=ix(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=DC(o=>{if(!$C(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,h=u(u({type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},i),l);return this.startAxisValueAnimation(o,h)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return wk(this.visualElement,e),n.start(nC(e,n,0,t,this.visualElement,!1))}stopAnimation(){DC(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){DC(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){DC(t=>{const{drag:n}=this.getProps();if(!$C(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-sx(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!ik(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};DC(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=NC(e),i=NC(t);return i>r?n=v_(t.min,t.max-r,e.min):r>i&&(n=v_(e.min,e.max-i,t.min)),Ex(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),DC(t=>{if(!$C(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(sx(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;YC.set(this.visualElement,this);const e=TC(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();ik(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Qx.read(t);const i=kC(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(DC(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=KC,dragMomentum:o=!0}=e;return u(u({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o})}}function $C(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const JC=e=>(t,n)=>{e&&Qx.postRender(()=>e(t,n))};const ZC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const tT={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Ix.test(e))return e;e=parseFloat(e)}const n=eT(e,t.target.x),r=eT(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},nT={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=_E.parse(e);if(s.length>5)return i;const o=_E.createTransformer(e),a="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+a]/=l,s[1+a]/=c;const u=sx(l,c,.5);return"number"===typeof s[2+a]&&(s[2+a]/=u),"number"===typeof s[3+a]&&(s[3+a]/=u),o(s)}};let rT=!1;class iT extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)bS[t]=e[t],ex(t)&&(bS[t].isCSSVariable=!0)}(oT),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),rT&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions(u(u({},i.options),{},{onExitComplete:()=>this.safeToRemove()}))),ZC.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:s}=n;return s?(s.isPresent=i,rT=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||Qx.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),YE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;rT=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sT(e){const[t,n]=Ut(),i=(0,r.useContext)(Tt);return(0,Ct.jsx)(iT,u(u({},e),{},{layoutGroup:i,switchLayoutGroup:(0,r.useContext)(ak),isPresent:t,safeToRemove:n}))}const oT={borderRadius:u(u({},tT),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:tT,borderTopRightRadius:tT,borderBottomLeftRadius:tT,borderBottomRightRadius:tT,boxShadow:nT};function aT(e){return jt(e)&&"ownerSVGElement"in e}const lT=(e,t)=>e.depth-t.depth;class cT{constructor(){this.children=[],this.isDirty=!1}add(e){BE(this.children,e),this.isDirty=!0}remove(e){zE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lT),this.isDirty=!1,this.children.forEach(e)}}function uT(e,t){const n=VE.now(),r=i=>{let{timestamp:s}=i;const o=s-n;o>=t&&(Yx(r),e(o-t))};return Qx.setup(r,!0),()=>Yx(r)}const dT=["TopLeft","TopRight","BottomLeft","BottomRight"],hT=dT.length,fT=e=>"string"===typeof e?parseFloat(e):e,pT=e=>"number"===typeof e||Ix.test(e);function mT(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const gT=vT(0,.5,f_),yT=vT(.5,.95,qx);function vT(e,t,n){return r=>r<e?0:r>t?1:n(v_(e,t,r))}function wT(e,t){e.min=t.min,e.max=t.max}function bT(e,t){wT(e.x,t.x),wT(e.y,t.y)}function xT(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ET(e,t,n,r,i){return e=dx(e-=t,1/n,r),void 0!==i&&(e=dx(e,1/i,r)),e}function ST(e,t,n,r,i){let[s,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Nx.test(t)&&(t=parseFloat(t),t=sx(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=sx(s.min,s.max,r);e===s&&(a-=t),e.min=ET(e.min,t,n,a,i),e.max=ET(e.max,t,n,a,i)}(e,t[s],t[o],t[a],t.scale,r,i)}const kT=["x","scaleX","originX"],_T=["y","scaleY","originY"];function CT(e,t,n,r){ST(e.x,t,kT,n?n.x:void 0,r?r.x:void 0),ST(e.y,t,_T,n?n.y:void 0,r?r.y:void 0)}function TT(e){return 0===e.translate&&1===e.scale}function NT(e){return TT(e.x)&&TT(e.y)}function IT(e,t){return e.min===t.min&&e.max===t.max}function AT(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function PT(e,t){return AT(e.x,t.x)&&AT(e.y,t.y)}function jT(e){return NC(e.x)/NC(e.y)}function RT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class DT{constructor(){this.members=[]}add(e){BE(this.members,e),e.scheduleRender()}remove(e){if(zE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const OT={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},LT=["","X","Y","Z"];let FT=0;function MT(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function UT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=bk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Qx,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&UT(r)}function VT(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=FT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kx.value&&(OT.nodes=OT.calculatedTargetDeltas=OT.calculatedProjections=0),this.nodes.forEach(qT),this.nodes.forEach(XT),this.nodes.forEach($T),this.nodes.forEach(WT),Kx.addProjectionMetrics&&Kx.addProjectionMetrics(OT)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new cT)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new qE),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=aT(e)&&!(aT(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;Qx.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=uT(i,250),ZC.hasAnimatedSinceResize&&(ZC.hasAnimatedSinceResize=!1,this.nodes.forEach(YT)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||rN,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!PT(this.targetLayout,i),d=!n&&r;if(this.options.layoutRoot||this.resumeFrom||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=u(u({},pk(o,"layout")),{},{onPlay:a,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||YT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yx(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JT),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(KT);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(GT);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QT),this.nodes.forEach(BT),this.nodes.forEach(zT)):this.nodes.forEach(GT),this.clearAllSnapshots();const e=VE.now();Xx.delta=Ex(0,1e3/60,e-Xx.timestamp),Xx.timestamp=e,Xx.isProcessing=!0,$x.update.process(Xx),$x.preRender.process(Xx),$x.render.process(Xx),Xx.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,YE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HT),this.sharedNodes.forEach(ZT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qx.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qx.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||NC(this.snapshot.measuredBox.x)||NC(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!NT(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||lx(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),oN((r=n).x),oN(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(lN))){const{scroll:e}=this.root;e&&(yx(n.x,e.offset.x),yx(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(bT(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&bT(n,e),yx(n.x,i.offset.x),yx(n.y,i.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};bT(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&wx(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),lx(e.latestValues)&&wx(n,e.latestValues)}return lx(this.latestValues)&&wx(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};bT(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!lx(e.latestValues))continue;ax(e.latestValues)&&e.updateSnapshot();const r=ZE();bT(r,e.measurePageBox()),CT(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return lx(this.latestValues)&&CT(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=u(u(u({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xx.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=Xx.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},RC(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),bT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,PC(o.x,a.x,l.x),PC(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):bT(this.target,this.layout.layoutBox),px(this.target,this.targetDelta)):bT(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},RC(this.relativeTargetOrigin,this.target,e.target),bT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kx.value&&OT.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!ax(this.parent.latestValues)&&!cx(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Xx.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;bT(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&wx(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,px(e,o)),r&&lx(s.latestValues)&&wx(e,s.latestValues))}t.x<gx&&t.x>mx&&(t.x=1),t.y<gx&&t.y>mx&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(xT(this.prevProjectionDelta.x,this.projectionDelta.x),xT(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),AC(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&RT(this.projectionDelta.x,this.prevProjectionDelta.x)&&RT(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Kx.value&&OT.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i=u({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(nN));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;eN(s.x,e.x,n),eN(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(RC(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){tN(e.x,t.x,n.x,r),tN(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,o,n),h&&function(e,t){return IT(e.x,t.x)&&IT(e.y,t.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),bT(h,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){var o,a;if(i)e.opacity=sx(0,null!==(o=n.opacity)&&void 0!==o?o:1,gT(r)),e.opacityExit=sx(null!==(a=t.opacity)&&void 0!==a?a:1,0,yT(r));else if(s){var l,c;e.opacity=sx(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<hT;u++){const i="border".concat(dT[u],"Radius");let s=mT(t,i),o=mT(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||pT(s)===pT(o)?(e[i]=Math.max(sx(fT(s),fT(o),r),0),(Nx.test(o)||Nx.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=sx(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(Yx(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qx.update(()=>{ZC.hasAnimatedSinceResize=!0,Ck.layout++,this.motionValue||(this.motionValue=GE(0)),this.currentAnimation=function(e,t,n){const r=FE(e)?e:GE(e);return r.start(nC("",r,t,n)),r.animation}(this.motionValue,[0,1e3],u(u({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Ck.layout--},onComplete:()=>{Ck.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&aN(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=NC(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=NC(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}bT(t,n),wx(t,i),AC(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new DT);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&MT("z",e,r,this.animationValues);for(let i=0;i<LT.length;i++)MT("rotate".concat(LT[i]),e,r,this.animationValues),MT("skew".concat(LT[i]),e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=$S(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=$S(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!lx(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(null===n||void 0===n?void 0:n.z)||0;if((i||s||o)&&(r="translate3d(".concat(i,"px, ").concat(s,"px, ").concat(o,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:o,skewY:a}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),i&&(r+="rotateX(".concat(i,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) ")),o&&(r+="skewX(".concat(o,"deg) ")),a&&(r+="skewY(".concat(a,"deg) "))}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+="scale(".concat(a,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(s=n(i,s)),e.transform=s;const{x:o,y:a}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*o.origin,"% ").concat(100*a.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=i.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const u in bS){if(void 0===i[u])continue;const{correct:t,applyTo:n,isCSSVariable:o}=bS[u],a="none"===s?i[u]:t(i[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=a}else o?this.options.visualElement.renderState.vars[u]=a:e[u]=a}this.options.layoutId&&(e.pointerEvents=r===this?$S(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(KT),this.root.sharedNodes.clear()}}}function BT(e){e.updateLayout()}function zT(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?DC(e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=NC(r);r.min=t[e].min,r.max=r.min+i}):aN(i,n.layoutBox,t)&&DC(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=NC(t[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};AC(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?AC(a,e.applyTransform(r,!0),n.measuredBox):AC(a,t,n.layoutBox);const l=!NT(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o={x:{min:0,max:0},y:{min:0,max:0}};RC(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};RC(a,t,s.layoutBox),PT(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function qT(e){Kx.value&&OT.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function WT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function HT(e){e.clearSnapshot()}function KT(e){e.clearMeasurements()}function GT(e){e.isLayoutDirty=!1}function QT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function YT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XT(e){e.resolveTargetDelta()}function $T(e){e.calcProjection()}function JT(e){e.resetSkewAndRotation()}function ZT(e){e.removeLeadSnapshot()}function eN(e,t,n){e.translate=sx(t.translate,0,n),e.scale=sx(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function tN(e,t,n,r){e.min=sx(t.min,n.min,r),e.max=sx(t.max,n.max,r)}function nN(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const rN={duration:.45,ease:[.4,0,.1,1]},iN=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sN=iN("applewebkit/")&&!iN("chrome/")?Math.round:qx;function oN(e){e.min=sN(e.min),e.max=sN(e.max)}function aN(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=jT(t),i=jT(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function lN(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const cN=VT({attachResizeListener:(e,t)=>kC(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uN={current:void 0},dN=VT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!uN.current){const e=new cN({});e.mount(window),e.setOptions({layoutScroll:!0}),uN.current=e}return uN.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),hN={pan:{Feature:class extends wC{constructor(){super(...arguments),this.removePointerDownListener=qx}onPointerDown(e){this.session=new FC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:JC(e),onStart:JC(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Qx.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=TC(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends wC{constructor(e){super(e),this.removeGroupControls=qx,this.removeListeners=qx,this.controls=new XC(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qx}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:dN,MeasureLayout:sT}};function fN(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let i=document;t&&(i=t.current);const s=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,u(u({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function pN(e){return!("touch"===e.pointerType||SC())}function mN(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&Qx.postRender(()=>i(t,CC(t)))}const gN=(e,t)=>!!t&&(e===t||gN(e,t.parentElement)),yN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const vN=new WeakSet;function wN(e){return t=>{"Enter"===t.key&&e(t)}}function bN(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function xN(e){return _C(e)&&!SC()}function EN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=fN(e,n),o=e=>{const r=e.currentTarget;if(!xN(e))return;vN.add(r);const s=t(r,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),vN.has(r)&&vN.delete(r),xN(e)&&"function"===typeof s&&s(e,{success:t})},a=e=>{o(e,r===window||r===document||n.useGlobalTarget||gN(r,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,i),Rt(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=wN(()=>{if(vN.has(n))return;bN(n,"down");const e=wN(()=>{bN(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>bN(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),t=e,yN.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function SN(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&Qx.postRender(()=>i(t,CC(t)))}const kN=["root"],_N=new WeakMap,CN=new WeakMap,TN=e=>{const t=_N.get(e.target);t&&t(e)},NN=e=>{e.forEach(TN)};function IN(e,t,n){const r=function(e){let{root:t}=e,n=s(e,kN);const r=t||document;CN.has(r)||CN.set(r,{});const i=CN.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(NN,u({root:t},n))),i[o]}(t);return _N.set(e,n),r.observe(e),()=>{_N.delete(e),r.unobserve(e)}}const AN={some:0,all:1};const PN={inView:{Feature:class extends wC{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:AN[r]};return IN(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends wC{mount(){const{current:e}=this.node;e&&(this.unmount=EN(e,(e,t)=>(SN(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return SN(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends wC{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(UI){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sk(kC(this.node.current,"focus",()=>this.onFocus()),kC(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends wC{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=fN(e,n),o=e=>{if(!pN(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const s=e=>{pN(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach(e=>{e.addEventListener("pointerenter",o,i)}),s}(e,(e,t)=>(mN(this.node,t,"Start"),e=>mN(this.node,e,"End"))))}unmount(){}}}},jN={layout:{ProjectionNode:dN,MeasureLayout:sT}},RN=hk(u(u(u(u({},xC),PN),hN),jN),OS),DN=e=>{let{isAdmin:t,cartItemCount:n,setShowCart:i,searchQuery:s,setSearchQuery:o,currentUser:a,userInfo:l,onLoginClick:c,onLogoutClick:u,showBackButton:d,onBackClick:h,allProducts:f,onLogSearch:p}=e;const[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),w=(0,r.useRef)(null),b=(0,r.useRef)(null),x=he(),E=me(),[S,k]=(0,r.useState)(!0),_=(0,r.useRef)(0);(0,r.useEffect)(()=>{const e=()=>{"undefined"!==typeof window&&(window.scrollY>_.current&&window.scrollY>100?k(!1):k(!0),_.current=window.scrollY)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]);const C=a&&!a.isAnonymous,T=(null===l||void 0===l?void 0:l.name)||(null===a||void 0===a?void 0:a.displayName)||(null===a||void 0===a?void 0:a.email),[N,I]=(0,r.useState)([]),[A,P]=(0,r.useState)(!1),[j,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(""===s.trim())return I([]),void R(!1);if(f){const e=s.toLowerCase(),t=f.filter(t=>t.name.toLowerCase().includes(e)||t.keywords&&t.keywords.some(t=>t.includes(e))).slice(0,5);I(t);const n=t.length>0;R(!n),p&&p(e,n)}},[s,f,p]),(0,r.useEffect)(()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&P(!1),w.current&&!w.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b,w]);const D=()=>(0,Ct.jsx)("div",{className:"h-8 w-8 rounded-full bg-stone-200 flex items-center justify-center",children:(0,Ct.jsx)("svg",{className:"h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),O=()=>y?(0,Ct.jsx)("div",{className:"h-16 w-16 flex items-center justify-center rounded-full bg-amber-100 border border-amber-200",children:(0,Ct.jsx)("span",{className:"font-serif text-3xl text-amber-800",children:"U"})}):(0,Ct.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/ukiyo-store.firebasestorage.app/o/6667B111-9635-4244-A0A7-CAB11F4F19F2.PNG?alt=media&token=835272e0-8864-4c12-88df-746932928fdb",alt:"Ukiyo Logo",className:"h-16 w-16 object-contain rounded-full transition-transform duration-300 hover:scale-110",onError:()=>v(!0)});return(0,Ct.jsx)("header",{className:"bg-[#b08d57]/50 backdrop-blur-md shadow-lg sticky top-0 z-30 transition-transform duration-300 ".concat(S?"translate-y-0":"-translate-y-full"),children:(0,Ct.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,Ct.jsxs)("div",{className:"flex flex-wrap sm:flex-nowrap items-center justify-between py-2 sm:h-20",children:[(0,Ct.jsxs)("div",{className:"flex items-center space-x-4",children:[d&&(0,Ct.jsx)("button",{onClick:h,className:"p-2 rounded-full text-white hover:bg-white/20 transition-colors -ml-2","aria-label":"Go back",children:(0,Ct.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ct.jsxs)(vt,{to:"/",className:"flex items-center space-x-4",children:[(0,Ct.jsx)(O,{}),(0,Ct.jsxs)("div",{className:"flex flex-col items-center -space-y-2",children:[(0,Ct.jsx)("span",{className:"text-4xl font-serif font-bold text-white tracking-wider",children:"UKIYO"}),(0,Ct.jsx)("span",{className:"font-serif text-xs text-white tracking-widest",children:"STYLING HOMES"})]})]})]}),(0,Ct.jsxs)("div",{className:"flex items-center space-x-4 sm:order-3",children:[C?(0,Ct.jsxs)("div",{className:"relative",ref:w,children:[(0,Ct.jsxs)("button",{onClick:()=>g(!m),className:"flex items-center space-x-2",children:[a.photoURL?(0,Ct.jsx)("img",{src:a.photoURL,alt:"User",className:"h-8 w-8 rounded-full"}):(0,Ct.jsx)(D,{}),(0,Ct.jsx)("span",{className:"hidden sm:block text-sm font-medium text-white",children:T})]}),m&&(0,Ct.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20",children:[(0,Ct.jsx)(vt,{to:"/profile",onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Profile"}),(0,Ct.jsx)(vt,{to:"/orders",onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Orders"}),(0,Ct.jsx)(vt,{to:"/wishlist",onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"My Wishlist"}),t&&(0,Ct.jsx)(vt,{to:"/admin",onClick:()=>g(!1),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Admin Panel"}),(0,Ct.jsx)("button",{onClick:()=>{g(!1),u()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Logout"})]})]}):(0,Ct.jsx)("button",{onClick:c,className:"px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white/20 transition-colors",children:"Login"}),(0,Ct.jsxs)("button",{onClick:()=>i(!0),className:"relative p-2 rounded-full text-white hover:bg-white/20 transition-colors",children:[(0,Ct.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),n>0&&(0,Ct.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-red-100 bg-red-600 rounded-full",children:n})]})]}),"/"===x.pathname&&(0,Ct.jsx)("div",{className:"w-full sm:w-auto sm:flex-1 flex justify-center px-2 lg:ml-6 lg:justify-end order-3 sm:order-2 mt-4 sm:mt-0",children:(0,Ct.jsxs)("div",{className:"max-w-lg w-full lg:max-w-xs",ref:b,children:[(0,Ct.jsx)("label",{htmlFor:"search",className:"sr-only",children:"Search"}),(0,Ct.jsxs)("div",{className:"relative",children:[(0,Ct.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ct.jsx)("svg",{className:"h-5 w-5 text-white/70",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,Ct.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,Ct.jsx)("input",{id:"search",name:"search",className:"block w-full pl-10 pr-10 py-2 rounded-md bg-white/20 border border-white/30 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 transition-all",placeholder:"Search products...",type:"search",autoComplete:"off",value:s,onChange:e=>o(e.target.value),onFocus:()=>P(!0)}),s&&(0,Ct.jsx)("button",{onClick:()=>o(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Clear search",children:(0,Ct.jsx)("svg",{className:"h-5 w-5 text-white/70",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ct.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),A&&s.length>0&&(0,Ct.jsxs)("div",{className:"absolute mt-2 w-full bg-white rounded-md shadow-lg z-20 max-h-80 overflow-y-auto thin-scrollbar",children:[N.length>0&&(0,Ct.jsx)("ul",{className:"divide-y divide-gray-200",children:N.map(e=>(0,Ct.jsxs)("li",{className:"p-3 flex items-center hover:bg-gray-100 cursor-pointer",onClick:()=>{return t=e.id,E("/product/".concat(t)),o(""),I([]),void P(!1);var t},children:[(0,Ct.jsx)("img",{src:e.imageUrls[0],alt:e.name,className:"h-12 w-12 object-cover rounded-md"}),(0,Ct.jsxs)("div",{className:"ml-3",children:[(0,Ct.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Ct.jsxs)("p",{className:"text-sm text-gray-500",children:["EGP ",e.salePrice||e.price]})]})]},e.id))}),j&&(0,Ct.jsxs)("p",{className:"p-4 text-sm text-gray-500",children:['No results found for "',s,'"']})]})]})})]})})})},ON=()=>(0,Ct.jsx)("footer",{className:"bg-[#b08d57]/50 backdrop-blur-md shadow-lg mt-12 border-t border-white/20",children:(0,Ct.jsxs)("div",{className:"container mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-white",children:[(0,Ct.jsx)("h3",{className:"text-lg font-semibold",children:"Find us here:"}),(0,Ct.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-4",children:[(0,Ct.jsx)("a",{href:"https://www.facebook.com/share/19k89ojnky/?mibextid=wwXIfr",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center",children:(0,Ct.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/ukiyo-store.firebasestorage.app/o/Facebook_Logo_Picture_Panel_1200x1200.webp?alt=media&token=bac3e965-c54a-4803-a251-59e34d85c6a6",alt:"Facebook",className:"w-8 h-8 object-contain transition-transform duration-300 hover:scale-110"})}),(0,Ct.jsx)("a",{href:"https://www.instagram.com/ukiyo_homes?igsh=dHhkZzkxZGxrajNk",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center",children:(0,Ct.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/ukiyo-store.firebasestorage.app/o/instagram%20logo.png?alt=media&token=466a7697-4a1e-4e06-840b-7b605eb038a8",alt:"Instagram",className:"w-8 h-8 object-contain transition-transform duration-300 hover:scale-110"})})]}),(0,Ct.jsx)("p",{className:"mt-8 text-sm",children:"\ud83d\udccd 26 Farid Bek st. Kafr Abdo, Alexandria."}),(0,Ct.jsx)("p",{className:"text-sm",children:(0,Ct.jsx)("a",{href:"mailto:support@ukiyo.com",className:"hover:underline",children:"support@ukiyo.com"})}),(0,Ct.jsxs)("p",{className:"mt-8 text-xs text-gray-200",children:["\xa9 ",(new Date).getFullYear()," Ukiyo. All rights reserved."]})]})}),LN=()=>{const{pathname:e}=he();return(0,r.useEffect)(()=>{window.scrollTo(0,0)},[e]),null},FN={initial:{opacity:0},in:{opacity:1},out:{opacity:0}},MN={type:"tween",ease:"easeInOut",duration:.3},UN=e=>{var t;const n=he(),i=me(),[s,o]=(0,r.useState)(!0);LN();const a="/"!==n.pathname;return(0,r.useEffect)(()=>{var t;null!==(t=e.announcement)&&void 0!==t&&t.isActive&&o(!0)},[e.announcement]),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)(DN,u(u({},e),{},{showBackButton:a,onBackClick:()=>{i(-1)}})),(null===(t=e.announcement)||void 0===t?void 0:t.isActive)&&s&&(0,Ct.jsxs)("div",{className:"bg-[#b08d57] text-white text-center p-3 text-base font-semibold relative shadow-md",children:[(0,Ct.jsx)("span",{children:e.announcement.text}),(0,Ct.jsx)("button",{onClick:()=>o(!1),className:"absolute top-0 right-0 mt-2 mr-4 text-white hover:text-gray-200 text-2xl","aria-label":"Close banner",children:"\xd7"})]}),(0,Ct.jsx)(zt,{mode:"wait",children:(0,Ct.jsxs)(RN.main,{initial:"initial",animate:"in",exit:"out",variants:FN,transition:MN,children:[(0,Ct.jsx)(De,{})," "]},n.pathname)}),(0,Ct.jsx)(ON,{})]})},VN=e=>{let{rating:t,size:n="md"}=e;const r="sm"===n?"h-4 w-4":"h-5 w-5";return(0,Ct.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((e,n)=>(0,Ct.jsx)("svg",{className:"".concat(r," ").concat(t>n?"text-yellow-400":"text-gray-300"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ct.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))})},BN=e=>{let{product:t,onToggleWishlist:n,isWishlisted:r}=e;return(0,Ct.jsx)("button",{onClick:e=>{e.stopPropagation(),n(t,r)},className:"absolute top-2 right-2 p-2 rounded-full transition-colors hover:bg-black/20 z-10","aria-label":"Toggle Wishlist",children:(0,Ct.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:r?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})})},zN=e=>{let{product:t,onProductClick:n,isWishlisted:i,onToggleWishlist:s}=e;const[o,a]=(0,r.useState)(0),l=(0,r.useRef)(0),c=(0,r.useRef)(0),u=(0,r.useCallback)(()=>{var e;return(null===t||void 0===t||null===(e=t.imageUrls)||void 0===e?void 0:e.length)>0?t.imageUrls:["https://placehold.co/600x600/cccccc/ffffff?text=No+Image"]},[t])(),d=t.salePrice&&t.salePrice<t.price;return t?(0,Ct.jsxs)("div",{className:"bg-[#b08d57]/70 border border-white/20 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl group cursor-pointer flex flex-col aspect-[4/5]",onClick:()=>n(t),children:[(0,Ct.jsxs)("div",{className:"relative w-full h-4/5 overflow-hidden",onTouchStart:e=>{l.current=e.touches[0].clientX},onTouchMove:e=>{c.current=e.touches[0].clientX},onTouchEnd:e=>{e.stopPropagation(),l.current-c.current>75?a(e=>(e+1)%u.length):c.current-l.current>75&&a(e=>(e-1+u.length)%u.length)},children:[d&&(0,Ct.jsx)("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full z-10",children:"SALE"}),(0,Ct.jsx)(BN,{product:t,isWishlisted:i,onToggleWishlist:s}),(0,Ct.jsx)("div",{className:"flex h-full transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*o,"%)")},children:u.map((e,n)=>(0,Ct.jsx)("img",{src:e,alt:"".concat(t.name," ").concat(n+1),className:"w-full h-full object-cover flex-shrink-0",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/600x600/cccccc/ffffff?text=Image+Error"}},n))})]}),(0,Ct.jsxs)("div",{className:"p-2 flex flex-col flex-grow",children:[(0,Ct.jsxs)("div",{className:"flex-grow",children:[(0,Ct.jsx)("h3",{className:"text-base sm:text-lg font-bold font-serif text-white overflow-hidden line-clamp-2",children:t.name}),(0,Ct.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Ct.jsx)(VN,{rating:t.averageRating,size:"sm"}),t.reviewCount>0&&(0,Ct.jsxs)("span",{className:"text-xs text-gray-200",children:["(",t.reviewCount,")"]})]})]}),(0,Ct.jsx)("div",{className:"flex items-center pt-1",children:(0,Ct.jsx)("div",{className:"flex items-center gap-1",children:d?(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsxs)("span",{className:"text-base sm:text-lg font-bold text-red-500",children:["EGP ",Number(t.salePrice||0).toFixed(2)]}),(0,Ct.jsxs)("span",{className:"text-xs text-gray-200 line-through",children:["EGP ",Number(t.price||0).toFixed(2)]})]}):(0,Ct.jsxs)("span",{className:"text-base sm:text-lg font-bold text-white",children:["EGP ",Number(t.price||0).toFixed(2)]})})})]})]}):null},qN=e=>{let{products:t,onProductClick:n,wishlist:r,onToggleWishlist:i}=e;return(0,Ct.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 lg:gap-8",children:t.map(e=>(0,Ct.jsx)(zN,{product:e,onProductClick:n,isWishlisted:r.includes(e.id),onToggleWishlist:i},e.id))})},WN=e=>{let{isOpen:t,onClose:n,activeFilters:i,onApplyFilters:s,onClearFilters:o,categories:a,maxPrice:l}=e;const[c,d]=(0,r.useState)(i);if((0,r.useEffect)(()=>{t&&d(i)},[t,i]),!t)return null;const h=(e,t)=>{d(n=>u(u({},n),{},{[e]:t}))};return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:n,children:(0,Ct.jsxs)("div",{className:"fixed left-0 top-0 h-full w-full max-w-sm bg-[#b08d57]/50 backdrop-blur-md shadow-xl flex flex-col p-6 border-r border-white/20",onClick:e=>e.stopPropagation(),children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Ct.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Filters"}),(0,Ct.jsx)("button",{onClick:n,className:"p-2 -mr-2 rounded-full text-white hover:bg-white/20 text-2xl",children:"\xd7"})]}),(0,Ct.jsxs)("div",{className:"space-y-6 overflow-y-auto flex-grow",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsxs)("label",{htmlFor:"price",className:"block text-sm font-medium text-white mb-1",children:["Max Price: EGP ",c.priceRange]}),(0,Ct.jsx)("input",{id:"price",type:"range",min:"50",max:l,step:"50",value:c.priceRange,onChange:e=>h("priceRange",Number(e.target.value)),className:"w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-white",children:"Stock Status"}),(0,Ct.jsxs)("select",{id:"stock",value:c.stockStatus,onChange:e=>h("stockStatus",e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white/20 text-white border-white/30 rounded-md focus:outline-none focus:ring-white focus:border-white sm:text-sm",children:[(0,Ct.jsx)("option",{className:"text-black",value:"all",children:"All"}),(0,Ct.jsx)("option",{className:"text-black",value:"inStock",children:"In Stock"}),(0,Ct.jsx)("option",{className:"text-black",value:"outOfStock",children:"Out of Stock"})]})]}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsx)("span",{className:"text-white font-medium text-sm",children:"On Sale Only"}),(0,Ct.jsx)("label",{className:"flex items-center cursor-pointer",children:(0,Ct.jsxs)("div",{className:"relative",children:[(0,Ct.jsx)("input",{type:"checkbox",checked:c.onSaleOnly,onChange:e=>h("onSaleOnly",e.target.checked),className:"sr-only"}),(0,Ct.jsx)("div",{className:"block bg-white/30 w-14 h-8 rounded-full"}),(0,Ct.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition ".concat(c.onSaleOnly?"transform translate-x-full bg-green-400":"")})]})})]}),(0,Ct.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,Ct.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Category"}),(0,Ct.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(e=>(0,Ct.jsx)("button",{onClick:()=>h("selectedCategory",e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors border ".concat(c.selectedCategory===e?"bg-white text-[#b08d57] border-white":"bg-white/20 text-white hover:bg-white/30 border-transparent"),children:e},e))})]})]}),(0,Ct.jsxs)("div",{className:"mt-auto pt-6 flex space-x-2",children:[(0,Ct.jsx)("button",{onClick:()=>{o(),n()},className:"w-1/2 py-3 px-4 bg-white/30 text-white font-semibold rounded-md hover:bg-white/40",children:"Clear"}),(0,Ct.jsx)("button",{onClick:()=>{s(c),n()},className:"w-1/2 py-3 px-4 bg-white text-[#b08d57] font-semibold rounded-md hover:bg-gray-200",children:"Apply"})]})]})})},HN=e=>{let{products:t,onProductClick:n,wishlist:i,onToggleWishlist:s}=e;const o=(0,r.useRef)(null),a=(0,r.useRef)(null),l=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),d=e=>{o.current&&o.current.scrollBy({left:e,behavior:"smooth"})},h=()=>{clearInterval(a.current)},f=()=>{u(!0),h(),clearTimeout(l.current),l.current=setTimeout(()=>{u(!1)},3e4)};return(0,r.useEffect)(()=>(c||(h(),a.current=setInterval(()=>{if(o.current){const{scrollLeft:e,scrollWidth:t,clientWidth:n}=o.current;e+n>=t-1?o.current.scrollTo({left:0,behavior:"smooth"}):d(n/2)}},3e3)),()=>{h(),clearTimeout(l.current)}),[c]),(0,Ct.jsxs)("div",{className:"relative group",children:[(0,Ct.jsx)("div",{ref:o,className:"flex overflow-x-auto snap-x snap-mandatory scroll-smooth pb-4 space-x-4 hide-scrollbar",onMouseEnter:f,onTouchStart:f,children:t.map(e=>(0,Ct.jsx)("div",{className:"snap-center flex-shrink-0 w-[45%] sm:w-[30%] md:w-[23%] lg:w-[20%]",children:(0,Ct.jsx)(zN,{product:e,onProductClick:n,isWishlisted:i.includes(e.id),onToggleWishlist:s})},e.id))}),(0,Ct.jsx)("button",{onClick:()=>d(-300),className:"hidden md:block absolute top-1/2 left-0 transform -translate-y-1/2 bg-white/70 p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10","aria-label":"Scroll left",children:"\u2039"}),(0,Ct.jsx)("button",{onClick:()=>d(300),className:"hidden md:block absolute top-1/2 right-0 transform -translate-y-1/2 bg-white/70 p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10","aria-label":"Scroll right",children:"\u203a"}),(0,Ct.jsx)("style",{children:"\n                .hide-scrollbar::-webkit-scrollbar { display: none; }\n                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }\n            "})]})},KN=()=>(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col aspect-square animate-pulse",children:[(0,Ct.jsx)("div",{className:"w-full h-3/5 bg-gray-300"}),(0,Ct.jsxs)("div",{className:"p-2 flex flex-col flex-grow",children:[(0,Ct.jsxs)("div",{className:"flex-grow",children:[(0,Ct.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),(0,Ct.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]}),(0,Ct.jsx)("div",{className:"h-6 bg-gray-300 rounded w-1/3 mt-2"})]})]}),GN=e=>{let{banners:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),[o,a]=(0,r.useState)(!1),l=e=>{n.current&&n.current.scrollBy({left:e,behavior:"smooth"})},c=()=>{clearInterval(i.current)},u=()=>{a(!0),c(),clearTimeout(s.current),s.current=setTimeout(()=>{a(!1)},3e4)};if((0,r.useEffect)(()=>(o||(c(),i.current=setInterval(()=>{if(n.current){const{scrollLeft:e,scrollWidth:t,clientWidth:r}=n.current;e+r>=t-1?n.current.scrollTo({left:0,behavior:"smooth"}):l(r)}},4e3)),()=>{c(),clearTimeout(s.current)}),[o,t]),!t||0===t.length)return null;if(1===t.length){const e=t[0],n=()=>(0,Ct.jsx)("img",{src:e.imageUrl,alt:"Ukiyo Store Banner",className:"w-full h-auto object-cover"});return(0,Ct.jsx)("section",{className:"max-w-5xl mx-auto rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300",children:e.linkUrl?(0,Ct.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-auto",children:(0,Ct.jsx)(n,{})}):(0,Ct.jsx)(n,{})})}return(0,Ct.jsxs)("div",{className:"relative group max-w-5xl mx-auto rounded-lg overflow-hidden shadow-lg",children:[(0,Ct.jsx)("div",{ref:n,className:"flex overflow-x-auto snap-x snap-mandatory scroll-smooth hide-scrollbar",onMouseEnter:u,onTouchStart:u,children:t.map((e,t)=>(0,Ct.jsx)("div",{className:"snap-center flex-shrink-0 w-full",children:e.linkUrl?(0,Ct.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-auto",children:(0,Ct.jsx)("img",{src:e.imageUrl,alt:"Ukiyo Banner ".concat(t+1),className:"w-full h-auto object-cover"})}):(0,Ct.jsx)("img",{src:e.imageUrl,alt:"Ukiyo Banner ".concat(t+1),className:"w-full h-auto object-cover"})},t))}),(0,Ct.jsx)("button",{onClick:()=>l(-n.current.clientWidth),className:"hidden md:block absolute top-1/2 left-4 transform -translate-y-1/2 bg-white/70 p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10",children:"\u2039"}),(0,Ct.jsx)("button",{onClick:()=>l(n.current.clientWidth),className:"hidden md:block absolute top-1/2 right-4 transform -translate-y-1/2 bg-white/70 p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10",children:"\u203a"}),(0,Ct.jsx)("style",{children:"\n                .hide-scrollbar::-webkit-scrollbar { display: none; }\n                .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }\n            "})]})},QN=e=>{let{allProducts:t,searchQuery:n,wishlist:i,onToggleWishlist:s}=e;const o=me(),[a,l]=(0,r.useState)([]),c=(0,r.useMemo)(()=>{if(0===t.length)return 5e3;const e=t.map(e=>e.salePrice||e.price);return 50*Math.ceil(Math.max(...e)/50)},[t]),[d,h]=(0,r.useState)({selectedCategory:"All",priceRange:c,stockStatus:"all",onSaleOnly:!1}),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)("default");(0,r.useEffect)(()=>{h(e=>u(u({},e),{},{priceRange:c}))},[c]),(0,r.useEffect)(()=>{const e=tb(Pw(Hv(Ub,"storeSettings","banners","slides"),Lw("createdAt","asc")),e=>{l(e.docs.map(e=>u({id:e.id},e.data())))});return()=>e()},[]);const y=0===t.length,v=(0,r.useMemo)(()=>["All",...new Set(t.map(e=>e.category).filter(Boolean))],[t]),w=(0,r.useMemo)(()=>t.filter(e=>e.isNew),[t]),b=(0,r.useMemo)(()=>t.filter(e=>{const t=e.salePrice||e.price,r="All"===d.selectedCategory||e.category===d.selectedCategory,i=e.name.toLowerCase().includes(n.toLowerCase()),s=t<=d.priceRange,o="all"===d.stockStatus||"inStock"===d.stockStatus&&e.quantity>0||"outOfStock"===d.stockStatus&&0===e.quantity,a=!d.onSaleOnly||e.salePrice&&e.salePrice<e.price;return r&&i&&s&&o&&a}).sort((e,t)=>{const n=e.salePrice||e.price,r=t.salePrice||t.price;return"price-asc"===m?n-r:"price-desc"===m?r-n:"rating-desc"===m?(t.averageRating||0)-(e.averageRating||0):0}),[t,d,n,m]),x=n.trim().length>0,E=e=>{o("/product/".concat(e.id))};return(0,Ct.jsxs)(RN.div,{children:[(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12",children:[!x&&!y&&(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)(GN,{banners:a}),w.length>0&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 text-center mb-8",children:"New Arrivals"}),(0,Ct.jsx)(HN,{products:w,onProductClick:E,wishlist:i,onToggleWishlist:s})]})]}),(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 text-center mb-8",children:x?"Search Results":"All Products"}),(0,Ct.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-8",children:[(0,Ct.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,Ct.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L12 14.414V19a1 1 0 01-1.447.894l-4-2A1 1 0 016 17V6H4a1 1 0 01-1-1V4z"})}),"Filters"]}),(0,Ct.jsx)("div",{className:"relative",children:(0,Ct.jsxs)("select",{onChange:e=>g(e.target.value),value:m,className:"appearance-none bg-white border border-gray-300 rounded-full px-4 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-[#b08d57]",children:[(0,Ct.jsx)("option",{value:"default",children:"Sort by"}),(0,Ct.jsx)("option",{value:"price-asc",children:"Price: Low to High"}),(0,Ct.jsx)("option",{value:"price-desc",children:"Price: High to Low"}),(0,Ct.jsx)("option",{value:"rating-desc",children:"Highest Rating"})]})})]}),y?(0,Ct.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 lg:gap-8",children:[...Array(6)].map((e,t)=>(0,Ct.jsx)(KN,{},t))}):b.length>0?(0,Ct.jsx)(qN,{products:b,onProductClick:E,wishlist:i,onToggleWishlist:s}):(0,Ct.jsx)("div",{className:"text-center py-10",children:(0,Ct.jsx)("p",{className:"text-gray-600",children:"No products match your filters."})})]})]}),(0,Ct.jsx)(WN,{isOpen:f,onClose:()=>p(!1),activeFilters:d,onApplyFilters:e=>{h(e)},onClearFilters:()=>{h({selectedCategory:"All",priceRange:c,stockStatus:"all",onSaleOnly:!1})},categories:v,maxPrice:c})]})},YN=e=>{let{product:t,currentUser:n,userInfo:i,showNotification:s,hasPurchased:o}=e;const[a,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(0),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t)return;const e=tb(Pw(Hv(Ub,"products/".concat(t.id,"/reviews")),Lw("createdAt","desc")),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));l(t),n&&y(t.some(e=>e.userId===n.uid)),m(!1)});return()=>e()},[t,n]);const v=o&&!g;return(0,Ct.jsxs)("div",{className:"mt-16",children:[(0,Ct.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Customer Reviews"}),v&&(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,Ct.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Write a Review"}),(0,Ct.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),0===c)return void s("Please select a star rating.");if(!n)return void s("Please log in to leave a review.");const r={userId:n.uid,userName:(null===i||void 0===i?void 0:i.name)||n.displayName||"Anonymous",rating:c,text:h,createdAt:cb()},o=Kv(Hv(Ub,"products/".concat(t.id,"/reviews"))),a=Kv(Ub,"products/".concat(t.id));try{await lb(Ub,async e=>{const t=await e.get(a);if(!t.exists())throw"Product does not exist!";const n=t.data().reviewCount||0,i=n+1,s=((t.data().averageRating||0)*n+c)/i;e.set(o,r),e.update(a,{reviewCount:i,averageRating:s})}),s("Thank you for your review!"),d(0),f("")}catch(l){console.error("Error submitting review: ",l),s("Failed to submit review. Please try again.")}},children:[(0,Ct.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Ct.jsx)("span",{className:"mr-4",children:"Your Rating:"}),(0,Ct.jsx)("div",{className:"flex",children:[...Array(5)].map((e,t)=>(0,Ct.jsx)("button",{type:"button",onClick:()=>d(t+1),children:(0,Ct.jsx)("svg",{className:"h-8 w-8 cursor-pointer ".concat(c>t?"text-yellow-400":"text-gray-300"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ct.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},t))})]}),(0,Ct.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"Share your thoughts...",className:"w-full border-gray-300 rounded-md shadow-sm p-2",rows:"4"}),(0,Ct.jsx)("button",{type:"submit",className:"mt-4 py-2 px-6 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Submit Review"})]})]}),o&&g&&(0,Ct.jsx)("p",{className:"text-gray-600 bg-amber-100 p-3 rounded-md mb-6",children:"You've already reviewed this product. Thank you!"}),!o&&n&&(0,Ct.jsx)("p",{className:"text-gray-600 bg-amber-100 p-3 rounded-md mb-6",children:"You must purchase this product to leave a review."}),p?(0,Ct.jsx)("p",{children:"Loading reviews..."}):a.length>0?(0,Ct.jsx)("div",{className:"space-y-6",children:a.map(e=>{var t;return(0,Ct.jsxs)("div",{className:"border-b pb-4",children:[(0,Ct.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Ct.jsx)(VN,{rating:e.rating}),(0,Ct.jsx)("p",{className:"ml-4 font-bold text-gray-800",children:e.userName})]}),(0,Ct.jsx)("p",{className:"text-gray-600",children:e.text}),(0,Ct.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(1e3*(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)).toLocaleDateString()})]},e.id)})}):(0,Ct.jsx)("p",{children:"No reviews yet. Be the first to write one!"})]})},XN=["product","onProductClick","onAddToCart","onImageClick","wishlist","onToggleWishlist"],$N=e=>{let{product:t,onProductClick:n,onAddToCart:i,onImageClick:o,wishlist:a,onToggleWishlist:l}=e,c=s(e,XN);const[d,h]=(0,r.useState)(0),[f,p]=(0,r.useState)([]),m=(0,r.useRef)(0),g=(0,r.useRef)(0);(0,r.useEffect)(()=>{const e=async()=>{const e=Pw(Hv(Ub,"products"),(Uv("limit",n=10),Fw._create("limit",n,"F")));var n;const r=(await $w(e)).docs.map(e=>u({id:e.id},e.data())),i=r.filter(e=>e.id!==t.id).sort(()=>.5-Math.random()).slice(0,6);p(i)};t&&e()},[t]);const y=(0,r.useCallback)(()=>{var e;return(null===t||void 0===t||null===(e=t.imageUrls)||void 0===e?void 0:e.length)>0?t.imageUrls:["https://placehold.co/600x600/cccccc/ffffff?text=No+Image"]},[t])(),v=t.salePrice&&t.salePrice<t.price;return(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ct.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[(0,Ct.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Ct.jsx)("div",{className:"relative h-96 md:h-[550px] w-full cursor-pointer overflow-hidden rounded-lg shadow-lg",onTouchStart:e=>{m.current=e.touches[0].clientX,g.current=e.touches[0].clientX},onTouchMove:e=>{g.current=e.touches[0].clientX},onTouchEnd:()=>{Math.abs(m.current-g.current)<10?o(y,d):m.current-g.current>75?h(e=>(e+1)%y.length):g.current-m.current>75&&h(e=>(e-1+y.length)%y.length)},children:(0,Ct.jsx)("div",{className:"flex h-full transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*d,"%)")},children:y.map((e,n)=>(0,Ct.jsx)("img",{src:e,alt:"".concat(t.name," ").concat(n+1),className:"w-full h-full object-cover flex-shrink-0"},n))})}),y.length>1&&(0,Ct.jsx)("div",{className:"flex justify-center gap-2",children:y.map((e,t)=>(0,Ct.jsx)("button",{onClick:()=>h(t),className:"w-20 h-20 rounded-md overflow-hidden border-2 ".concat(d===t?"border-[#b08d57]":"border-transparent"),children:(0,Ct.jsx)("img",{src:e,alt:"Thumbnail ".concat(t+1),className:"w-full h-full object-cover"})},t))})]}),(0,Ct.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,Ct.jsx)("span",{className:"text-sm font-medium text-[#b08d57]",children:t.category}),(0,Ct.jsx)("h1",{className:"text-4xl font-serif font-bold text-gray-800 mt-2",children:t.name}),t.reviewCount>0&&(0,Ct.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,Ct.jsx)(VN,{rating:t.averageRating}),(0,Ct.jsxs)("a",{href:"#reviews",className:"text-sm text-gray-600 hover:underline",children:["(",t.reviewCount," reviews)"]})]}),(0,Ct.jsx)("p",{className:"text-gray-600 mt-4 text-lg leading-relaxed",children:t.description}),(0,Ct.jsx)("div",{className:"flex items-baseline gap-4 mt-6",children:v?(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsxs)("span",{className:"text-4xl font-bold text-red-600",children:["EGP ",Number(t.salePrice||0).toFixed(2)]}),(0,Ct.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["EGP ",Number(t.price||0).toFixed(2)]})]}):(0,Ct.jsxs)("span",{className:"text-4xl font-bold text-gray-800",children:["EGP ",Number(t.price||0).toFixed(2)]})}),t.quantity>0?(0,Ct.jsx)("button",{onClick:()=>i(t),className:"w-full mt-8 py-3 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d] shadow-md hover:shadow-lg transition-all text-lg",children:"Add to Cart"}):(0,Ct.jsx)("div",{className:"mt-8",children:(0,Ct.jsx)("button",{className:"w-full py-3 px-4 bg-gray-400 text-white font-semibold rounded-md cursor-not-allowed",children:"Out of Stock"})})]})]}),(0,Ct.jsx)("div",{id:"reviews",children:(0,Ct.jsx)(YN,u(u({},c),{},{product:t}))}),(0,Ct.jsxs)("div",{className:"mt-24",children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 text-center mb-8",children:"More Products"}),(0,Ct.jsx)(HN,{products:f,onProductClick:n,wishlist:a,onToggleWishlist:l})]})]})},JN=()=>(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-pulse",children:[(0,Ct.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[(0,Ct.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Ct.jsx)("div",{className:"h-96 md:h-[550px] w-full bg-gray-300 rounded-lg"}),(0,Ct.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,Ct.jsx)("div",{className:"w-20 h-20 bg-gray-300 rounded-md"}),(0,Ct.jsx)("div",{className:"w-20 h-20 bg-gray-300 rounded-md"}),(0,Ct.jsx)("div",{className:"w-20 h-20 bg-gray-300 rounded-md"})]})]}),(0,Ct.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,Ct.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),(0,Ct.jsx)("div",{className:"h-10 bg-gray-300 rounded w-3/4"}),(0,Ct.jsx)("div",{className:"h-24 bg-gray-300 rounded w-full"}),(0,Ct.jsx)("div",{className:"h-12 bg-gray-300 rounded w-1/2"}),(0,Ct.jsx)("div",{className:"h-12 bg-gray-400 rounded w-full mt-4"})]})]}),(0,Ct.jsxs)("div",{className:"mt-24",children:[(0,Ct.jsx)("div",{className:"h-8 bg-gray-300 rounded-md w-1/3 mx-auto mb-8"}),(0,Ct.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 lg:gap-8",children:[(0,Ct.jsx)(KN,{}),(0,Ct.jsx)(KN,{}),(0,Ct.jsx)(KN,{})]})]})]}),ZN=e=>{const{productId:t}=ye(),n=me(),[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!t)return;a(!0);const e=tb(Kv(Ub,"products",t),e=>{e.exists()?s(u({id:e.id},e.data())):console.error("No such product!"),setTimeout(()=>a(!1),250)});return()=>e()},[t]);return o?(0,Ct.jsx)(JN,{}):i?(0,Ct.jsx)($N,u({product:i,onProductClick:e=>{n("/product/".concat(e.id))}},e)):(0,Ct.jsx)("div",{className:"text-center py-20",children:"Product not found."})},eI=["Cairo","Alexandria","Giza"].sort(),tI=e=>{let{userInfo:t,onUpdate:n,onPasswordReset:i,onEmailUpdate:s,showNotification:o}=e;const[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&(l(t.name||""),u(t.phone||""),h(t.city||""),p(t.address||""))},[t]);return(0,Ct.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Ct.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,Ct.jsxs)("div",{className:"text-center mb-12",children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 sm:text-4xl",children:"My Profile"}),(0,Ct.jsx)("p",{className:"mt-4 text-xl text-gray-600",children:"Update your personal and shipping information."})]}),(0,Ct.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 space-y-6",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"name-profile",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,Ct.jsx)("input",{type:"text",id:"name-profile",value:a,onChange:e=>l(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"phone-profile",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,Ct.jsx)("input",{type:"tel",id:"phone-profile",value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"city-profile",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Ct.jsxs)("select",{id:"city-profile",value:d,onChange:e=>h(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[(0,Ct.jsx)("option",{value:"",children:"Select a City"}),eI.map(e=>(0,Ct.jsx)("option",{value:e,children:e},e))]})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"address-profile",className:"block text-sm font-medium text-gray-700",children:"Full Address"}),(0,Ct.jsx)("input",{type:"text",id:"address-profile",value:f,onChange:e=>p(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsx)("button",{onClick:()=>{n({name:a,phone:c,city:d,address:f})},className:"w-full py-2 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Save Changes"})]}),(0,Ct.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 mt-8 space-y-4",children:[(0,Ct.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Account Security"}),(0,Ct.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Ct.jsx)("button",{onClick:()=>{const e=prompt("Please enter your new email address:");if(e){const t=prompt("For security, please re-enter your password:");t?s(e,t):o("Password is required to change email.")}},className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 font-semibold rounded-md hover:bg-gray-50",children:"Change Email"}),(0,Ct.jsx)("button",{onClick:i,className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 font-semibold rounded-md hover:bg-gray-50",children:"Reset Password"})]})]})]})})},nI=e=>(0,Ct.jsx)(tI,u({},e)),rI={Placed:"bg-yellow-100 text-yellow-800","Out for Delivery":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},iI=e=>{let{orders:t,title:n,subtitle:r}=e;return(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ct.jsxs)("div",{className:"text-center mb-12",children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 tracking-tight sm:text-4xl",children:n}),(0,Ct.jsx)("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-600",children:r})]}),(0,Ct.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,Ct.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200",children:[0===t.length&&(0,Ct.jsx)("li",{className:"p-4 text-center text-gray-500",children:"No orders found."}),t.map(e=>{var t;return(0,Ct.jsxs)("li",{className:"p-4 sm:p-6",children:[(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsxs)("p",{className:"text-sm font-medium text-gray-600 truncate",children:["Order #",e.id.substring(0,6)]}),(0,Ct.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,Ct.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(rI[e.status]||"bg-gray-100 text-gray-800"),children:e.status})})]}),(0,Ct.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,Ct.jsxs)("div",{className:"sm:flex",children:[(0,Ct.jsx)("p",{className:"flex items-center text-sm text-gray-500",children:e.customer.name}),(0,Ct.jsx)("p",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6",children:new Date(1e3*(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)).toLocaleDateString()})]}),(0,Ct.jsx)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:(0,Ct.jsxs)("p",{className:"font-bold",children:["EGP ",e.total.toFixed(2)]})})]}),(0,Ct.jsxs)("div",{className:"mt-4",children:[(0,Ct.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Items:"}),(0,Ct.jsx)("ul",{className:"list-disc pl-5 mt-1 text-sm text-gray-500",children:e.items.map(e=>(0,Ct.jsxs)("li",{children:[e.quantity," x ",e.name]},e.id))})]})]},e.id)})]})})]})},sI=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),s=Mb.currentUser;return(0,r.useEffect)(()=>{if(!s)return void i(!1);const e=tb(Pw(Hv(Ub,"orders"),Rw("userId","==",s.uid),Lw("createdAt","desc")),e=>{t(e.docs.map(e=>u({id:e.id},e.data()))),i(!1)},e=>{console.error("Error fetching orders:",e),i(!1)});return()=>e()},[s]),n?(0,Ct.jsx)("div",{className:"text-center py-20",children:"Loading orders..."}):(0,Ct.jsx)(iI,{orders:e,title:"My Orders",subtitle:"Here's a list of your past and current orders."})},oI=e=>{let{allProducts:t,wishlist:n,onToggleWishlist:r}=e;const i=me(),s=t.filter(e=>n.includes(e.id));return(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ct.jsxs)("div",{className:"text-center mb-12",children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 tracking-tight sm:text-4xl",children:"My Wishlist"}),(0,Ct.jsx)("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-600",children:"Your favorite items, all in one place."})]}),s.length>0?(0,Ct.jsx)(qN,{products:s,onProductClick:e=>{i("/product/".concat(e.id))},onToggleWishlist:r,wishlist:n}):(0,Ct.jsxs)("div",{className:"text-center py-10",children:[(0,Ct.jsx)("p",{className:"text-gray-500 text-lg",children:"Your wishlist is empty."}),(0,Ct.jsx)(vt,{to:"/",className:"mt-4 inline-block px-6 py-2 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Find Your Favorites"})]})]})},aI=e=>{let{orders:t,products:n}=e;const r=t.filter(e=>"Delivered"===e.status),i=new Date,s=new Date(i.getFullYear(),i.getMonth(),i.getDate()).getTime(),o=new Date(i.setDate(i.getDate()-i.getDay())).getTime(),a=new Date(i.getFullYear(),i.getMonth(),1).getTime(),l=r.filter(e=>1e3*e.createdAt.seconds>=s).reduce((e,t)=>e+t.total,0),c=r.filter(e=>1e3*e.createdAt.seconds>=o).reduce((e,t)=>e+t.total,0),u=r.filter(e=>1e3*e.createdAt.seconds>=a).reduce((e,t)=>e+t.total,0),d=r.flatMap(e=>e.items).reduce((e,t)=>(e[t.id]=(e[t.id]||0)+t.quantity,e),{}),h=Object.entries(d).sort((e,t)=>t[1]-e[1]).slice(0,5).map(e=>{var t;let[r,i]=e;return{name:(null===(t=n.find(e=>e.id===r))||void 0===t?void 0:t.name)||"Unknown Product",quantity:i}}),f=n.filter(e=>e.quantity>0&&e.quantity<5);return(0,Ct.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Ct.jsxs)("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Sales Today"}),(0,Ct.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["EGP ",l.toFixed(2)]})]}),(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Sales This Week"}),(0,Ct.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["EGP ",c.toFixed(2)]})]}),(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Sales This Month"}),(0,Ct.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["EGP ",u.toFixed(2)]})]})]}),(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"font-medium text-gray-700",children:"Most Popular Products"}),(0,Ct.jsx)("ul",{className:"mt-2 space-y-2",children:h.map(e=>(0,Ct.jsxs)("li",{className:"text-sm text-gray-600 flex justify-between",children:[(0,Ct.jsx)("span",{children:e.name})," ",(0,Ct.jsxs)("strong",{children:[e.quantity," sold"]})]},e.name))})]}),(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow md:col-span-2",children:[(0,Ct.jsxs)("h4",{className:"font-medium text-gray-700",children:["Low Stock Alerts (",(0,Ct.jsx)("strong",{className:"text-red-500",children:"< ".concat(5)})," items)"]}),(0,Ct.jsx)("ul",{className:"mt-2 space-y-2",children:f.length>0?f.map(e=>(0,Ct.jsxs)("li",{className:"text-sm text-gray-600 flex justify-between",children:[(0,Ct.jsx)("span",{children:e.name})," ",(0,Ct.jsxs)("strong",{children:[e.quantity," left"]})]},e.id)):(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:"No products are low on stock."})})]})]})},lI=e=>{let{showNotification:t}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("percentage"),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[b,x]=(0,r.useState)(1),[E,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=tb(Hv(Ub,"coupons"),e=>{i(e.docs.map(e=>u({id:e.id},e.data()))),o(!1)});return()=>e()},[]);return(0,Ct.jsxs)("div",{children:[(0,Ct.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a||"free_delivery"!==c&&!h)return void t("Code and Value are required for this coupon type.");const n={code:a.toUpperCase(),type:c,value:"free_delivery"===c?null:Number(h),expiryDate:p?new Date(p):null,maxDiscount:g?Number(g):null,minPurchase:v?Number(v):null,usageLimit:b?Number(b):null,firstOrderOnly:E,createdAt:cb()};try{await Jw(Kv(Ub,"coupons",n.code),n),t("Coupon ".concat(n.code," added successfully.")),l(""),d("percentage"),f(""),m(""),y(""),w(""),x(1),S(!1)}catch(r){console.error(r),t("Error adding coupon.")}},className:"bg-white p-6 rounded-lg shadow mb-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ct.jsx)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800",children:"Create New Coupon"}),(0,Ct.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Coupon Code (e.g., SUMMER10)",className:"border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"border-gray-300 rounded-md shadow-sm",children:[(0,Ct.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,Ct.jsx)("option",{value:"fixed",children:"Fixed (EGP)"}),(0,Ct.jsx)("option",{value:"free_delivery",children:"Free Delivery"})]}),(0,Ct.jsx)("input",{type:"number",value:h,onChange:e=>f(e.target.value),placeholder:"Discount Value",className:"border-gray-300 rounded-md shadow-sm",disabled:"free_delivery"===c}),(0,Ct.jsx)("input",{type:"number",value:v,onChange:e=>w(e.target.value),placeholder:"Min. Purchase (EGP, Optional)",className:"border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",value:g,onChange:e=>y(e.target.value),placeholder:"Max Discount (EGP, Optional)",className:"border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",value:b,onChange:e=>x(e.target.value),placeholder:"Uses per User",className:"border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsxs)("div",{className:"flex items-center",children:[(0,Ct.jsx)("input",{type:"checkbox",id:"firstOrder",checked:E,onChange:e=>S(e.target.checked),className:"h-4 w-4 text-[#b08d57] border-gray-300 rounded"}),(0,Ct.jsx)("label",{htmlFor:"firstOrder",className:"ml-2 block text-sm text-gray-900",children:"First Order Only"})]}),(0,Ct.jsx)("button",{type:"submit",className:"md:col-span-2 py-2 bg-[#b08d57] text-white rounded-md hover:bg-[#9c7b4d] font-semibold",children:"Add Coupon"})]}),(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Existing Coupons"}),(0,Ct.jsxs)("ul",{className:"space-y-2",children:[s&&(0,Ct.jsx)("p",{children:"Loading coupons..."}),n.map(e=>{return(0,Ct.jsxs)("li",{className:"p-3 border rounded-md",children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-center font-semibold",children:[(0,Ct.jsx)("span",{className:"text-gray-900",children:e.code}),(0,Ct.jsx)("span",{className:"text-green-600",children:(r=e,"free_delivery"===r.type?"Free Delivery":"percentage"===r.type?"".concat(r.value,"% OFF"):"EGP ".concat(r.value," OFF"))}),(0,Ct.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this coupon?"))try{await eb(Kv(Ub,"coupons",e)),t("Coupon deleted.")}catch(n){console.error(n),t("Error deleting coupon.")}})(e.id),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]}),(0,Ct.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-1",children:[(0,Ct.jsxs)("span",{children:["Expires: ",(n=e.expiryDate,n?new Date(1e3*n.seconds).toLocaleDateString():"N/A")]}),(0,Ct.jsxs)("span",{children:["Min Purchase: ",e.minPurchase?"EGP ".concat(e.minPurchase):"N/A"]}),(0,Ct.jsxs)("span",{children:["Max Discount: ",e.maxDiscount?"EGP ".concat(e.maxDiscount):"N/A"]}),(0,Ct.jsxs)("span",{children:["Usage Limit: ",e.usageLimit||"N/A"]}),(0,Ct.jsxs)("span",{children:["First Order Only: ",e.firstOrderOnly?"Yes":"No"]})]})]},e.id);var n,r})]})]})]})},cI=e=>{let{users:t,onManageAdmin:n,onUserClick:i,onFilterChange:s}=e;const[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("");return(0,Ct.jsxs)("div",{children:[(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6 grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,Ct.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:e=>a(e.target.value),className:"md:col-span-2 p-2 border border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",placeholder:"Min. Total Spend (EGP)",value:l,onChange:e=>c(e.target.value),className:"p-2 border border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",placeholder:"Min. # of Orders",value:u,onChange:e=>d(e.target.value),className:"p-2 border border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("button",{onClick:()=>{s({search:o,minSpend:Number(l)||0,minOrders:Number(u)||0})},className:"md:col-span-2 py-2 bg-[#b08d57] text-white rounded-md font-semibold",children:"Apply Filters"}),(0,Ct.jsx)("button",{onClick:()=>{a(""),c(""),d(""),s({search:"",minSpend:0,minOrders:0})},className:"md:col-span-2 py-2 bg-gray-200 text-gray-800 rounded-md font-semibold",children:"Clear Filters"})]}),(0,Ct.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,Ct.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200",children:[t.map(e=>{var t;return(0,Ct.jsx)("li",{className:"p-4 sm:p-6 hover:bg-gray-50",children:(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name||"N/A"}),(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,Ct.jsxs)("div",{className:"text-xs text-gray-400 mt-1 space-x-4",children:[(0,Ct.jsxs)("span",{children:["Total Spent: EGP ",(null===(t=e.totalSpend)||void 0===t?void 0:t.toFixed(2))||0]}),(0,Ct.jsxs)("span",{children:["Total Orders: ",e.orderCount||0]})]})]}),(0,Ct.jsxs)("div",{className:"flex space-x-2",children:[(0,Ct.jsx)("button",{onClick:()=>i(e),className:"text-sm text-blue-600 hover:underline",children:"View Orders"}),(0,Ct.jsx)("button",{onClick:()=>n(e.uid,!e.isAdmin),className:"text-sm font-semibold ".concat(e.isAdmin?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),children:e.isAdmin?"Revoke Admin":"Make Admin"})]})]})},e.uid)}),0===t.length&&(0,Ct.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No users match the current filters."})]})})]})},uI=e=>{let{orders:t}=e;const[n,i]=(0,r.useState)("last7"),s=(0,r.useMemo)(()=>{const e=new Date,r=t.filter(e=>"Delivered"===e.status);if("allTime"===n)return r;const i=new Date;return"last7"===n?i.setDate(e.getDate()-7):"last30"===n&&i.setDate(e.getDate()-30),r.filter(e=>1e3*e.createdAt.seconds>=i.getTime())},[t,n]),o=s.reduce((e,t)=>e+t.total,0),a=s.length,l=a>0?o/a:0;return(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow space-y-6",children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Sales Report"}),(0,Ct.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"border-gray-300 rounded-md shadow-sm",children:[(0,Ct.jsx)("option",{value:"last7",children:"Last 7 Days"}),(0,Ct.jsx)("option",{value:"last30",children:"Last 30 Days"}),(0,Ct.jsx)("option",{value:"allTime",children:"All Time"})]})]}),(0,Ct.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[(0,Ct.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ct.jsx)("h5",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),(0,Ct.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["EGP ",o.toFixed(2)]})]}),(0,Ct.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ct.jsx)("h5",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),(0,Ct.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:a})]}),(0,Ct.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ct.jsx)("h5",{className:"text-sm font-medium text-gray-500",children:"Avg. Order Value"}),(0,Ct.jsxs)("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["EGP ",l.toFixed(2)]})]})]}),(0,Ct.jsx)("div",{children:(0,Ct.jsx)("button",{onClick:()=>{let e="data:text/csv;charset=utf-8,";e+="OrderID,Date,CustomerName,Total,Items\r\n",s.forEach(t=>{const n=new Date(1e3*t.createdAt.seconds).toLocaleDateString(),r=t.items.map(e=>"".concat(e.quantity,"x ").concat(e.name)).join("; ");e+="".concat(t.id,",").concat(n,',"').concat(t.customer.name,'",').concat(t.total,',"').concat(r,'"\r\n')});const t=encodeURI(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","sales_report_".concat(n,".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"w-full py-2 px-4 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700",children:"Download Report (CSV)"})})]})},dI=e=>{let{orders:t}=e;const n=(0,r.useMemo)(()=>{const e={};return t.filter(e=>"Delivered"===e.status&&e.coupon).forEach(t=>{const n=t.coupon.toUpperCase();e[n]||(e[n]={uses:0,totalDiscount:0}),e[n].uses+=1,e[n].totalDiscount+=t.discount||0}),Object.entries(e).sort((e,t)=>t[1].uses-e[1].uses)},[t]);return(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mt-8",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Coupon Performance"}),(0,Ct.jsxs)("div",{className:"overflow-x-auto",children:[(0,Ct.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ct.jsx)("thead",{className:"bg-gray-50",children:(0,Ct.jsxs)("tr",{children:[(0,Ct.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coupon Code"}),(0,Ct.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Times Used"}),(0,Ct.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Discounted"})]})}),(0,Ct.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{let[t,n]=e;return(0,Ct.jsxs)("tr",{children:[(0,Ct.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t}),(0,Ct.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.uses}),(0,Ct.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["EGP ",n.totalDiscount.toFixed(2)]})]},t)})})]}),0===n.length&&(0,Ct.jsx)("p",{className:"text-center py-4 text-gray-500",children:"No coupons have been used on completed orders yet."})]})]})},hI=e=>{let{showNotification:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!0),c=Kv(Ub,"storeSettings","announcement");(0,r.useEffect)(()=>{const e=tb(c,e=>{if(e.exists()){const t=e.data();i(t.text||""),o(t.isActive||!1)}l(!1)});return()=>e()},[]);return a?(0,Ct.jsx)("p",{children:"Loading announcement settings..."}):(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Site-Wide Announcement"}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"banner-text",className:"block text-sm font-medium text-gray-700",children:"Banner Text"}),(0,Ct.jsx)("input",{id:"banner-text",type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"e.g., Free shipping on orders over EGP 1000!",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsx)("span",{className:"text-gray-700 font-medium",children:"Display Banner"}),(0,Ct.jsx)("label",{className:"flex items-center cursor-pointer",children:(0,Ct.jsxs)("div",{className:"relative",children:[(0,Ct.jsx)("input",{type:"checkbox",checked:s,onChange:()=>o(!s),className:"sr-only"}),(0,Ct.jsx)("div",{className:"block bg-gray-300 w-14 h-8 rounded-full"}),(0,Ct.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition ".concat(s?"transform translate-x-full bg-green-500":"")})]})})]}),(0,Ct.jsx)("button",{onClick:async()=>{try{await Jw(c,{text:n,isActive:s}),t("Announcement banner updated successfully!")}catch(e){console.error("Error updating announcement:",e),t("Failed to update announcement.")}},className:"w-full py-2 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Save Announcement"})]})},fI=e=>{let{showNotification:t}=e;const[n,i]=(0,r.useState)({alexandria:0,cairo:0,other:0}),[s,o]=(0,r.useState)(!0),a=Kv(Ub,"storeSettings","delivery");(0,r.useEffect)(()=>{const e=tb(a,e=>{e.exists()&&i(e.data()),o(!1)});return()=>e()},[]);const l=e=>{const{name:t,value:n}=e.target;i(e=>u(u({},e),{},{[t]:n}))};return s?(0,Ct.jsx)("p",{children:"Loading delivery settings..."}):(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mt-8 space-y-4",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Delivery Pricing (EGP)"}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"alexandria",className:"block text-sm font-medium text-gray-700",children:"Alexandria"}),(0,Ct.jsx)("input",{id:"alexandria",name:"alexandria",type:"number",value:n.alexandria,onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"cairo",className:"block text-sm font-medium text-gray-700",children:"Cairo"}),(0,Ct.jsx)("input",{id:"cairo",name:"cairo",type:"number",value:n.cairo,onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"other",className:"block text-sm font-medium text-gray-700",children:"Other Cities"}),(0,Ct.jsx)("input",{id:"other",name:"other",type:"number",value:n.other,onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsx)("button",{onClick:async()=>{try{const e={alexandria:Number(n.alexandria)||0,cairo:Number(n.cairo)||0,other:Number(n.other)||0};await Jw(a,e),t("Delivery costs updated successfully!")}catch(e){console.error("Error updating delivery costs:",e),t("Failed to update delivery costs.")}},className:"w-full py-2 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Save Delivery Costs"})]})},pI=e=>{let{showNotification:t}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),p=Hv(Ub,"storeSettings","banners","slides");(0,r.useEffect)(()=>{const e=tb(Pw(p,Lw("createdAt","asc")),e=>{i(e.docs.map(e=>u({id:e.id},e.data()))),o(!1)});return()=>e()},[]);return(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mt-8 space-y-6",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"Homepage Banners"}),(0,Ct.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c){l(!0);try{await function(e,t){const n=Mv(e.firestore,Yv),r=Kv(e),i=zw(e.converter,t);return nb(n,[cw(lw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Dp.exists(!1))]).then(()=>r)}(p,{imageUrl:c,linkUrl:h,createdAt:cb()}),t("New banner added successfully!"),d(""),f("")}catch(n){console.error("Error adding banner:",n),t("Failed to add banner.")}finally{l(!1)}}else t("Please provide an image URL.")},className:"space-y-4 p-4 border rounded-md",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),(0,Ct.jsx)("input",{id:"imageUrl",type:"url",value:c,onChange:e=>d(e.target.value),placeholder:"https://...",className:"mt-1 w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"linkUrl",className:"block text-sm font-medium text-gray-700",children:"Optional: Hyperlink"}),(0,Ct.jsx)("input",{id:"linkUrl",type:"url",value:h,onChange:e=>f(e.target.value),placeholder:"https://...",className:"mt-1 w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Ct.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 disabled:bg-gray-400",children:a?"Saving...":"Add New Banner"})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("h5",{className:"text-md font-semibold text-gray-700 mb-2",children:"Current Banners"}),s&&(0,Ct.jsx)("p",{children:"Loading banners..."}),(0,Ct.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,Ct.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[(0,Ct.jsx)("img",{src:e.imageUrl,alt:"Banner",className:"h-16 w-32 object-cover rounded-md",onError:e=>e.target.style.display="none"}),(0,Ct.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate mx-4",children:e.linkUrl||"No link"}),(0,Ct.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this banner?"))try{await eb(Kv(Ub,"storeSettings","banners","slides",e.id)),t("Banner deleted successfully.")}catch(n){console.error("Error deleting banner:",n),t("Failed to delete banner.")}})(e),className:"text-red-500 hover:text-red-700 font-semibold",children:"Delete"})]},e.id))})]})]})},mI=e=>{let{searchData:t}=e;const{topSearches:n,noResultsSearches:i}=(0,r.useMemo)(()=>{if(!t||0===Object.keys(t).length)return{topSearches:[],noResultsSearches:[]};const e=Object.values(t),n=[...e].sort((e,t)=>t.count-e.count).slice(0,10),r=e.filter(e=>!e.foundResults).sort((e,t)=>t.count-e.count).slice(0,10);return{topSearches:n,noResultsSearches:r}},[t]);return(0,Ct.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-8",children:[(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top Customer Searches"}),(0,Ct.jsx)("ul",{className:"divide-y divide-gray-200",children:n.length>0?n.map(e=>(0,Ct.jsxs)("li",{className:"py-2 flex justify-between items-center",children:[(0,Ct.jsx)("span",{className:"text-gray-700",children:e.term}),(0,Ct.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.count," searches"]})]},e.term)):(0,Ct.jsx)("p",{className:"text-center py-4 text-gray-500",children:"No search data yet."})})]}),(0,Ct.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Searches With No Results"}),(0,Ct.jsx)("ul",{className:"divide-y divide-gray-200",children:i.length>0?i.map(e=>(0,Ct.jsxs)("li",{className:"py-2 flex justify-between items-center",children:[(0,Ct.jsx)("span",{className:"text-red-600 font-medium",children:e.term}),(0,Ct.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.count," searches"]})]},e.term)):(0,Ct.jsx)("p",{className:"text-center py-4 text-gray-500",children:"No unsuccessful searches recorded yet."})})]})]})},gI=e=>{let{selectedCount:t,onBulkSale:n,onBulkDelete:i,onBulkSetNewArrival:s,onClearSelection:o,onBulkAssignCategory:a}=e;const[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("");return(0,Ct.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg mb-6 border border-gray-200",children:(0,Ct.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Ct.jsxs)("p",{className:"text-sm font-semibold text-gray-800",children:[t," product(s) selected"]}),(0,Ct.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ct.jsx)("input",{type:"text",placeholder:"Category Name",value:u,onChange:e=>d(e.target.value),className:"w-32 p-2 border border-gray-300 rounded-md shadow-sm text-sm"}),(0,Ct.jsx)("button",{onClick:()=>{u.trim()?(a(u),d("")):alert("Please enter a category name.")},className:"px-3 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700",children:"Assign Category"})]}),(0,Ct.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ct.jsx)("input",{type:"number",placeholder:"% Sale",value:l,onChange:e=>c(e.target.value),className:"w-24 p-2 border border-gray-300 rounded-md shadow-sm text-sm"}),(0,Ct.jsx)("button",{onClick:()=>{const e=parseInt(l,10);isNaN(e)||e<=0||e>100?alert("Please enter a valid sale percentage (1-100)."):(n(e),c(""))},className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Apply Sale"})]}),(0,Ct.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ct.jsx)("button",{onClick:()=>s(!0),className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:"Set as New"}),(0,Ct.jsx)("button",{onClick:()=>s(!1),className:"px-3 py-2 bg-yellow-500 text-white text-sm rounded-md hover:bg-yellow-600",children:"Remove New"}),(0,Ct.jsx)("button",{onClick:i,className:"px-3 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700",children:"Delete"})]}),(0,Ct.jsx)("button",{onClick:o,className:"text-sm text-gray-600 hover:underline",children:"Clear Selection"})]})})},yI=e=>{let{products:t,onImport:n}=e;return(0,Ct.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mt-6 border border-gray-200",children:[(0,Ct.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Bulk Import / Export"}),(0,Ct.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Ct.jsx)("p",{className:"text-sm text-gray-600",children:"Download your product data to edit in bulk or upload a file to update your store."}),(0,Ct.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ct.jsx)("button",{onClick:()=>{const e=["id","name","description","price","salePrice","quantity","category","isNew","keywords","imageUrls"],n=t.map(t=>e.map(e=>{let n=t[e];return Array.isArray(n)?'"'.concat(n.join(";"),'"'):"string"===typeof n&&n.includes(",")?'"'.concat(n,'"'):n}).join(",")),r="data:text/csv;charset=utf-8,"+e.join(",")+"\r\n"+n.join("\r\n"),i=encodeURI(r),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","ukiyo_products.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"px-4 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:"Export as CSV"}),(0,Ct.jsxs)("label",{className:"px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 cursor-pointer",children:[(0,Ct.jsx)("span",{children:"Import from CSV"}),(0,Ct.jsx)("input",{type:"file",accept:".csv",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{n(e.target.result)},e.readAsText(t)}e.target.value=null},className:"hidden"})]})]})]})]})},vI=e=>{let{orders:t,products:n,users:i,onUpdateStatus:s,onAddProductClick:o,onEditProductClick:a,onDeleteProduct:l,showNotification:c,onManageAdmin:u,onUserClick:d,searchAnalytics:h,onBulkSale:f,onBulkDelete:p,onBulkSetNewArrival:m,onFilterChange:g,onCSVImport:y,onBulkAssignCategory:v}=e;const[w,b]=(0,r.useState)("analytics"),[x,E]=(0,r.useState)([]),S={Placed:"bg-yellow-100 text-yellow-800","Out for Delivery":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"};return(0,Ct.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Ct.jsxs)("div",{className:"text-center mb-12",children:[(0,Ct.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 sm:text-4xl",children:"Admin Dashboard"}),(0,Ct.jsx)("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-600",children:"Manage your store's performance and operations."})]}),(0,Ct.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,Ct.jsxs)("nav",{className:"-mb-px flex space-x-8 justify-center flex-wrap","aria-label":"Tabs",children:[(0,Ct.jsx)("button",{onClick:()=>b("analytics"),className:"".concat("analytics"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Analytics"}),(0,Ct.jsx)("button",{onClick:()=>b("reports"),className:"".concat("reports"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Reports"}),(0,Ct.jsx)("button",{onClick:()=>b("orders"),className:"".concat("orders"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Orders"}),(0,Ct.jsx)("button",{onClick:()=>b("products"),className:"".concat("products"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Products"}),(0,Ct.jsx)("button",{onClick:()=>b("users"),className:"".concat("users"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Users"}),(0,Ct.jsx)("button",{onClick:()=>b("coupons"),className:"".concat("coupons"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Coupons"}),(0,Ct.jsx)("button",{onClick:()=>b("banners"),className:"".concat("banners"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Banners"}),(0,Ct.jsx)("button",{onClick:()=>b("settings"),className:"".concat("settings"===w?"border-[#b08d57] text-[#b08d57]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:"Settings"})]})}),"analytics"===w&&(0,Ct.jsx)(aI,{orders:t,products:n}),"reports"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Reports"}),(0,Ct.jsx)(uI,{orders:t}),(0,Ct.jsx)(dI,{orders:t}),(0,Ct.jsx)(mI,{searchData:h})]}),"products"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Product Management"}),(0,Ct.jsx)("button",{onClick:o,className:"px-4 py-2 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d] shadow-md hover:shadow-lg transition-all",children:"+ Add Product"})]}),(0,Ct.jsx)(yI,{products:n,onImport:y}),x.length>0&&(0,Ct.jsx)(gI,{selectedCount:x.length,onBulkSale:e=>{f(x,e),E([])},onBulkDelete:()=>{l(x),E([])},onBulkSetNewArrival:e=>{m(x,e),E([])},onBulkAssignCategory:e=>{v(x,e),E([])},onClearSelection:()=>E([])}),(0,Ct.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md mt-6",children:(0,Ct.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200",children:[(0,Ct.jsxs)("li",{className:"p-4 bg-gray-50 flex items-center",children:[(0,Ct.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-[#b08d57] focus:ring-[#b08d57]",onChange:()=>{n.length>0&&x.length===n.length?E([]):E(n.map(e=>e.id))},checked:n.length>0&&x.length===n.length,ref:e=>e&&(e.indeterminate=x.length>0&&x.length<n.length)}),(0,Ct.jsx)("label",{className:"ml-3 text-sm font-medium text-gray-700",children:"Select All"})]}),n.map(e=>(0,Ct.jsxs)("li",{className:"p-4 sm:p-6 flex items-center justify-between",children:[(0,Ct.jsxs)("div",{className:"flex items-center",children:[(0,Ct.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-[#b08d57] focus:ring-[#b08d57]",checked:x.includes(e.id),onChange:()=>{return t=e.id,void E(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}}),(0,Ct.jsxs)("div",{className:"ml-4",children:[(0,Ct.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Ct.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id," | Qty: ",e.quantity]})]})]}),(0,Ct.jsxs)("div",{className:"flex space-x-2",children:[(0,Ct.jsx)("button",{onClick:()=>a(e),className:"text-sm text-blue-600 hover:underline",children:"Edit"}),(0,Ct.jsx)("button",{onClick:()=>l([e.id]),className:"text-sm text-red-600 hover:underline",children:"Delete"})]})]},e.id))]})})]}),"orders"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Order Management"}),(0,Ct.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,Ct.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:t.map(e=>(0,Ct.jsxs)("li",{className:"p-4 sm:p-6",children:[(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsxs)("p",{className:"text-sm font-medium text-gray-600 truncate",children:["Order #",e.id.substring(0,6)]}),(0,Ct.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,Ct.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(S[e.status]||"bg-gray-100 text-gray-800"),children:e.status})})]}),(0,Ct.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,Ct.jsxs)("div",{className:"sm:flex flex-col",children:[(0,Ct.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[e.customer.name," (",e.customer.phone,")"]}),(0,Ct.jsxs)("p",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[e.customer.address,", ",e.customer.city]})]}),(0,Ct.jsx)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:(0,Ct.jsxs)("p",{className:"font-bold",children:["EGP ",e.total.toFixed(2)]})})]}),(0,Ct.jsxs)("div",{className:"mt-4",children:[(0,Ct.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Items:"}),(0,Ct.jsx)("ul",{className:"list-disc pl-5 mt-1 text-sm text-gray-500",children:e.items.map(e=>(0,Ct.jsxs)("li",{children:[e.quantity," x ",e.name]},e.id))})]}),(0,Ct.jsxs)("div",{className:"mt-4",children:[(0,Ct.jsx)("label",{htmlFor:"status-".concat(e.id),className:"sr-only",children:"Update Status"}),(0,Ct.jsxs)("select",{id:"status-".concat(e.id),value:e.status,onChange:t=>s(e.id,t.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-[#b08d57] focus:border-[#b08d57] sm:text-sm rounded-md",children:[(0,Ct.jsx)("option",{children:"Placed"}),(0,Ct.jsx)("option",{children:"Out for Delivery"}),(0,Ct.jsx)("option",{children:"Delivered"}),(0,Ct.jsx)("option",{children:"Cancelled"})]})]})]},e.id))})})]}),"users"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"User Management"}),(0,Ct.jsx)(cI,{users:i,onManageAdmin:u,onUserClick:d,onFilterChange:g})]}),"coupons"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Coupon Management"}),(0,Ct.jsx)(lI,{showNotification:c})]}),"banners"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Homepage Banners"}),(0,Ct.jsx)(pI,{showNotification:c})]}),"settings"===w&&(0,Ct.jsxs)("section",{children:[(0,Ct.jsx)("h3",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Store Settings"}),(0,Ct.jsx)(hI,{showNotification:c}),(0,Ct.jsx)(fI,{showNotification:c})]})]})},wI={Placed:"bg-yellow-100 text-yellow-800","Out for Delivery":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},bI=e=>{let{isOpen:t,onClose:n,user:r,orders:i}=e;return t?(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,Ct.jsx)("div",{className:"p-4 border-b",children:(0,Ct.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Order History for ",r.name]}),(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:r.email})]}),(0,Ct.jsx)("button",{onClick:n,className:"p-2 -mr-2 rounded-full text-gray-500 hover:bg-gray-100 text-2xl",children:"\xd7"})]})}),(0,Ct.jsx)("div",{className:"overflow-y-auto",children:i.length>0?(0,Ct.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:i.map(e=>{var t;return(0,Ct.jsxs)("li",{className:"p-4 sm:p-6",children:[(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsxs)("p",{className:"text-sm font-medium text-gray-600 truncate",children:["Order #",e.id.substring(0,6)]}),(0,Ct.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,Ct.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(wI[e.status]||"bg-gray-100 text-gray-800"),children:e.status})})]}),(0,Ct.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,Ct.jsx)("p",{className:"flex items-center text-sm text-gray-500",children:new Date(1e3*(null===(t=e.createdAt)||void 0===t?void 0:t.seconds)).toLocaleDateString()}),(0,Ct.jsxs)("p",{className:"mt-2 flex items-center text-sm font-bold text-gray-800 sm:mt-0 sm:ml-6",children:["EGP ",e.total.toFixed(2)]})]})]},e.id)})}):(0,Ct.jsx)("p",{className:"p-8 text-center text-gray-500",children:"This user has not placed any orders."})})]})}):null},xI=e=>{const[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)({}),[l,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)({search:"",minSpend:0,minOrders:0});(0,r.useEffect)(()=>{const e=tb(Pw(Hv(Ub,"orders"),Lw("createdAt","desc")),e=>{n(e.docs.map(e=>u({id:e.id},e.data())))}),t=tb(Hv(Ub,"users"),async e=>{const t=await Promise.all(e.docs.map(async e=>{const t=Kv(Ub,"admins",e.id),n=await Yw(t);return u(u({uid:e.id},e.data()),{},{isAdmin:n.exists()})}));s(t),c(!1)}),r=tb(Hv(Ub,"searchAnalytics"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),a(t)});return()=>{e(),t(),r()}},[]);const y=(0,r.useMemo)(()=>{const e=i.map(e=>{const n=t.filter(t=>t.userId===e.uid&&"Delivered"===t.status),r=n.reduce((e,t)=>e+t.total,0);return u(u({},e),{},{orderCount:n.length,totalSpend:r})});return e.filter(e=>{var t,n;const r=m.search.toLowerCase(),i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(r)),s=e.totalSpend>=m.minSpend,o=e.orderCount>=m.minOrders;return i&&s&&o})},[i,t,m]);return l?(0,Ct.jsx)("div",{className:"text-center py-20",children:"Loading Admin Panel..."}):(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)(vI,u({orders:t,users:y,searchAnalytics:o,onManageAdmin:async(t,n)=>{if(window.confirm("Are you sure you want to ".concat(n?"grant":"revoke"," admin privileges?"))){const r=Kv(Ub,"admins",t);n?(await Jw(r,{}),e.showNotification("Admin privileges granted.")):(await eb(r),e.showNotification("Admin privileges revoked."))}},onUserClick:async e=>{h(e);const t=Pw(Hv(Ub,"orders"),Rw("userId","==",e.uid),Lw("createdAt","desc")),n=await $w(t);p(n.docs.map(e=>u({id:e.id},e.data())))},onFilterChange:g,onUpdateStatus:async(t,n)=>{const r=Kv(Ub,"orders",t);await Zw(r,{status:n}),e.showNotification("Order status updated to ".concat(n,"."))},onBulkSale:async(t,n)=>{if(!window.confirm("Are you sure you want to apply a ".concat(n,"% discount to ").concat(t.length," products?")))return;const r=ub(Ub);t.forEach(t=>{const i=e.products.find(e=>e.id===t);if(i){const e=i.price*(1-n/100),s=Kv(Ub,"products",t);r.update(s,{salePrice:Math.round(e)})}}),await r.commit(),e.showNotification("".concat(t.length," products updated with a ").concat(n,"% sale."))},onBulkSetNewArrival:async(t,n)=>{const r=n?"set as new arrival":"remove from new arrivals";if(!window.confirm("Are you sure you want to ".concat(r," for ").concat(t.length," products?")))return;const i=ub(Ub);t.forEach(e=>{const t=Kv(Ub,"products",e);i.update(t,{isNew:n})}),await i.commit(),e.showNotification("".concat(t.length," products updated."))}},e)),(0,Ct.jsx)(bI,{isOpen:!!d,onClose:()=>h(null),user:d,orders:f})]})},EI=e=>{let{showCart:t,setShowCart:n,cart:r,updateCartItem:i,removeFromCart:s,openCheckout:o,getStylingAdvice:a}=e;if(!t)return null;const l=r.reduce((e,t)=>e+Number(t.salePrice||t.price)*t.quantity,0);return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>n(!1),children:(0,Ct.jsxs)("div",{className:"fixed right-0 top-0 h-full w-full max-w-sm bg-[#b08d57]/50 backdrop-blur-md shadow-xl flex flex-col border-l border-white/20",onClick:e=>e.stopPropagation(),children:[(0,Ct.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[(0,Ct.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Shopping Cart"}),(0,Ct.jsx)("button",{onClick:()=>n(!1),className:"p-2 rounded-full text-white hover:bg-white/20 text-2xl",children:"\xd7"})]}),0===r.length?(0,Ct.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center text-white p-8",children:[(0,Ct.jsx)("svg",{className:"h-16 w-16 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,Ct.jsx)("p",{className:"text-lg",children:"Your cart is empty."}),(0,Ct.jsx)("button",{onClick:()=>n(!1),className:"mt-4 px-6 py-2 bg-white text-[#b08d57] font-semibold rounded-md hover:bg-gray-200",children:"Continue Shopping"})]}):(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:r.map(e=>{const t=e.imageUrls&&e.imageUrls[0]||"https://placehold.co/80x80/cccccc/ffffff?text=No+Image";return(0,Ct.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Ct.jsx)("img",{src:t,alt:e.name,className:"w-20 h-20 object-cover rounded-md border border-white/10"}),(0,Ct.jsxs)("div",{className:"flex-grow",children:[(0,Ct.jsx)("h3",{className:"text-md font-medium text-white",children:e.name}),(0,Ct.jsx)("div",{className:"flex items-center gap-2",children:e.salePrice?(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsxs)("p",{className:"text-sm text-red-400 font-bold",children:["EGP ",Number(e.salePrice||0).toFixed(2)]}),(0,Ct.jsxs)("p",{className:"text-xs text-gray-200 line-through",children:["EGP ",Number(e.price||0).toFixed(2)]})]}):(0,Ct.jsxs)("p",{className:"text-sm text-gray-200",children:["EGP ",Number(e.price||0).toFixed(2)]})}),(0,Ct.jsxs)("div",{className:"flex items-center mt-2",children:[(0,Ct.jsx)("button",{onClick:()=>i(e.id,e.quantity-1),className:"px-2 py-1 border border-white/30 rounded-md text-white",children:"-"}),(0,Ct.jsx)("span",{className:"px-3 text-white",children:e.quantity}),(0,Ct.jsx)("button",{onClick:()=>i(e.id,e.quantity+1),className:"px-2 py-1 border border-white/30 rounded-md text-white",children:"+"})]})]}),(0,Ct.jsxs)("div",{className:"text-right",children:[(0,Ct.jsxs)("p",{className:"font-semibold text-white",children:["EGP ",(Number(e.salePrice||e.price)*e.quantity).toFixed(2)]}),(0,Ct.jsx)("button",{onClick:()=>s(e.id),className:"text-red-400 hover:text-red-300 text-sm mt-2 font-semibold",children:"Remove"})]})]},e.id)})}),(0,Ct.jsxs)("div",{className:"p-4 border-t border-white/20",children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold text-white",children:[(0,Ct.jsx)("span",{children:"Subtotal"}),(0,Ct.jsxs)("span",{children:["EGP ",l.toFixed(2)]})]}),(0,Ct.jsx)("p",{className:"text-sm text-gray-200 mt-1",children:"Shipping calculated at checkout."}),(0,Ct.jsx)("button",{onClick:a,className:"w-full mt-4 py-3 px-4 bg-white/20 text-white font-semibold rounded-md hover:bg-white/30 transition-colors",children:"\u2728 Get Styling Advice"}),(0,Ct.jsx)("button",{onClick:o,className:"w-full mt-2 py-3 px-4 bg-white text-[#b08d57] font-semibold rounded-md hover:bg-gray-200",children:"Proceed to Checkout"})]})]})]})})},SI=["Cairo","Alexandria","Giza","Shubra El-Kheima","Port Said","Suez","Luxor","al-Mansura","El-Mahalla El-Kubra","Tanta","Asyut","Ismailia","Fayyum","Zagazig","Aswan","Damietta","Damanhur","al-Minya","Beni Suef","Qena","Sohag","Hurghada","6th of October City","Shibin El Kom","Banha","Kafr el-Sheikh","Arish","Belbeis","Marsa Matruh","Kafr El Dawwar","Qalyub","Abu Kabir"].sort(),kI=e=>{let{isOpen:t,onClose:n,cart:i,placeOrder:s,userInfo:o,onApplyCoupon:a,couponError:l,discount:c,deliveryCosts:u,isFreeDelivery:d}=e;const[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[b,x]=(0,r.useState)(0),[E,S]=(0,r.useState)("cod"),[k,_]=(0,r.useState)("");if((0,r.useEffect)(()=>{o&&(f(o.name||""),m(o.phone||""),y(o.city||""),w(o.address||""))},[o]),(0,r.useEffect)(()=>{if(g){const e=g.toLowerCase();u&&void 0!==u[e]?x(u[e]):u&&x(u.other)}else x(0)},[g,u]),!t)return null;const C=i.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),T=d?0:b,N=C-c+T;return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[95vh] overflow-y-auto",children:(0,Ct.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={customer:{name:h,phone:p,city:g,address:v},items:i,subtotal:C,shipping:T,discount:c,coupon:k.toUpperCase(),total:N,paymentMethod:E,status:"Placed"};s&&s(t)},className:"p-6",children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Checkout"}),(0,Ct.jsx)("button",{type:"button",onClick:n,className:"p-1 rounded-full text-gray-500 hover:bg-gray-100 text-3xl leading-none",children:"\xd7"})]}),(0,Ct.jsxs)("div",{className:"space-y-4",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Shipping Information"}),(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:"Enter your details for delivery."})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,Ct.jsx)("input",{type:"text",id:"name",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,Ct.jsx)("input",{type:"tel",id:"phone",value:p,onChange:e=>m(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Ct.jsxs)("select",{id:"city",value:g,onChange:e=>y(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0,children:[(0,Ct.jsx)("option",{value:"",children:"Select a City"}),SI.map(e=>(0,Ct.jsx)("option",{value:e,children:e},e))]})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Full Address (Street, Building, Apartment)"}),(0,Ct.jsx)("input",{type:"text",id:"address",value:v,onChange:e=>w(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{className:"pt-4",children:[(0,Ct.jsx)("label",{htmlFor:"coupon",className:"block text-sm font-medium text-gray-700",children:"Coupon Code"}),(0,Ct.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,Ct.jsx)("input",{type:"text",id:"coupon",value:k,onChange:e=>_(e.target.value),className:"flex-1 block w-full min-w-0 rounded-none rounded-l-md border-gray-300",placeholder:"e.g., SUMMER10"}),(0,Ct.jsx)("button",{type:"button",onClick:()=>a(k),className:"inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm hover:bg-gray-100",children:"Apply"})]}),l&&(0,Ct.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l}),c>0&&(0,Ct.jsxs)("p",{className:"text-green-600 text-sm mt-1",children:["Success! EGP ",c.toFixed(2)," discount applied."]}),d&&(0,Ct.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"Success! Free delivery applied."})]}),(0,Ct.jsxs)("div",{className:"pt-4",children:[(0,Ct.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Payment Method"}),(0,Ct.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,Ct.jsxs)("label",{className:"flex items-center p-3 border rounded-md has-[:checked]:bg-amber-50 has-[:checked]:border-amber-400",children:[(0,Ct.jsx)("input",{type:"radio",name:"payment",value:"cod",checked:"cod"===E,onChange:()=>S("cod"),className:"h-4 w-4 text-[#b08d57] border-gray-300"}),(0,Ct.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Cash on Delivery"})]}),(0,Ct.jsxs)("label",{className:"flex items-center p-3 border rounded-md has-[:checked]:bg-amber-50 has-[:checked]:border-amber-400",children:[(0,Ct.jsx)("input",{type:"radio",name:"payment",value:"card",checked:"card"===E,onChange:()=>S("card"),className:"h-4 w-4 text-[#b08d57] border-gray-300",disabled:!0}),(0,Ct.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-500",children:"Credit Card (coming soon)"})]})]})]}),(0,Ct.jsxs)("div",{className:"border-t pt-4 mt-4 space-y-2",children:[(0,Ct.jsxs)("div",{className:"flex justify-between text-md text-gray-600",children:[(0,Ct.jsx)("span",{children:"Subtotal"}),(0,Ct.jsxs)("span",{children:["EGP ",C.toFixed(2)]})]}),c>0&&(0,Ct.jsxs)("div",{className:"flex justify-between text-md text-green-600",children:[(0,Ct.jsx)("span",{children:"Discount"}),(0,Ct.jsxs)("span",{children:["- EGP ",c.toFixed(2)]})]}),(0,Ct.jsxs)("div",{className:"flex justify-between text-md ".concat(d?"text-green-600":"text-gray-600"),children:[(0,Ct.jsx)("span",{children:"Shipping"}),d?(0,Ct.jsx)("span",{className:"font-semibold",children:"FREE"}):(0,Ct.jsxs)("span",{children:["EGP ",b.toFixed(2)]})]}),(0,Ct.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold text-gray-800",children:[(0,Ct.jsx)("span",{children:"Grand Total"}),(0,Ct.jsxs)("span",{children:["EGP ",N.toFixed(2)]})]})]}),(0,Ct.jsx)("button",{type:"submit",className:"w-full mt-4 py-3 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d] disabled:bg-gray-400",disabled:!g,children:g?"Place Order":"Please Select a City"})]})]})})})},_I=e=>{let{isOpen:t,onClose:n,onLogin:i,onRegister:s,onGoogleSignIn:o,onSendLink:a}=e;const[l,c]=(0,r.useState)("password"),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,w]=(0,r.useState)("");if(!t)return null;const b=e=>{e.preventDefault(),w(""),u?s(g,h,p):i(h,p)},x=e=>{e.preventDefault(),w(""),a(h),w("A sign-in link has been sent to ".concat(h,". Check your inbox!")),c("message")};return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm text-center p-8 relative",children:[(0,Ct.jsx)("button",{onClick:n,className:"absolute top-2 right-2 p-1 rounded-full text-gray-500 hover:bg-gray-100",children:"\xd7"}),"password"===l&&(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:u?"Create Account":"Login to Ukiyo"}),(0,Ct.jsxs)("form",{onSubmit:b,className:"mt-6 space-y-4 text-left",children:[u&&(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"name-auth",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,Ct.jsx)("input",{type:"text",id:"name-auth",value:g,onChange:e=>y(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"email-auth",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Ct.jsx)("input",{type:"email",id:"email-auth",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"password-auth",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,Ct.jsx)("input",{type:"password",id:"password-auth",value:p,onChange:e=>m(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsx)("button",{type:"submit",className:"w-full mt-4 py-2 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:u?"Register":"Login"})]}),(0,Ct.jsxs)("div",{className:"my-4 flex items-center",children:[(0,Ct.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Ct.jsx)("span",{className:"flex-shrink mx-4 text-gray-400 text-sm",children:"OR"}),(0,Ct.jsx)("div",{className:"flex-grow border-t border-gray-300"})]}),(0,Ct.jsxs)("button",{onClick:o,className:"w-full flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,Ct.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[(0,Ct.jsx)("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),(0,Ct.jsx)("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.42-4.55H24v8.51h12.8c-.57 3.02-2.31 5.48-4.79 7.21l7.47 5.81C43.34 38.08 46.98 32.08 46.98 24.55z"}),(0,Ct.jsx)("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),(0,Ct.jsx)("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.47-5.81c-2.15 1.45-4.92 2.3-8.42 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),(0,Ct.jsx)("path",{fill:"none",d:"M0 0h48v48H0z"})]}),"Sign in with Google"]}),(0,Ct.jsxs)("div",{className:"mt-4 flex justify-center items-center space-x-4",children:[(0,Ct.jsx)("button",{onClick:()=>d(!u),className:"text-sm text-[#b08d57] hover:underline",children:u?"Already have an account? Login":"Don't have an account? Register"}),(0,Ct.jsx)("button",{onClick:()=>c("link"),className:"text-sm text-gray-600 hover:underline",children:"Use sign-in link"})]})]}),"link"===l&&(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Sign in with Email Link"}),(0,Ct.jsx)("p",{className:"mt-2 text-gray-600 text-sm",children:"Enter your email to receive a password-free sign-in link."}),(0,Ct.jsxs)("form",{onSubmit:x,className:"mt-6 space-y-4 text-left",children:[(0,Ct.jsxs)("div",{children:[(0,Ct.jsx)("label",{htmlFor:"email-link",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Ct.jsx)("input",{type:"email",id:"email-link",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),(0,Ct.jsx)("button",{type:"submit",className:"w-full mt-4 py-2 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Send Link"})]}),(0,Ct.jsx)("div",{className:"mt-4",children:(0,Ct.jsx)("button",{onClick:()=>c("password"),className:"text-sm text-gray-600 hover:underline",children:"Back to password login"})})]}),"message"===l&&(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Check your Email"}),(0,Ct.jsx)("p",{className:"mt-4 text-gray-600",children:v}),(0,Ct.jsx)("button",{onClick:n,className:"w-full mt-6 py-2 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Close"})]})]})})},CI=e=>{let{data:t,onClose:n}=e;const[i,s]=(0,r.useState)(t.index),o=(0,r.useRef)(0),a=(0,r.useRef)(0),l=(0,r.useCallback)(()=>{s(e=>(e+1)%t.images.length)},[t.images]),c=(0,r.useCallback)(()=>{s(e=>(e-1+t.images.length)%t.images.length)},[t.images]);return(0,r.useEffect)(()=>{const e=e=>{"ArrowRight"===e.key&&l(),"ArrowLeft"===e.key&&c(),"Escape"===e.key&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,c,n]),(0,Ct.jsxs)(RN.div,{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center",onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,Ct.jsx)("div",{className:"relative max-w-4xl max-h-[90vh] w-full h-full flex items-center justify-center overflow-hidden",onClick:e=>e.stopPropagation(),onTouchStart:e=>{o.current=e.touches[0].clientX},onTouchMove:e=>{a.current=e.touches[0].clientX},onTouchEnd:()=>{o.current-a.current>75?l():a.current-o.current>75&&c()},children:(0,Ct.jsx)("div",{className:"flex items-center transition-transform duration-300 ease-in-out h-full w-full",style:{transform:"translateX(-".concat(100*i,"%)")},children:t.images.map((e,t)=>(0,Ct.jsx)("div",{className:"w-full h-full flex-shrink-0 flex items-center justify-center p-4",children:(0,Ct.jsx)("img",{src:e,alt:"Enlarged product",className:"max-w-full max-h-full object-contain"})},t))})}),(0,Ct.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"absolute top-4 right-4 text-white text-4xl cursor-pointer",children:"\xd7"}),t.images.length>1&&(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-4 rounded-full text-2xl",children:"\u2039"}),(0,Ct.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-4 rounded-full text-2xl",children:"\u203a"})]})]})},TI=e=>{let{message:t,show:n}=e;return n?(0,Ct.jsx)("div",{className:"fixed top-24 right-5 bg-green-500 text-white py-2 px-4 rounded-md shadow-lg z-50",children:t}):null},NI=e=>{let{isOpen:t,onClose:n,isLoading:r,advice:i,error:s}=e;return t?(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-full overflow-y-auto p-6",children:[(0,Ct.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Ct.jsx)("h2",{className:"text-2xl font-serif text-gray-800",children:"\u2728 Ukiyo Styling Advice"}),(0,Ct.jsx)("button",{onClick:n,className:"p-1 rounded-full text-gray-500 hover:bg-gray-100",children:"\xd7"})]}),(0,Ct.jsxs)("div",{className:"mt-4 text-gray-600",children:[r&&(0,Ct.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,Ct.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#b08d57]"}),(0,Ct.jsx)("p",{className:"mt-4",children:"Our AI stylist is thinking..."})]}),s&&(0,Ct.jsx)("p",{className:"text-red-500",children:s}),i&&(0,Ct.jsx)("p",{className:"whitespace-pre-wrap font-serif leading-relaxed",children:i})]})]})}):null},II=e=>{let{isOpen:t,data:n,onClose:r}=e;return t?(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md text-center p-8",children:[(0,Ct.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,Ct.jsx)("svg",{className:"h-6 w-6 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,Ct.jsx)("h2",{className:"mt-4 text-2xl font-semibold text-gray-800",children:"Thank you for your order!"}),(0,Ct.jsx)("p",{className:"mt-2 text-gray-600",children:"Your order has been placed successfully."}),(0,Ct.jsxs)("div",{className:"mt-6 bg-[#b08d57]/10 rounded-lg p-4 text-left",children:[(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:"Order ID:"}),(0,Ct.jsx)("p",{className:"font-mono text-gray-800 font-semibold",children:n.orderId}),(0,Ct.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Total Amount:"}),(0,Ct.jsxs)("p",{className:"font-sans text-gray-800 font-bold text-lg",children:["EGP ",n.total.toFixed(2)]})]}),(0,Ct.jsx)("button",{onClick:r,className:"w-full mt-6 py-3 px-4 bg-[#b08d57] text-white font-semibold rounded-md hover:bg-[#9c7b4d]",children:"Continue Shopping"})]})}):null},AI=e=>{let{isOpen:t,onClose:n,onAddProduct:i}=e;const[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[x,E]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1);if(!t)return null;return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[95vh] overflow-y-auto",children:(0,Ct.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={id:s,name:a,description:c,price:parseFloat(d),salePrice:f?parseFloat(f):null,quantity:parseInt(m,10),category:y,imageUrls:w.split(",").map(e=>e.trim()),keywords:x.split(",").map(e=>e.trim().toLowerCase()),isNew:S};i(t)},className:"p-6",children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Add New Product"}),(0,Ct.jsxs)("div",{className:"space-y-4",children:[(0,Ct.jsx)("input",{type:"text",placeholder:"Product ID (e.g., prod9)",value:s,onChange:e=>o(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("input",{type:"text",placeholder:"Product Name",value:a,onChange:e=>l(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("textarea",{placeholder:"Description",value:c,onChange:e=>u(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",placeholder:"Price",value:d,onChange:e=>h(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("input",{type:"number",placeholder:"Sale Price (Optional)",value:f,onChange:e=>p(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",placeholder:"Quantity",value:m,onChange:e=>g(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("input",{type:"text",placeholder:"Category",value:y,onChange:e=>v(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("textarea",{placeholder:"Image URLs (comma-separated)",value:w,onChange:e=>b(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",rows:"3"}),(0,Ct.jsx)("textarea",{placeholder:"Search Keywords (comma-separated)",value:x,onChange:e=>E(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm",rows:"2"}),(0,Ct.jsxs)("div",{className:"flex items-center",children:[(0,Ct.jsx)("input",{type:"checkbox",id:"isNewAdd",checked:S,onChange:e=>k(e.target.checked),className:"h-4 w-4 text-[#b08d57] border-gray-300 rounded"}),(0,Ct.jsx)("label",{htmlFor:"isNewAdd",className:"ml-2 block text-sm text-gray-900",children:"New Arrival"})]})]}),(0,Ct.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ct.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md",children:"Cancel"}),(0,Ct.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#b08d57] text-white rounded-md",children:"Add Product"})]})]})})})},PI=e=>{let{isOpen:t,onClose:n,onUpdateProduct:i,product:s}=e;const[o,a]=(0,r.useState)({});if((0,r.useEffect)(()=>{if(s){const e=u(u({},s),{},{imageUrls:s.imageUrls?s.imageUrls.join(", "):"",keywords:s.keywords?s.keywords.join(", "):""});a(e)}},[s]),!t||!s)return null;const l=e=>{const{name:t,value:n,type:r,checked:i}=e.target;a(e=>u(u({},e),{},{[t]:"checkbox"===r?i:n}))};return(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[95vh] overflow-y-auto",children:(0,Ct.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=u(u({},o),{},{price:parseFloat(o.price),salePrice:o.salePrice?parseFloat(o.salePrice):null,quantity:parseInt(o.quantity,10),imageUrls:o.imageUrls.split(",").map(e=>e.trim()),keywords:o.keywords.split(",").map(e=>e.trim().toLowerCase())});i(t)},className:"p-6",children:[(0,Ct.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Edit Product"}),(0,Ct.jsxs)("div",{className:"space-y-4",children:[(0,Ct.jsx)("input",{type:"text",value:o.id||"",className:"w-full border-gray-300 rounded-md shadow-sm bg-gray-100",disabled:!0}),(0,Ct.jsx)("input",{type:"text",name:"name",placeholder:"Product Name",value:o.name||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("textarea",{name:"description",placeholder:"Description",value:o.description||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",name:"price",placeholder:"Price",value:o.price||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("input",{type:"number",name:"salePrice",placeholder:"Sale Price (Optional)",value:o.salePrice||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("input",{type:"number",name:"quantity",placeholder:"Quantity",value:o.quantity||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm",required:!0}),(0,Ct.jsx)("input",{type:"text",name:"category",placeholder:"Category",value:o.category||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm"}),(0,Ct.jsx)("textarea",{name:"imageUrls",placeholder:"Image URLs (comma-separated)",value:o.imageUrls||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm",rows:"3"}),(0,Ct.jsx)("textarea",{name:"keywords",placeholder:"Search Keywords (comma-separated)",value:o.keywords||"",onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm",rows:"2"}),(0,Ct.jsxs)("div",{className:"flex items-center",children:[(0,Ct.jsx)("input",{type:"checkbox",name:"isNew",id:"isNewEdit",checked:o.isNew||!1,onChange:l,className:"h-4 w-4 text-[#b08d57] border-gray-300 rounded"}),(0,Ct.jsx)("label",{htmlFor:"isNewEdit",className:"ml-2 block text-sm text-gray-900",children:"New Arrival"})]})]}),(0,Ct.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ct.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md",children:"Cancel"}),(0,Ct.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#b08d57] text-white rounded-md",children:"Update Product"})]})]})})})},jI=e=>{let{isOpen:t,onClose:n,onConfirm:r,title:i,message:s}=e;return t?(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6",children:[(0,Ct.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:i}),(0,Ct.jsx)("div",{className:"mt-2",children:(0,Ct.jsx)("p",{className:"text-sm text-gray-500",children:s})}),(0,Ct.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,Ct.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md",children:"Cancel"}),(0,Ct.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 bg-red-600 text-white rounded-md",children:"Delete"})]})]})}):null},RI=e=>{let{isRefreshing:t,pullPosition:n}=e;const r=t?20:Math.min(n/2.5,70)-50,i=n>10||t?1:0,s=t?"":"rotate(".concat(2*n,"deg)");return(0,Ct.jsx)("div",{className:"fixed top-0 left-0 right-0 flex justify-center items-center",style:{transform:"translateY(".concat(r,"px)"),zIndex:20,transition:"transform 0.3s ease-out, opacity 0.3s ease-out",opacity:i},children:(0,Ct.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/ukiyo-store.firebasestorage.app/o/426A992F-FADE-4E00-9C0D-00196AF6AB4C.PNG?alt=media&token=7c404885-978c-4783-a799-fcbd447145af",alt:"Refreshing",className:"h-12 w-12 filter drop-shadow-lg ".concat(t?"animate-spin":""),style:{transform:s,transition:t?"transform 0.5s ease-in-out":"none"}})})},DI=e=>{let{isOpen:t,message:n}=e;return t?(0,Ct.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Ct.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-8 text-center",children:[(0,Ct.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,Ct.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#b08d57]"})}),(0,Ct.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:n||"Processing..."})]})}):null},OI=["id"],LI=["id"],FI="AIzaSyAIEQc_mFJmLcHYCxKJVGOrU_vx7VLdD2E";function MI(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)({show:!1,message:""}),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[w,b]=(0,r.useState)(!1),[x,E]=(0,r.useState)(null),[S,k]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[T,N]=(0,r.useState)(null),[I,A]=(0,r.useState)(0),[P,j]=(0,r.useState)(""),[R,D]=(0,r.useState)(!1),[O,L]=(0,r.useState)(""),[F,M]=(0,r.useState)(!1),[U,V]=(0,r.useState)(""),[B,z]=(0,r.useState)(!1),[q,W]=(0,r.useState)(null),[H,K]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(null),[Y,X]=(0,r.useState)({text:"",isActive:!1}),[$,J]=(0,r.useState)({alexandria:50,cairo:70,other:100}),[Z,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(!1),{isRefreshing:re,pullPosition:ie}=Vb(),se=(0,r.useRef)(null),oe=(0,r.useCallback)(e=>{p({show:!0,message:e}),setTimeout(()=>p({show:!1,message:""}),3e3)},[]),ae=(0,r.useCallback)(async e=>{if(!Ub)return;const t=localStorage.getItem("ukiyo-guest-cart");if(!t)return;const n=JSON.parse(t);if(0===n.length)return;Hv(Ub,"users/".concat(e.uid,"/cart"));const r=ub(Ub);n.forEach(t=>{const n=Kv(Ub,"users/".concat(e.uid,"/cart"),t.id);r.set(n,t,{merge:!0})}),await r.commit(),localStorage.removeItem("ukiyo-guest-cart")},[]),le=async()=>{await function(e){return gn(e).signOut()}(Mb),a([]),oe("You have been logged out.")},ce=(0,r.useCallback)(e=>{if(T){const t=Kv(Ub,"users/".concat(T.uid,"/cart"),e.id);Yw(t).then(n=>{const r=n.exists()?n.data().quantity+1:1;Jw(t,u(u({},e),{},{quantity:r}),{merge:!0})})}else{const t=[...o],n=t.findIndex(t=>t.id===e.id);n>-1?t[n].quantity+=1:t.push(u(u({},e),{},{quantity:1})),a(t),localStorage.setItem("ukiyo-guest-cart",JSON.stringify(t))}oe("".concat(e.name," added to cart!"))},[T,o,oe]),ue=(0,r.useCallback)(e=>{if(T)eb(Kv(Ub,"users/".concat(T.uid,"/cart"),e));else{const t=o.filter(t=>t.id!==e);a(t),localStorage.setItem("ukiyo-guest-cart",JSON.stringify(t))}},[T,o]),de=(0,r.useCallback)((e,t)=>{if(t<1)ue(e);else if(T)Zw(Kv(Ub,"users/".concat(T.uid,"/cart"),e),{quantity:t});else{const n=o.map(n=>n.id===e?u(u({},n),{},{quantity:t}):n);a(n),localStorage.setItem("ukiyo-guest-cart",JSON.stringify(n))}},[T,o,ue]),he=async(e,t)=>{if(!T)return oe("Please log in to use the wishlist."),void b(!0);const n=Kv(Ub,"users/".concat(T.uid,"/wishlist"),e.id);t?(await eb(n),oe("".concat(e.name," removed from wishlist."))):(await Jw(n,{productId:e.id,createdAt:cb()}),oe("".concat(e.name," added to wishlist!")))},fe=async e=>{if(!e||0===e.length)return;const t=e.length>1?"products":"product";if(!window.confirm("Are you sure you want to permanently delete ".concat(e.length," ").concat(t,"? This cannot be undone.")))return K(!1),void Q(null);try{const n=ub(Ub);e.forEach(e=>{const t=Kv(Ub,"products",e);n.delete(t)}),await n.commit(),oe("".concat(e.length," ").concat(t," deleted successfully!"))}catch(n){oe("Failed to delete products.")}finally{K(!1),Q(null)}},pe=(0,r.useCallback)(async()=>{if(0===o.length)return void oe("Add items to your cart for styling advice.");M(!0),L(""),V(""),D(!0),h(!1);const e=o.map(e=>"".concat(e.quantity," x ").concat(e.name)).join(", "),t="I have the following Ukiyo home decor items in my cart: ".concat(e,". How can I style these together in my home? Give me some elegant and inspiring ideas.");const n="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=".concat(FI),r={contents:[{parts:[{text:t}]}],systemInstruction:{parts:[{text:"You are an expert interior designer for Ukiyo, a sophisticated home decor store in Egypt. Your style is minimalist, warm, and elegant, inspired by the Japanese concept of 'ukiyo' (living in the moment). Provide practical and beautiful styling advice. Keep the response concise, friendly, and in a single paragraph."}]}};try{var i,s,a,l,c;const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw new Error("API call failed: ".concat(e.status));const t=null===(i=(await e.json()).candidates)||void 0===i||null===(s=i[0])||void 0===s||null===(a=s.content)||void 0===a||null===(l=a.parts)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.text;if(!t)throw new Error("Unexpected API response format.");L(t)}catch(u){console.error("Gemini API error:",u),V("Sorry, our AI stylist is taking a short break. Please try again later.")}finally{M(!1)}},[o,oe]),me=(0,r.useCallback)((e,t)=>{!e||e.length<3||(se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{const n=e.toLowerCase().trim(),r=Kv(Ub,"searchAnalytics",n);try{await lb(Ub,async e=>{var i;(await e.get(r)).exists()?e.update(r,{count:(i=1,new hw("increment",i)),lastSearched:cb(),foundResults:t}):e.set(r,{term:n,count:1,lastSearched:cb(),foundResults:t})})}catch(i){console.error("Error logging search:",i)}},1e3))},[]);(0,r.useEffect)(()=>{const e=document.querySelector('link[rel="icon"]');e&&(e.href="https://firebasestorage.googleapis.com/v0/b/ukiyo-store.firebasestorage.app/o/ChatGPT%20Image%20Sep%2014%2C%202025%2C%2008_19_02%20AM.png?alt=media&token=4be29f8e-64b1-4bba-8d2d-10cc80ae5a30")},[]),(0,r.useEffect)(()=>{const e=function(e,t,n,r){return gn(e).onAuthStateChanged(t,n,r)}(Mb,async e=>{if(N(e),e){const n=Kv(Ub,"admins",e.uid),r=await Yw(n);t(r.exists());const i=tb(Kv(Ub,"users",e.uid),e=>{e.exists()&&E(e.data())}),s=tb(Hv(Ub,"users/".concat(e.uid,"/cart")),e=>{a(e.docs.map(e=>u({id:e.id},e.data())))}),o=tb(Hv(Ub,"users/".concat(e.uid,"/wishlist")),e=>{c(e.docs.map(e=>e.id))});return()=>{i(),s(),o()}}t(!1),E(null),c([]);try{const e=localStorage.getItem("ukiyo-guest-cart");a(e?JSON.parse(e):[])}catch(VI){a([])}});return()=>e()},[]),(0,r.useEffect)(()=>{const e=tb(Hv(Ub,"products"),e=>{i(e.docs.map(e=>u({id:e.id},e.data())))});return()=>e()},[]),(0,r.useEffect)(()=>{const e=tb(Kv(Ub,"storeSettings","announcement"),e=>{e.exists()?X(e.data()):X({text:"",isActive:!1})});return()=>e()},[]),(0,r.useEffect)(()=>{const e=tb(Kv(Ub,"storeSettings","delivery"),e=>{e.exists()&&J(e.data())});return()=>e()},[]);const ge=o.reduce((e,t)=>e+t.quantity,0);return(0,Ct.jsxs)(gt,{children:[(0,Ct.jsx)(RI,{isRefreshing:re,pullPosition:ie}),(0,Ct.jsx)(Fe,{children:(0,Ct.jsxs)(Oe,{path:"/",element:(0,Ct.jsx)(UN,{isAdmin:e,cartItemCount:ge,setShowCart:h,searchQuery:m,setSearchQuery:g,currentUser:T,userInfo:x,onLoginClick:()=>b(!0),onLogoutClick:le,announcement:Y,allProducts:n,onLogSearch:me}),children:[(0,Ct.jsx)(Oe,{index:!0,element:(0,Ct.jsx)(QN,{allProducts:n,searchQuery:m,wishlist:l,onToggleWishlist:he})}),(0,Ct.jsx)(Oe,{path:"product/:productId",element:(0,Ct.jsx)(ZN,{onAddToCart:ce,onImageClick:(e,t)=>k({images:e,index:t}),currentUser:T,userInfo:x,showNotification:oe,wishlist:l,onToggleWishlist:he})}),(0,Ct.jsx)(Oe,{path:"wishlist",element:(0,Ct.jsx)(oI,{allProducts:n,wishlist:l,onToggleWishlist:he})}),(0,Ct.jsx)(Oe,{path:"profile",element:(0,Ct.jsx)(nI,{userInfo:x,onUpdate:async e=>{if(!T)return;const t=Kv(Ub,"users",T.uid);try{await Zw(t,e),oe("Profile updated successfully!")}catch(n){oe("Failed to update profile.")}},onPasswordReset:async()=>{if(null!==T&&void 0!==T&&T.email)try{await async function(e,t,n){const r=is(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ws(r,i,n),await ds(r,i,"getOobCode",ws)}(Mb,T.email),oe("Password reset email sent. Check your inbox.")}catch(e){oe("Failed to send password reset email.")}},onEmailUpdate:async(e,t)=>{if(T)try{const n=Ts.credential(T.email,t);await qs(T,n),await function(e,t){const n=gn(e);return Cr(n.auth.app)?Promise.reject(Jr(n.auth)):Ks(n,t,null)}(T,e);const r=Kv(Ub,"users",T.uid);await Zw(r,{email:e}),oe("Email updated successfully. Please log in again."),le()}catch(n){oe("Error updating email: ".concat(n.message))}},showNotification:oe})}),(0,Ct.jsx)(Oe,{path:"orders",element:(0,Ct.jsx)(sI,{})}),e&&(0,Ct.jsx)(Oe,{path:"admin",element:(0,Ct.jsx)(xI,{products:n,onAddProductClick:()=>z(!0),onEditProductClick:e=>W(e),onDeleteProduct:fe,showNotification:oe})})]})}),(0,Ct.jsx)(TI,{message:f.message,show:f.show}),(0,Ct.jsx)(EI,{showCart:d,setShowCart:h,cart:o,updateCartItem:de,removeFromCart:ue,openCheckout:()=>v(!0),getStylingAdvice:pe}),(0,Ct.jsx)(_I,{isOpen:w,onClose:()=>b(!1),onLogin:async(e,t)=>{try{const n=await function(e,t,n){return Cr(e.app)?Promise.reject(Jr(e)):zs(gn(e),Ts.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Hs(e),t})}(Mb,e,t),r=n.user,i=Kv(Ub,"users",r.uid);(await Yw(i)).exists()||await Jw(i,{name:r.email,email:r.email,createdAt:cb()}),await ae(r),b(!1),oe("Logged in successfully!")}catch(n){oe("Login failed: ".concat(n.message))}},onRegister:async(e,t,n)=>{try{const r=await async function(e,t,n){if(Cr(e.app))return Promise.reject(Jr(e));const r=is(e),i=ds(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ds),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Hs(e),t}),o=await Os._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Mb,t,n),i=r.user;await Jw(Kv(Ub,"users",i.uid),{name:e,email:t,createdAt:cb()}),await ae(i),b(!1),oe("Welcome, ".concat(e,"!"))}catch(r){oe("Registration failed: ".concat(r.message))}},onGoogleSignIn:async()=>{const e=new Ps;try{const t=await async function(e,t,n){if(Cr(e.app))return Promise.reject(Xr(e,"operation-not-supported-in-this-environment"));const r=is(e);Zr(e,t,Ns);const i=vo(r,n);return new _o(r,"signInViaPopup",t,i).executeNotNull()}(Mb,e),n=t.user,r=Kv(Ub,"users",n.uid);(await Yw(r)).exists()||await Jw(r,{name:n.displayName,email:n.email,createdAt:cb()}),await ae(n),b(!1),oe("Welcome, ".concat(n.displayName,"!"))}catch(t){oe("Could not sign in with Google.")}},onSendLink:async e=>{const t={url:window.location.origin,handleCodeInApp:!0};try{await async function(e,t,n){const r=is(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ti(t.handleCodeInApp,r,"argument-error"),t&&Ws(r,e,t)}(i,n),await ds(r,i,"getOobCode",bs)}(Mb,e,t),window.localStorage.setItem("emailForSignIn",e),oe("Sign-in link sent!")}catch(n){oe("Error sending link: ".concat(n.message))}}}),(0,Ct.jsx)(kI,{isOpen:y,onClose:()=>v(!1),cart:o,userInfo:x,onApplyCoupon:async e=>{if(!e.trim())return void j("Please enter a coupon code.");j(""),ee(!1),A(0);const t=Kv(Ub,"coupons",e.toUpperCase());try{const n=await Yw(t);if(!n.exists())return void j("Invalid coupon code.");const r=n.data(),i=o.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0);if(r.expiryDate&&new Date(1e3*r.expiryDate.seconds)<new Date)return void j("This coupon has expired.");if(r.minPurchase&&i<r.minPurchase)return void j("This coupon requires a minimum purchase of EGP ".concat(r.minPurchase,"."));const s=Hv(Ub,"orders");if(r.firstOrderOnly){const e=Pw(s,Rw("userId","==",T.uid));if(!(await $w(e)).empty)return void j("This coupon is for first-time customers only.")}if(r.usageLimit){const t=Pw(s,Rw("userId","==",T.uid),Rw("coupon","==",e.toUpperCase()));if((await $w(t)).size>=r.usageLimit)return void j("You have reached the usage limit for this coupon.")}if("free_delivery"===r.type)return ee(!0),void oe("Free delivery unlocked!");let a=0;"percentage"===r.type?(a=i*r.value/100,r.maxDiscount&&a>r.maxDiscount&&(a=r.maxDiscount)):"fixed"===r.type&&(a=r.value),A(a),oe("Coupon applied successfully!")}catch(n){console.error("Error applying coupon:",n),j("Could not apply coupon.")}},couponError:P,discount:I,deliveryCosts:$,isFreeDelivery:Z}),(0,Ct.jsxs)(zt,{children:[" ",S&&(0,Ct.jsx)(CI,{data:S,onClose:()=>k(null)})," "]}),(0,Ct.jsx)(NI,{isOpen:R,onClose:()=>D(!1),isLoading:F,advice:O,error:U}),_&&(0,Ct.jsx)(II,{isOpen:!!_,data:_,onClose:()=>C(null)}),(0,Ct.jsx)(AI,{isOpen:B,onClose:()=>z(!1),onAddProduct:async e=>{const{id:t}=e,n=s(e,OI);if(t&&n.name)try{await Jw(Kv(Ub,"products",t),u(u({},n),{},{createdAt:cb()})),oe("Product added successfully!"),z(!1)}catch(r){oe("Failed to add product.")}else oe("Product ID and Name are required.")}}),(0,Ct.jsx)(PI,{isOpen:!!q,onClose:()=>W(null),product:q,onUpdateProduct:async e=>{const{id:t}=e,n=s(e,LI);try{await Zw(Kv(Ub,"products",t),n),oe("Product updated successfully!"),W(null)}catch(r){oe("Failed to update product.")}}}),(0,Ct.jsx)(jI,{isOpen:H,onClose:()=>K(!1),onConfirm:()=>fe([G]),title:"Delete Product",message:"Are you sure you want to delete this product? This action cannot be undone."}),(0,Ct.jsx)(DI,{isOpen:te,message:"Processing..."})]})}i.createRoot(document.getElementById("root")).render((0,Ct.jsx)(r.StrictMode,{children:(0,Ct.jsx)(MI,{})}))})();
//# sourceMappingURL=main.44543868.js.map